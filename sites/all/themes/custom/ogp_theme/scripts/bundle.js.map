{"version":3,"sources":["main.js","components/accordion.js","components/banner.js","components/exploreMore.js","components/link.js","components/loader.js","components/modal.js","components/pagination.js","components/placeholder.js","components/search.js","components/selector.js","components/tabs.js","components/tile.js","helpers/dates.js","helpers/smoothScroll.js","helpers/strings.js","helpers/threeDots.js","layouts/commitments/currentCommitmentsDetail.js","layouts/commitments/irmCommitmentsDetail.js","layouts/commitments/modelCommitmentsDetail.js","layouts/commitments/starredCommitmentsDetail.js","layouts/countries/countriesDetail.js","layouts/countries/countriesMap.js","layouts/countries/countriesPage.js","layouts/countries/countriesTabs.js","layouts/home/homePage.js","layouts/resource/resourcePage.js","layouts/resources/groupResourcesDetail.js","layouts/resources/groupResourcesPage.js","layouts/resources/resourceDetail.js","layouts/stories/storiesDetail.js","layouts/stories/storiesPage.js","layouts/stories/storiesSubmitPage.js","layouts/themes/themeDetail.js","layouts/themes/themePage.js","layouts/working-group/groupList.js","layouts/working-group/workingGroupDetail.js"],"names":["getAbsolutePath","loc","window","location","pathName","pathname","substring","lastIndexOf","href","length","search","hash","$","Drupal","behaviors","myBehavior","attach","context","settings","page","block_refresh","args","liveSettings","api_key","picker","slick","dots","arrows","speed","fade","cssEase","dotsClass","appendDots","smoothScroll","find","showHomePage","addBanner","showStoriesPage","showStoriesSubmitPage","showStoryDetail","showCountriesDetail","showCountriesPage","showThemesPage","showThemesDetail","showGroupResourcesPage","showGroupResourcesDetail","showResourcesDetail","showDocumentResourcePage","showModelCommitmentDetail","showStarredCommitmentDetail","showCurrentCommitmentDetail","showIrmCommitmentDetail","showGroupList","showWorkingGroupDetail","buildSubscribeModal","jQuery","closeAccordionSection","removeClass","slideUp","getPageCount","dataCount","threshold","Math","ceil","appendAccordionItems","view","data","accordion","html","forEach","item","id","label","body","value","alias","setAccordionListeners","click","e","currentAttrValue","attr","target","is","addClass","slideDown","preventDefault","initAccordion","type","append","getJSON","buildExploreMoreTiles","endPoint","filter","filters","tiles","slice","appendTiles","removeLoader","buildLink","link","url","description","buildRelLink","container","removeList","hide","remove","showLoader","initModal","template","customClass","setModalListeners","closeModal","openModal","updateModalContainer","on","onChangeNewsletterListener","newsletterId","subscribeModalTemplate","buildMapModal","mapModalTemplate","updateMapModal","countryId","countriesData","setMapModalContent","setDataToModal","pushDefaultModal","query","countryData","dataLabel","buttonText","buttonLink","modalType","dataInfo","trimmedData","topic","author","moment","parseInt","memberSince","format","count","pushSmallModal","firstDataLabel","secondDataLabel","country","currentFilter","val","buildPagination","totalPages","numbersPager","j","_j","initPagination","containerId","paginationHtml","showNoResults","text","size","color","iconSize","hideNoResults","setSearchPlaceholder","toLowerCase","setSearchListeners","keyup","activeTab","valueInput","each","indexOf","css","results","appendSelectOptions","selector","options","option","appendSelectOptionsFromData","getSelectOptionsFromData","optionName","optionStart","optionEnd","push","sort","buildSelector","setTabListeners","callback","hasClass","dataset","node","innerHTML","initTabs","first","buildTabs","tabsContainer","appendTilesWithoutBackground","gridNum","gridWidth","group","image","appendTilesStandards","appendSmallTiles","topContainer","appendTilesDetailed","monthNames","creationDate","Date","created","topicsHtml","index","title","getDay","getMonth","getFullYear","appendCountriesInfoBars","year_action_plan","none_impact","minor_impact","moderate_impact","transformative_impact","appendCountriesRelevance","access_information","civic_participation","public_accountability","unclear","appendCountriesThematicBars","current_themes","current_percentage","convertPostDate","date","dateString","dd","getDate","mm","yyyy","convertEventDate","myDate","dateDiff","diff","replace","hostname","animate","scrollTop","offset","top","getAuthors","authorString","addDots","string","limit","buildCurrentCommitment","lead_institution","support_institution","onChangeTab","fetchModelCommitmentDetail","strength","contributors","justification","standardsguidance","years","docTypes","actionPlans","letters","reports","pageThreshold","actionPlansContainer","reportsContainer","lettersContainer","eventsContainer","themesContainer","completionContainer","currentPageCount","irmPageCount","lettersData","actionPlansData","reportsData","select2","minimumResultsForSearch","Infinity","containerCssClass","_setDataCount","_appendLoadingBar","theme","_appendStories","stories","story","_appendLinks","activeFilter","publication_date","cycle_start","cycle_end","_appendEvents","event","eventMeta","value2","endDate","locality","setPaginationListerners","pageCount","pageNum","setSelectorListener","initLinksSelectorContainer","dataCache","optionValues","bodyContentListener","toggleClass","current_commitments_count","irm_commitments_count","starred_commitments_count","themesData","i","midterm_percentage","endofterm_percentage","completionData","initCountriesMap","map","L","zoomControl","center","zoom","maxZoom","minZoom","scrollWheelZoom","basemap","tileLayer","attribution","addTo","setZoom","getZoom","initMapLayer","layers","cartoQueryLink","over","cartodb","createLayer","user_name","sublayers","done","layer","setInteraction","createSubLayer","hovers","bind","latlon","pxPos","_","any","m","latlng","pos","name","cartodb_id","actionPlanData","rows","nid","starredData","countryid","peopleInvolvedData","storiesData","eventData","commitmentsData","titleEvent","pageY","pageX","initEventFunctions","setMapLegendListeners","removeLayers","getSubLayers","sublayer","namelayer","prop","change","sql","cartocss","interactivity","action","starred","people","upcomingevent","pastevent","commitment","participants","countriesContent","countriesMap","onChangeCountryTab","setPageCount","showCountriesData","cacheData","countries","invalidateSize","buildCountrySelector","onClickPagination","initCountryTabs","themes","initViews","placeholder","setCountrySelectorListeners","filterValue","getCurrentPage","showOnClickPagination","hideOnClickPagination","setCountryDataTiles","starred_commitments","trimCommitments","initCountryBox","action_plan_count","filteredCountries","sliceStart","adaptiveHeight","datapath","document","origin","path","tileContainer","searchEl","searchText","searchContainer","currentNode","tilesContainer","sub_group_id","filterGroup","resources","resource","group_resource","metaHtml","pathCountry","content","authors","pathTheme","$this","countryFilter","typeFilter","countrySelector","typeSelector","coverEvents","storiesContainer","buildHighlightedEvent","endpoint","dropdownCssClass","showStories","activeCountry","activeType","activeFilters","highlightedStory","themeSelector","topicId","email","ajax","dataType","showAPIThemes","contentContainer","contributorText","setContributorsText","log","setSelectCountryListerners","countryModel","showContent","initSelectors","countryQuery","themesTitle","showThemesTiles","currentSearch","parseId","sortValue","tableContainer","showGroups","sortApi","working","workingTable","createTable","startOf","fromNow","containerInfo","onChangeWorkinPageTab","initWorkingTabs","onChange"],"mappings":"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","file":"bundle.js","sourcesContent":["function getAbsolutePath() {\n  const loc = window.location;\n  const pathName = loc.pathname.substring(0, loc.pathname.lastIndexOf('/') + 1);\n  return loc.href.substring(0, loc.href.length - (\n    (loc.pathname + loc.search + loc.hash).length - pathName.length)\n  );\n}\n\n(function($) {\n  Drupal.behaviors.myBehavior = {\n    attach: function (context, settings) {\n      const page = settings.block_refresh.args[0];\n\n      window.liveSettings={\n        api_key:\"5a2bcd52efad4b169c9543330d3187a4\",\n        picker: \"#transifexSelector\"\n      };\n\n      /////////////////\n      // global actions\n      /////////////////\n\n      // initialise any slider on pages\n      $('.slider-container').slick({\n        dots: true,\n        arrows: false,\n        speed: 500,\n        fade: true,\n        cssEase: 'linear',\n        dotsClass: 'dots-container',\n        appendDots: '.c-slider-dots'\n      });\n\n      // listener for anchor smooth scrolling\n      smoothScroll();\n\n      //init trasnifex\n      window.liveSettings.picker = '#transifexSelector';\n\n      /////////////////\n      // Routing action\n      /////////////////\n\n      // home page\n      if ($(context).find('#homePage').length !== 0) {\n        showHomePage();\n        addBanner('involved');\n      }\n\n      // stories\n      if ($(context).find('#storiesPage').length !== 0) {\n        showStoriesPage();\n        addBanner('writestory');\n        addBanner('newsletter');\n      }\n      if ($(context).find('#storiesSubmitPage').length !== 0) {\n        addBanner('newsletter');\n        showStoriesSubmitPage(settings.block_refresh.args[2]);\n      }\n      if ($(context).find('#storiesDetail').length !== 0) {\n        addBanner('writestory');\n        addBanner('newsletter');\n        showStoryDetail(settings.block_refresh.args[1]);\n      }\n\n      // countries\n      if ($(context).find('#countriesDetail').length !== 0) {\n        addBanner('peopleCountry', settings.block_refresh.args[1]);\n        addBanner('newsletter');\n        showCountriesDetail(settings.block_refresh.args[1]);\n      }\n      if ($(context).find('#countriesPage').length !== 0) {\n        addBanner('newsletter');\n        showCountriesPage();\n      }\n\n      // themes\n      if ($(context).find('#themesPage').length !== 0) {\n        addBanner('newsletter');\n        showThemesPage();\n      }\n      if ($(context).find('#themesDetail').length !== 0) {\n        addBanner('newsletter');\n        showThemesDetail(settings.block_refresh.args[2]);\n      }\n\n      // resources\n      if ($(context).find('#groupResourcesPage').length !== 0) {\n        addBanner('newsletter');\n        showGroupResourcesPage();\n      }\n      if ($(context).find('#groupResourcesDetail').length !== 0) {\n        addBanner('newsletter');\n        showGroupResourcesDetail(settings.block_refresh.args[1]);\n      }\n      if ($(context).find('#resourcesDetail').length !== 0) {\n        addBanner('newsletter');\n        showResourcesDetail(settings.block_refresh.args[1]);\n      }\n\n      // document resources\n      if ($(context).find('#documentResourcesPage').length !== 0) {\n        addBanner('newsletter');\n        showDocumentResourcePage();\n      }\n\n      // commitments\n      if ($(context).find('#modelCommitmentsDetail').length !== 0) {\n        addBanner('newsletter');\n        showModelCommitmentDetail(settings.block_refresh.args[1]);\n      }\n      if ($(context).find('#starredCommitmentsDetail').length !== 0) {\n        addBanner('newsletter');\n        showStarredCommitmentDetail(settings.block_refresh.args[1]); }\n      if ($(context).find('#currentCommitmentsDetail').length !== 0) {\n        addBanner('newsletter');\n        showCurrentCommitmentDetail(settings.block_refresh.args[1]);\n      }\n      if ($(context).find('#irmCommitmentsDetail').length !== 0) {\n        addBanner('newsletter');\n        showIrmCommitmentDetail(settings.block_refresh.args[1]);\n      }\n\n      // People Involved\n      if ($(context).find('#peopleInvolved').length !== 0) {\n        addBanner('newsletter');\n      }\n\n      // News and Events\n      if ($(context).find('#newsTemplate').length !== 0) {\n        addBanner('writestory');\n        addBanner('newsletter');\n      }\n\n      if ($(context).find('#eventsTemplate').length !== 0) {\n        addBanner('writestory');\n        addBanner('newsletter');\n      }\n\n      // Working Group\n      if ($(context).find('#workingGroupList').length !== 0) {\n        showGroupList();\n        addBanner('newsletter');\n      }\n\n      if ($(context).find('#workingGroupDetail').length !== 0) {\n        showWorkingGroupDetail(settings.block_refresh.args[1]);\n        addBanner('newsletter');\n      }\n\n      //build subscribe modal\n      buildSubscribeModal();\n\n    }\n  };\n})(jQuery);\n","function closeAccordionSection() {\n  $('.c-accordion .accordion-section-title').removeClass('active');\n  $('.c-accordion .accordion-section-content').slideUp(200).removeClass('open');\n}\n\nfunction getPageCount(dataCount, threshold) {\n  return Math.ceil(dataCount / threshold);\n}\n\nfunction appendAccordionItems(view, data) {\n  const accordion = $(`#${view} .c-accordion`);\n  let html = '';\n  data.forEach((item) => {\n    html += `\n      <div class=\"accordion-section\">\n        <a class=\"accordion-section-title text -small-bold -black\" href=\"#accordion-${view}-${item.id}\">${item.label}<svg class=\"icon -blue -small\"><use xlink:href=\"#icon-down-arrow\"></use></svg></a>\n        <div id=\"accordion-${view}-${item.id}\" class=\"accordion-section-content\">\n        <div class=\"text -body-content body-container\">${item.body.value}</div>\n        <div class=\"body-container -link\">\n          <a class=\"text -blue link-accordion\" href=\"/${item.alias}\">See more <svg class=\"icon -blue -medium\"><use xlink:href=\"#icon-arrow\"></use></svg></a>\n        </div>\n        </div>\n      </div>\n    `;\n  });\n  accordion.html(html);\n}\n\nfunction setAccordionListeners(view) {\n  $(`#${view} .accordion-section-title`).click(function(e) {\n    var currentAttrValue = $(this).attr('href');\n    if($(e.target).is('.active')) {\n      closeAccordionSection();\n    } else {\n      closeAccordionSection();\n      $(this).addClass('active');\n      $(`#${view} .c-accordion ${currentAttrValue}`).slideDown(200).addClass('open');\n    }\n    e.preventDefault();\n  });\n}\n\nfunction initAccordion(view, data) {\n  appendAccordionItems(view, data);\n  setAccordionListeners(view);\n}\n","function addBanner(type, id) {\n  switch (type) {\n    case 'writestory':\n      $('.banners-container').append(`\n        <div class=\"l-full-width -blue -short -center\">\n          <div class=\"row\">\n            <div class=\"column small-12 medium-7 large-9\">\n              <h3 class=\"text -title-small -white\">What is your country doing?</h3>\n              <p class=\"text -white\">\n                See how your goverment and civil society are working together to accomplish commitments\n               for the current National Action Plan cycle. Or write your own story.\n              </p>\n            </div>\n            <div class=\"column small-12 medium-5 large-3 vertical\">\n              <a class=\"c-button -box -large -center\" href=\"/submit-story\">write story</a>\n            </div>\n          </div>\n        </div>\n      `);\n      break;\n    case 'newsletter':\n      $('.banners-container').append(`\n        <div class=\"l-full-width -black -short -center\">\n          <div class=\"row\">\n            <div class=\"column small-12 medium-7 large-9\">\n              <h3 class=\"text -title-small -white\">OGPs monthly newsletter</h3>\n              <p class=\"text -white\">\n                Helps goverments, civil society actors and concerned citizens stay informed\n              </p>\n            </div>\n            <div class=\"column small-12 medium-5 large-3 vertical\">\n                <span class=\"c-button -box -large -center js-subscribeModalOpen\">Subscribe</span>\n            </div>\n          </div>\n        </div>\n      `);\n      break;\n    case 'involved':\n      $('.banners-container').append(`\n        <div class=\"l-full-width -black -short -center\">\n          <div class=\"row\">\n            <div class=\"column small-12 medium-7 large-9\">\n              <h3 class=\"text -title-small -white\">Get involved</h3>\n              <p class=\"text -white\">\n                For the Open Government Partnership model to work, lots of people need to get involved\n              </p>\n            </div>\n            <div class=\"column small-12 medium-5 large-3 vertical\">\n                <a class=\"c-button -box -large -center\" href=\"/resources\">Resources</a>\n            </div>\n          </div>\n        </div>\n      `);\n      break;\n      case 'peopleCountry':\n        $.getJSON(`/apiJSON/countries/${id}`, function (data) {\n          $('.banners-container').append(`\n            <div class=\"l-full-width -blue -short -center\">\n              <div class=\"row\">\n                <div class=\"column small-12 medium-7 large-9\">\n                  <h3 class=\"text -title-small -white\">People involved from ${data.data[0].label}</h3>\n                  <p class=\"text -white\">\n                    For the Open Government Partnership model to work, lots of people need to get involved\n                  </p>\n                </div>\n                <div class=\"column small-12 medium-5 large-3 vertical\">\n                  <a class=\"c-button -box -large -center\" href=\"/submit-story\">EXPLORE PEOPLE</a>\n                </div>\n              </div>\n            </div>\n          `);\n        });\n      break;\n    default:\n      break;\n  }\n}\n","function buildExploreMoreTiles(endPoint, filter, value) {\n  let filters = '';\n  if (filter) {\n    filters = `filter[${filter}]=${value}&`;\n  }\n  $.getJSON(`/apiJSON/${endPoint}?${filters}page[size]=4`, (data) => {\n    if (data.data.length) {\n      const tiles = data.data.slice(0, 4);\n      appendTiles(tiles, $('.c-explore-more .container'), 4);\n    }\n    removeLoader('.c-explore-more');\n  });\n}\n","function buildLink(link) {\n  const html = `\n    <div class=\"c-link\">\n      <div class=\"link\">\n        <svg class=\"icon -blue\"><use xlink:href=\"#icon-external-link\"></use></svg>\n        <a class=\"text -link -blue\" href=\"/${link.link.url}\" target=\"_blank\" rel=\"nofollow\">${link.label}</a>\n      </div>\n      ${link.description ? '<p class=\"text -footnote\">Description lorem ipsum leo isus, porta ac consectetur ac, vestibulum at eras.</p>' : ''}\n    </div>\n  `;\n  return html;\n}\n\nfunction buildRelLink(link) {\n  const html = `\n    <div class=\"c-link\">\n      <div class=\"link\">\n        <svg class=\"icon -blue\"><use xlink:href=\"#icon-external-link\"></use></svg>\n        <a class=\"text -link -blue\" href=\"/${link.alias}\" rel=\"nofollow\">${link.label}</a>\n      </div>\n      ${link.description ? '<p class=\"text -footnote\">Description lorem ipsum leo isus, porta ac consectetur ac, vestibulum at eras.</p>' : ''}\n    </div>\n  `;\n  return html;\n}\n","function removeLoader(container, removeList, hide) {\n  if (hide) {\n    $(`${container} .c-loader`).addClass('-hidden');\n  } else {\n    $(`${container} .c-loader`).remove();\n  }\n\n  // additional items to remove -hidden class from\n  if (removeList) {\n    removeList.forEach(function(item) {\n      $(item).removeClass('-hidden');\n    });\n  }\n}\n\nfunction showLoader(container) {\n  $(`${container} .c-loader`).removeClass('-hidden');\n}\n","function initModal(id, template, customClass) {\n  const html = `\n    <div id=\"${id}\" class=\"c-modal ${customClass}\">\n      <div class=\"modal-overlay\"></div>\n      <div class=\"modal-container\">\n        <svg class=\"icon close-icon js-close-modal\"><use xlink:href=\"#icon-close\"></use></svg>\n        <div class=\"modal-content\">\n          ${template}\n        </div>\n      </div>\n    </div>\n  `;\n  $('body').append(html);\n  setModalListeners(id);\n}\n\nfunction closeModal(id) {\n  $(`#${id}`).removeClass('-open');\n}\n\nfunction openModal(id) {\n  $(`#${id}`).addClass('-open');\n  $('body').addClass('-fixed');\n}\n\nfunction updateModalContainer(id, template) {\n  $(`#${id} .modal-content`).html(template);\n}\n\nfunction setModalListeners(id) {\n  $(`.js-${id}Open`).on('click', function() {\n    openModal(id);\n  });\n  $(`.js-close-modal`).on('click', function() {\n    closeModal(id);\n  });\n  $(`.modal-overlay`).on('click', function() {\n    closeModal(id);\n  });\n  if (id === 'subscribeModal') {\n    onChangeNewsletterListener();\n  }\n}\n\nfunction onChangeNewsletterListener() {\n  $('.newsletter-selector').on('click', function() {\n    const newsletterId = `http://opengovpartnership.us3.list-manage.com/subscribe/post?u=b25f647af089f5f52485a663d&id=${$(this).data('option')}`;\n    $('.newsletter-selector').removeClass('-selected');\n    $(this).addClass('-selected');\n    $('#subscribeModal .c-form').attr('target', newsletterId);\n  });\n}\n\nfunction buildSubscribeModal() {\n  const subscribeModalTemplate = `\n    <form class=\"c-form validate\" id=\"mc-embedded-subscribe-form\" name=\"mc-embedded-subscribe-form\" action=\"http://opengovpartnership.us3.list-manage.com/subscribe/post?u=b25f647af089f5f52485a663d&id=874e29c81c\" method=\"POST\">\n      <div class=\"content-wrapper\">\n        <h3 class=\"text -module-title with-padding\">Our Newsletters</h3>\n        <label class=\"text -small-bold -blue\" for=\"email\">Email</label>\n        <input type=\"email\" required=\"required\" placeholder=\"Your email address\" id=\"mce-EMAIL\" name=\"EMAIL\">\n        <label class=\"text -small-bold -blue\">Subscribe to</label>\n        <div class=\"selector-boxes\">\n          <div class=\"text newsletter-selector -selected -interactive\" data-option=\"874e29c81c\">OGP Newsletter</div>\n          <div class=\"text newsletter-selector -interactive\" data-option=\"20323ef712\">OGP Gazette</div>\n          <div class=\"text newsletter-selector -interactive\" data-option=\"ec2455b5b5\">Boletn de OGP</div>\n        </div>\n      </div>\n      <input type=\"submit\" name=\"subscribe\" id=\"mc-embedded-subscribe\" class=\"c-button -tall -green-back -white\" value=\"subscribe\">\n    </form>\n  `;\n  initModal('subscribeModal', subscribeModalTemplate, '-subscribe');\n}\n\nfunction buildMapModal() {\n  let mapModalTemplate = '';\n  initModal('mapModal', mapModalTemplate, '-map');\n}\n\nfunction updateMapModal(countryId, type, countriesData) {\n  $(`#mapModal .modal-content`).html('');\n  setMapModalContent('mapModal', type, countryId, countriesData);\n}\n\nfunction setDataToModal(id, html) {\n  updateModalContainer(id, html);\n  removeLoader('.l-map', null, true);\n  openModal(id);\n}\n\nfunction pushDefaultModal(id, query, countryData, dataLabel, buttonText, buttonLink, modalType) {\n  $.getJSON(`apiJSON/${query}`, function (data) {\n    let dataInfo = '';\n    if (data.data.length > 0) {\n      const trimmedData = modalType === 'slider' ? data.data.slice(0,3): data.data;\n      trimmedData.forEach(function(data) {\n        if (modalType === 'list') {\n          dataInfo += `\n            <a href=\"${data.alias}\">\n              <h2 class=\"text -title-x-small\">${data.label}</h2>\n            </a>\n          `;\n        } else if (modalType === 'grid'){\n          dataInfo += `\n            <span class=\"text -small-bold -blue\">${data.label}</span>\n            <p class=\"text -body-content\">${data.body.value}</p>\n          `;\n        } else if (modalType === 'slider') {\n          dataInfo += `\n            <div class=\"slide\">\n              <a href=\"${data.topic[0] ? data.topic[0].alias : ''}\" class=\"text -small-bold -blue\">${data.topic[0] ? data.topic[0].label : ''}</a>\n              <h2 class=\"text -title-x-small\">${data.label}</h2>\n              <p class=\"text -meta\">${data.author[0] ? data.author[0].label : ''}</p>\n            </div>\n          `;\n        }\n      });\n    }\n    const html = `\n      <div class=\"modal-header\">\n        <div class=\"header-info\">\n          <h3 class=\"text -module-title\">${countryData[0].label}</h3>\n          <p class=\"text -meta\">Member since ${moment(parseInt(countryData[0].memberSince)).format('YYYY')}, Action plan 1</p>\n        </div>\n        <div class=\"c-data-number\">\n          <h3 class=\"text -number\">${data.count}</h3>\n          <p class=\"text -small-bold\">${dataLabel}</p>\n        </div>\n      </div>\n      <div class=\"content-wrapper -scroll ${modalType === 'slider' ? 'stories-slider': ''}\">\n        ${dataInfo}\n      </div>\n      <div class=\"button-container -fixed\">\n        <a href=\"/${buttonLink}\" class=\"c-button -tall -green-back -box\">${buttonText}</a>\n        <a href=\"${countryData[0].alias}\" class=\"c-button -tall -green-back -box\">VIEW COUNTRY</a>\n      </div>\n    `;\n    setDataToModal(id, html);\n    if (modalType === 'slider') {\n      $('.stories-slider').slick({\n        dots: true,\n        arrows: false,\n        speed: 500,\n        fade: true,\n        cssEase: 'linear',\n        dotsClass: 'dots-slider-modal',\n      });\n    }\n  });\n}\n\nfunction pushSmallModal(id, query, countryData, firstDataLabel, secondDataLabel, buttonText, buttonLink) {\n\n  $.getJSON(`apiJSON/${query}`, function (data) {\n    const html = `\n      <div class=\"content-wrapper\">\n        <h3 class=\"text -module-title\">${countryData[0].label}</h3>\n        <p class=\"text -meta\">Member since ${moment(parseInt(countryData[0].memberSince)).format('YYYY')}</p>\n        <div class=\"data-container\">\n          <div class=\"c-data-number -with-padding\">\n            <h4 class=\"text -number\">${data.count}</h4>\n            <span class=\"text -small-bold\">${firstDataLabel}</span>\n          </div>\n          <div class=\"c-data-number -with-padding\">\n            <h4 class=\"text -number\">3</h4>\n            <span class=\"text -small-bold\">${secondDataLabel}</span>\n          </div>\n        </div>\n      </div>\n      <div class=\"button-container\">\n        <a class=\"c-button -box -tall -green-back -white\" href=\"${buttonLink}\">${buttonText}</a>\n        <a class=\"c-button -box -tall -green-back -white\" href=\"${countryData[0].alias}\">View country</a>\n      </div>\n    `;\n    setDataToModal(id, html);\n  });\n}\n\nfunction setMapModalContent(id, type, countryId, countriesData) {\n  const countryData = countriesData.filter(function(country) {\n    return country.id == countryId;\n  });\n  switch (type) {\n    case 'actionPlan':\n      pushSmallModal(id, `irm_commitments?filter[country]=${countryId}`, countryData, 'commitments', 'themes covered', 'latest stories', '/stories');\n      break;\n    case 'starred':\n      pushDefaultModal(id, `starredcommitments?filter[country]=${countryId}`, countryData, 'starred commitments', 'latest stories', '/stories', 'list');\n      break;\n    case 'event':\n      pushDefaultModal(id, `events?filter[country]=${countryId}`, countryData, 'upcoming events', 'go to events', '/events', 'list');\n      break;\n    case 'commitment':\n      const currentFilter = $('.select-legend-dropdown').val() ? `&filter[theme_id]=${$('.select-legend-dropdown').val()}` : '';\n      pushDefaultModal(id, `current_commitment?filter[country]=${countryId}${currentFilter}`, countryData, 'current commitments', 'explore this theme', '/theme', 'list');\n      break;\n    case 'people':\n      pushDefaultModal(id, `people?filter[country]=${countryId}`, countryData, 'people involved', 'latest stories', '/stories', 'grid');\n      break;\n    case 'stories':\n      pushDefaultModal(id, `stories?filter[country]=${countryId}`, countryData, 'stories', 'latest stories', '/stories', 'slider');\n      break;\n    default:\n      break;\n  }\n}\n","function buildPagination(page, totalPages) {\n  let numbersPager = '';\n  if (page > 1) {\n    numbersPager += '<li class=\"prev text -pagination onClickPagination\" data-value=\"' + (page - 1) + '\">back</li>';\n  }\n  // previous pages\n  for (var j = page - 4; j < page; j += 1) {\n    if (j < 1) continue;\n\n    if (j === page - 4 && j >= 2) {\n      numbersPager += '<li class=\"text -pagination onClickPagination\" data-value=\"1\">1</li>';\n      numbersPager += '<li class=\"text -pagination onClickPagination\" data-value=\"' + j + '\">\\u2026</li>';\n      continue;\n    }\n\n    if (j <= totalPages) {\n      if (j < page) {\n        numbersPager += '<li class=\"text -pagination onClickPagination\" data-value=\"' + j + '\">' + j + '</li>';\n      }\n    }\n  }\n  // next pages\n  for (var _j = page; _j < page + 5; _j += 1) {\n    if (_j <= totalPages) {\n      if (_j === page) {\n        numbersPager += '<li class=\"-selected text -pagination onClickPagination\" data-value=\"' + _j + '\">' + _j + '</li>';\n        continue;\n      }\n\n      if (_j < page + 4) {\n        numbersPager += '<li class=\"text -pagination onClickPagination\" data-value=\"' + _j + '\">' + _j + '</li>';\n      }\n\n      if (_j === page + 4) {\n        numbersPager += '<li class=\"text -pagination onClickPagination\" data-value=\"' + _j + '\">\\u2026</li>';\n        numbersPager += '<li class=\"text -pagination onClickPagination\" data-value=\"' + totalPages + '\">' + totalPages + '</li>';\n      }\n    }\n  }\n  if (page < totalPages) {\n    numbersPager += '<li class=\"next text -pagination onClickPagination\" data-value=\"' + (page + 1) + '\">next</li>';\n  }\n  return numbersPager;\n}\n\nfunction initPagination(page, totalPages, containerId) {\n  const container = $(`#${containerId} .c-pagination`);\n  if (totalPages > 1) {\n    const paginationHtml = buildPagination(page, totalPages);\n    container.html(paginationHtml);\n  } else {\n    container.html('');\n  }\n}\n","function showNoResults(container, text, size, color, iconSize) {\n  const html = `\n    <div class=\"c-no-results -${size} column small-12\">\n      <svg class=\"icon -${iconSize}\"><use xlink:href=\"#icon-compass\"></use></svg>\n      <p class=\"text -${color}\">${text}</p>\n    </div>\n  `;\n  $(container).html(html);\n}\n\nfunction hideNoResults(container) {\n  $(`${container} .c-no-results`).remove();\n}\n","function setSearchPlaceholder(container, label) {\n  container.attr('placeholder', `Search ${label.toLowerCase()}...`);\n}\n\nfunction setSearchListeners() {\n  $('.c-search-bar input').keyup(function() {\n    const activeTab = $('#themesTiles .c-tabs .-selected').data('node');\n\n    // listen for type ahead\n    let valueInput = $(this).val();\n    valueInput = valueInput.toLowerCase();\n    $('.c-tile').each(function () {\n      if (activeTab) {\n        if ( $('.tile', this).html().toLowerCase().indexOf(valueInput) !== -1 && $(this).data('group') === activeTab ) {\n          $(this).css('display', 'block');\n        } else {\n          $(this).css('display', 'none');\n        }\n      } else {\n        if ($('.tile', this).html().toLowerCase().indexOf(valueInput) !== -1) {\n          $(this).css('display', 'block');\n        } else {\n          $(this).css('display', 'none');\n        }\n      }\n    });\n    // check for zero results\n    const results = $('.c-tile').filter(function () {\n      return $(this).css('display') === 'block';\n    }).length;\n\n    // show empty results\n    if (results === 0) {\n      showNoResults('#noResultsContainer', 'No resources available', 'tall', 'grey', 'xxlarge');\n    } else {\n      hideNoResults('#noResultsContainer');\n    }\n  });\n}\n","function appendSelectOptions(selector, options) {\n  options.forEach(function(option) {\n    const html = `\n      <option value=\"${option}\" data-id=${options.id}>${option}</option>\n    `;\n    $(selector).append(html);\n  });\n}\n\nfunction appendSelectOptionsFromData(selector, options) {\n  options.forEach(function(option) {\n    const html = `\n      <option value=\"${option.id}\">${option.label}</option>\n    `;\n    $(selector).append(html);\n  });\n}\n\nfunction getSelectOptionsFromData(data, optionName, type) {\n  let options = [];\n  if (optionName.length > 1) {\n    data.forEach(function(item) {\n      if (type.indexOf(item.type) > -1) {\n        const optionStart = item[optionName[0]];\n        const optionEnd = item[optionName[1]];\n        const option = `${optionStart}-${optionEnd}`;\n        if ( options.indexOf(option) === -1 ) {\n          options.push(option);\n        }\n      }\n    });\n  } else {\n    data.forEach(function(item) {\n      if (type.indexOf(item.type) > -1) {\n        const option = item[optionName];\n        if ( options.indexOf(option) === -1 ) {\n          options.push(option);\n        }\n      }\n    });\n  }\n  options.sort();\n\n  return options;\n}\n\nfunction buildSelector(selector, options) {\n  //build selector\n  appendSelectOptions(selector, options);\n}\n","function setTabListeners(callback) {\n  $('.tab').click((e) => {\n    if (!$(e.target).hasClass('-selected')) {\n      const id = e.target.dataset.node;\n      const label = e.target.innerHTML;\n      $('.tab').removeClass('-selected');\n      $(e.target).addClass('-selected');\n      callback(id, label);\n    }\n  });\n}\n\nfunction initTabs() {\n  $('.tab').first().addClass('-selected');\n}\n\nfunction buildTabs(data, tabsContainer, callback) {\n  data.forEach((item) => {\n    const html = `\n      <li class=\"tab text -tab\" data-node=\"${item.id}\">${item.label}</li>\n    `;\n    tabsContainer.append(html);\n  });\n  initTabs();\n  setTabListeners(callback);\n}\n","// append tiles to div\nfunction appendTilesWithoutBackground(data, container, gridNum, customClass) {\n  const gridWidth = 12 / gridNum;\n  if (data.length !== 0) {\n    data.forEach((item) => {\n      const html = `\n        <div class=\"column small-12 medium-${gridWidth} c-tile ${customClass ? customClass : ''}\" data-group=\"${item.group ? item.group : ''}\">\n          <a href=\"/${item.alias}\" class=\"tile\">\n            <span class=\"text -tile -white\">\n              ${item.label}\n            </span>\n          </a>\n        </div>\n      `;\n      container.append(html);\n    });\n  }\n}\n\nfunction appendTiles(data, container, gridNum, customClass) {\n  const gridWidth = 12 / gridNum;\n  if (data.length !== 0) {\n    data.forEach((item) => {\n      const html = `\n        <div class=\"column small-12 medium-${gridWidth} c-tile ${customClass ? customClass : ''}\" data-group=\"${item.group ? item.group : ''}\">\n          <a href=\"/${item.alias}\" class=\"tile\" style=\"background-image: url('${item.image ? item.image : ''}')\">\n            <div class=\"${item.image ? 'overlay' : ''}\"></div>\n            <span class=\"text -tile -white\">\n              ${item.label}\n            </span>\n          </a>\n        </div>\n      `;\n      container.append(html);\n    });\n  }\n}\n\nfunction appendTilesStandards(data, container, gridNum, customClass) {\n  const gridWidth = 12 / gridNum;\n  if (data.length !== 0) {\n    data.forEach((item) => {\n      const html = `\n        <div class=\"column small-12 medium-4 large-${gridWidth} c-tile ${customClass ? customClass : ''}\" data-group=\"${item.group ? item.group : ''}\">\n          <a href=\"\" class=\"tile\" style=\"background-image: url('${item.image ? item.image : ''}')\">\n            <div class=\"${item.image ? 'overlay' : ''}\"></div>\n            <span class=\"text -tile -white\">\n              ${item}\n            </span>\n          </a>\n        </div>\n      `;\n      container.append(html);\n    });\n  }\n}\n\nfunction appendSmallTiles(data, topContainer, gridNum, customClass) {\n  const container = $(`${topContainer} .data-tiles`);\n  const gridWidth = 12 / gridNum;\n  if (data.length > 0) {\n    data.forEach((item) => {\n      const html = `\n        <div class=\"column small-12 large-${gridWidth} c-tile ${customClass ? customClass : ''}\" data-group=\"${item.group ? item.group : ''}\">\n          <a href=\"/${item.alias}\" class=\"tile\" style=\"background-image: url('${item.image ? item.image : ''}')\">\n            <div class=\"${item.image ? 'overlay' : ''}\"></div>\n            <span class=\"text -tile -white\">\n              ${item.label}\n            </span>\n          </a>\n        </div>\n      `;\n      container.append(html);\n    });\n  }\n}\n\n// append tiles to div\nfunction appendTilesDetailed(data, container, gridNum) {\n  const monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\n      \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\n    ];\n  const gridWidth = 12 / gridNum;\n  let html = '';\n  data.forEach((item) => {\n    // get variables\n    const creationDate = new Date(item.created * 1e3);\n    let topicsHtml = '';\n\n    // build topics\n    if (item.topic[0]) {\n      item.topic.forEach(function(topic ,index) {\n        if ( index === item.topic.length - 1 ) {\n          topicsHtml += `<a href=\"${topic.alias}\">${topic.label}</a>`;\n        } else {\n          topicsHtml += `<a href=\"${topic.alias}\">${topic.label}, </a>`;\n        }\n      });\n    }\n\n    html +=`\n      <div class=\"column small-12 medium-${gridWidth} c-tile\">\n        <div class=\"tile-detailed\" style=\"background-image: url('${item.image ? item.image : ''}')\">\n          <div class=\"${item.image ? 'overlay' : ''}\"></div>\n          <div class=\"tile-content\">\n            <div class=\"topics text -dynamic-link ${item.image ? '-white' : ''}\">${topicsHtml}</div>\n            <a href=\"${item.alias}\"><h3 class=\"text -tile-detail ${item.image ? '-white' : ''}\">${item.title ? item.title : ''}</h3></a>\n            <div class=\"meta\">\n              <span class=\"text -meta-large ${item.image ? '-white' : ''}\">${creationDate.getDay()} ${monthNames[creationDate.getMonth()]} ${creationDate.getFullYear()}</span>\n              <span class=\"text -meta-large ${item.image ? '-white' : ''}\">${item.author.length ? item.author[0].label : ''}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n  });\n  container.html(html);\n}\n\nfunction appendCountriesInfoBars(item, topContainer) {\n  const container = $(`${topContainer} .data-tiles`);\n  let html = '';\n  html = `\n    <div class=\"column small-12\">\n      <div class=\"c-country-info-bar\">\n        <strong>Action Plan ${item.year_action_plan} Potential Impact</strong>\n        <div class=\"${item.year_action_plan === null ? 'contain-legend-bars -hiden' : 'contain-legend-bars -show'}\">\n          <span class=\"box box-none\"><div class=\"box-color\"></div>None</span>\n          <span class=\"box box-minor\"><div class=\"box-color\"></div>Minor</span>\n          <span class=\"box box-moderate\"><div class=\"box-color\"></div>Moderate</span>\n          <span class=\"box box-transformative\"><div class=\"box-color\"></div>Transformative</span>\n        </div>\n        <div class=\"${item.year_action_plan === null ? 'contain-bars-potential -hiden' : 'contain-bars-potential -show'}\">\n          <div class=\"bar ${item.none_impact? 'none-bar' : '-hiden'}\" style=\"flex-basis:${item.none_impact}%\"><span>${item.none_impact}%</span></div>\n          <div class=\"bar ${item.minor_impact ? 'minor-bar' : '-hiden'}\" style=\"flex-basis:${item.minor_impact}%\"><span>${item.minor_impact}%</span></div>\n          <div class=\"bar ${item.moderate_impact ? 'moderate-bar' : '-hiden'}\" style=\"flex-basis:${item.moderate_impact}%\"><span>${item.moderate_impact}%</span></div>\n          <div class=\"bar ${item.transformative_impact ? 'transformative-bar' : '-hiden'}\" style=\"flex-basis:${item.transformative_impact}%\"><span>${item.transformative_impact}%</span></div>\n        </div>\n        <div class=\"message-error ${item.year_action_plan === null ? '-show' : '-hiden'}\">\n          <span>Sorry, nothing to see</span>\n        </div>\n        <a href=\"http://www.opengovpartnership.org/explorer/all-data.html\" target=\"_blank\" class=\"text -blue\">For data definitions and more data, see the OGP Explorer</a>\n      </div>\n    </div>\n  `;\n  container.html(html);\n}\n\nfunction appendCountriesRelevance(item, topContainer) {\n  const container = $(`${topContainer} .data-tiles`);\n  let html;\n  html = `\n    <div class=\"column small-12\">\n      <div class=\"c-country-relevance-bar\">\n        <div class=\"relevance-bar\">\n          <h4>Access to Information ${item.access_information ? '(' + item.access_information + '% )' : ''}</h4>\n          <div class=\"${item.access_information ? 'bar-border' : 'bar-border -hiden'}\">\n            <div class=\"${item.access_information ? 'bar' : 'bar -hiden'}\" style=\"${item.access_information ? 'width:' + item.access_information + '%' : ''}\" >\n              <span class=\"${item.access_information ? 'bar-error -hiden' : 'bar-error'}\">Sorry, nothing to see.</span>\n            </div>\n          </div>\n          <h4>Civic Participation ${item.civic_participation ? '(' + item.civic_participation + '% )' : ''}</h4>\n          <div class=\"${item.civic_participation ? 'bar-border' : 'bar-border -hiden'}\">\n            <div class=\"${item.civic_participation ? 'bar' : 'bar -hiden'}\" style=\"${item.civic_participation ? 'width:' + item.civic_participation + '%' : ''}\" >\n              <span class=\"${item.civic_participation ? 'bar-error -hiden' : 'bar-error'}\">Sorry, nothing to see.</span>\n            </div>\n          </div>\n          <h4>Public Accountability ${item.public_accountability ? '(' + item.public_accountability + '% )' : ''}</h4>\n          <div class=\"${item.public_accountability ? 'bar-border' : 'bar-border -hiden'}\">\n            <div class=\"${item.public_accountability ? 'bar' : 'bar -hiden'}\" style=\"${item.public_accountability ? 'width:' + item.public_accountability + '%' : ''}\" >\n              <span class=\"${item.public_accountability ? 'bar-error -hiden' : 'bar-error'}\">Sorry, nothing to see.</span>\n            </div>\n          </div>\n          <h4>Unclear ${item.unclear ? '(' + item.unclear + '% )' : ''}</h4>\n          <div class=\"${item.unclear ? 'bar-border' : 'bar-border -hiden'}\">\n            <div class=\"${item.unclear ? 'bar' : 'bar -hiden'}\" style=\"${item.unclear ? 'width:' + item.unclear + '%' : ''}\" >\n              <span class=\"${item.unclear ? 'bar-error -hiden' : 'bar-error'}\">Sorry, nothing to see.</span>\n            </div>\n          </div>\n        </div>\n        <a href=\"http://www.opengovpartnership.org/explorer/all-data.html\" target=\"_blank\" class=\"text -blue\">For data definitions and more data, see the OGP Explorer</a>\n      </div>\n    </div>\n  `;\n  container.html(html);\n}\n\nfunction appendCountriesThematicBars(item, topContainer) {\n  const container = $(`${topContainer} .data-tiles`);\n  const html = `\n    <div class=\"column small-12\">\n      <div class=\"c-country-thematic-bar\">\n        <div class=\"thematic-bar\">\n        <div class=\"thematic-bar\">\n          <h4>${item.current_themes[0]} ${item.current_percentage.length > 0 ? '(' + item.current_percentage[0] + '%)' : ''}</h4>\n          <div class=\"${item.current_percentage[0] ? 'bar-border' : 'bar-border -hiden'}\">\n            <div class=\"${item.current_percentage[0] ? 'bar -green' : 'bar -hiden'}\" style=\"${item.current_percentage[0] ? 'width:' + item.current_percentage[0] + '%' : ''}\" >\n              <span class=\"${item.current_percentage[0] ? 'bar-error -hiden' : 'bar-error'}\">Sorry, nothing to see.</span>\n            </div>\n          </div>\n          <h4>${item.current_themes[1]} ${item.current_percentage[1] ? '(' + item.current_percentage[1] + '%)' : ''}</h4>\n          <div class=\"${item.current_percentage[1] ? 'bar-border' : 'bar-border -hiden'}\">\n            <div class=\"${item.current_percentage[1] ? 'bar -green' : 'bar -hiden'}\" style=\"${item.current_percentage[1] ? 'width:' + item.current_percentage[1] + '%' : ''}\" >\n              <span class=\"${item.current_percentage[1] ? 'bar-error -hiden' : 'bar-error'}\">Sorry, nothing to see.</span>\n            </div>\n          </div>\n          <h4>${item.current_themes[2]} ${item.current_percentage[2] ? '(' + item.current_percentage[2] + '%)' : ''}</h4>\n          <div class=\"${item.current_percentage[2] ? 'bar-border' : 'bar-border -hiden'}\">\n            <div class=\"${item.current_percentage[2] ? 'bar -green' : 'bar -hiden'}\" style=\"${item.current_percentage[2] ? 'width:' + item.current_percentage[2] + '%' : ''}\" >\n              <span class=\"${item.current_percentage[2] ? 'bar-error -hiden' : 'bar-error'}\">Sorry, nothing to see.</span>\n            </div>\n          </div>\n        </div>\n        </div>\n        <a href=\"http://www.opengovpartnership.org/explorer/all-data.html\" target=\"_blank\" class=\"text -blue\">For data definitions and more data, see the OGP Explorer</a>\n      </div>\n    </div>\n  `;\n  container.html(html);\n}\n","function convertPostDate(date, format) {\n  var dateString = new Date(date * 1e3);\n  var dd = dateString.getDate();\n  var mm = dateString.getMonth() + 1; //January is 0!\n  var yyyy = dateString.getFullYear();\n\n  if (format === 'dd/mm/yyyy') {\n    if ( dd < 10 ) {\n      dd = `0${dd}`;\n    }\n\n    if ( mm < 10 ) {\n      mm = `0${mm}`;\n    }\n  }\n\n  dateString = `${dd}/${mm}/${yyyy}`;\n\n  return dateString;\n}\n\nfunction convertEventDate(date) {\n  var myDate = moment(date, 'YYYY-M-DD HH:mm:ss');\n  return myDate.format('MMMM D, YYYY - hh:mm');\n}\n\nfunction dateDiff(date) {\n  return moment().diff(date, 'days');\n}\n","function smoothScroll() {\n  $('a[href*=\"#\"]:not([href=\"#\"])').click(function() {\n    if (location.pathname.replace(/^\\//,'') == this.pathname.replace(/^\\//,'') && location.hostname == this.hostname) {\n      var target = $(this.hash);\n      target = target.length ? target : $('[name=' + this.hash.slice(1) +']');\n      if (target.length) {\n        $('html, body').animate({\n          scrollTop: target.offset().top\n        }, 500);\n        return false;\n      }\n    }\n  });\n}\n","function getAuthors(data) {\n  let authorString = ''\n  data.forEach(function(author, index) {\n    if (index === data.length - 1) {\n      authorString += `${author.label}`;\n    } else {\n      authorString += `${author.label}, `;\n    }\n  });\n  return authorString;\n}\n","function addDots(string, limit) {\n  const dots = '...';\n  if (string.length > limit) {\n    string = string.substring(0, limit) + dots;\n  }\n\n  return string;\n}\n","function showCurrentCommitmentDetail(id) {\n  (function ($) {\n\n    function buildCurrentCommitment() {\n      $.getJSON(`/apiJSON/current_commitment/${id}`, function (data) {\n        if(data.data[0].lead_institution[0]) {\n          $('#currentCommitmentContent .lead').html(data.data[0].lead_institution[0]);\n        }\n        if(data.data[0].support_institution[0]) {\n          $('#currentCommitmentContent .support').html(data.data[0].support_institution[0]);\n        }\n      });\n    }\n\n    $('#theme-menu').addClass('active');\n    buildCurrentCommitment();\n    buildExploreMoreTiles('current_commitment');\n\n  })(jQuery);\n}\n","function showIrmCommitmentDetail(id) {\n  (function ($) {\n    $('#theme-menu').addClass('active');\n    buildExploreMoreTiles('irm_commitments');\n  })(jQuery);\n}\n","function showModelCommitmentDetail(id) {\n  (function ($) {\n\n    const onChangeTab = (id, label) => {\n      $('.tab-container').addClass('-hidden')\n      $(`#${id} .tab-container`).removeClass('-hidden');\n    }\n\n    function fetchModelCommitmentDetail() {\n      $.getJSON(`/apiJSON/modelcommitments/${id}`, function (data) {\n        $('.strength-info').html(`<strong>Strength: </strong>${data.data[0].strength.label}`);\n        $('.contributor-info').html(`<strong>Contributors: </strong>${data.data[0].contributors}`);\n        $('#justification .container').html(data.data[0].justification);\n        appendTilesStandards(data.data[0].standardsguidance, $('#standards .container'), 2);\n        removeLoader('.l-section', null, true);\n      });\n    }\n\n    // init view\n    initTabs();\n    setTabListeners(onChangeTab);\n    fetchModelCommitmentDetail();\n    buildExploreMoreTiles('modelcommitments');\n\n  })(jQuery);\n}\n","function showStarredCommitmentDetail(id) {\n  (function ($) {\n    $('#theme-menu').addClass('active');\n    buildExploreMoreTiles('starredcommitments');\n  })(jQuery);\n}\n","function showCountriesDetail(id) {\n  (function($) {\n\n    //cache\n    const years = ['2014', '2015', '2016'];\n    const docTypes = {\n      actionPlans: ['2703'],\n      letters: ['2779'],\n      reports: ['2704', '2768', '2705']\n    }\n    const pageThreshold = 10;\n\n    // selectors and containers\n    const actionPlansContainer = '#actionPlansLinks';\n    const reportsContainer = '#reportsLinks';\n    const lettersContainer = '#lettersLinks';\n    const eventsContainer = '#eventsBanner';\n    const themesContainer = '.themes-container';\n    const completionContainer = '.completion-container';\n\n    // initial settings\n    let page = 1;\n    let currentPageCount = 0;\n    let irmPageCount = 0;\n\n    //data cache\n    let lettersData;\n    let actionPlansData;\n    let reportsData;\n\n\n    // init selectors\n    $('select').select2({\n      minimumResultsForSearch: Infinity,\n      containerCssClass: '-hidden'\n    });\n\n    // local functions\n    function _setDataCount(selector, count) {\n      $(selector).html(`${count}`);\n    }\n\n    function _appendLoadingBar(view, data) {\n      const container = $(view);\n      data.forEach(function(data) {\n        if (data.value) {\n          const html = `\n          <div class=\"c-loading-bar\">\n          <div class=\"text -small-bold -white\">${data.value}% ${data.theme}</div>\n          <div class=\"bar -white\" style=\"width: ${data.value}%;\"></div>\n          </div>\n          `;\n          container.append(html);\n        }\n      });\n    }\n\n    function _appendStories(view, stories) {\n      const container = $(view);\n      stories.forEach(function(story) {\n        const html = `\n          <li class=\"story-item\">\n            <div class=\"badge\">\n              <svg class=\"icon -white\"><use xlink:href=\"#icon-external-link\"></use></svg>\n            </div>\n            <div class=\"notification\">\n              A new OGP <b>Story</b> has been posted: <b><a href=\"/${story.alias}\">${story.label}</a></b>\n            </div>\n          </li>\n        `;\n        container.append(html);\n      });\n    }\n\n    function _appendLinks(view, data, selector, type) {\n      const activeFilter = $(selector).val();\n      const container = $(`${view} .links-container`);\n      let html = '';\n      data.forEach(function(link) {\n        if (type.indexOf(link.type) > -1) {\n          if (link.publication_date === activeFilter || (activeFilter.indexOf(link.cycle_start) > -1 && activeFilter.indexOf(link.cycle_end) > -1) ) {\n            html += buildRelLink(link);\n          }\n        }\n      });\n      if (html === '') {\n        showNoResults(container, 'No documents available', 'short', 'grey', 'xlarge');\n      } else {\n        container.html(html);\n      }\n    }\n\n    function _appendEvents(event) {\n      if (event.image) {\n        $(`${eventsContainer} .banner-image`).css('background-image', `url(${event.image})`);\n      }\n      $(`${eventsContainer} .banner-title`).html(event.label);\n\n      let eventMeta = '';\n      eventMeta += convertEventDate(event.date.value);\n      if (event.date.value2) {\n        const endDate = convertEventDate(event.date.value2);\n        eventMeta += ` to ${endDate}.`;\n      }\n      eventMeta += ` | ${event.location.locality}, ${event.location.country}`;\n      $(`${eventsContainer} .banner-date`).html(eventMeta);\n      $(`${eventsContainer} .c-button`).attr('href', `/${event.alias}`);\n    }\n\n    function setPaginationListerners(container, endPoint, pageCount) {\n      $(`#${container} .onClickPagination`).on('click', function(e) {\n        const pageNum = $(this).data('value');\n        showLoader(`#${container}`);\n        $.getJSON(`/apiJSON/${endPoint}?filter[country]=${id}&page[number]=${pageNum}&page[size]=${pageThreshold}&sort=label`, (data) => {\n          initAccordion(container, data.data);\n          initPagination(pageNum, pageCount, container);\n          setPaginationListerners(container, endPoint, pageCount);\n          removeLoader(`#${container}`, null, true);\n        });\n      })\n    }\n\n    function setSelectorListener(view, selector, data, type) {\n      _appendLinks(view, data, selector, type);\n      $(selector).on('change', function() {\n        _appendLinks(view, data, selector, type);\n      });\n    }\n\n    function initLinksSelectorContainer(dataCache, container, filter, type) {\n      if (dataCache.length) {\n        const optionValues = getSelectOptionsFromData(dataCache, filter, type);\n        if (optionValues.length) {\n          $(`${container} select`).removeClass('-hidden');\n          buildSelector(`${container} select`, optionValues);\n          setSelectorListener(`${container}`, `${container} select`, dataCache, type);\n          $(`${container} .select2-selection`).removeClass('-hidden');\n        } else {\n          _appendLinks(`${container}`, dataCache, `${container} select`, type);\n        }\n      }\n    }\n\n    function bodyContentListener() {\n      $('.js-view-more').on('click', function() {\n        $('.body-view-more').toggleClass('-show');\n        $(this).toggleClass('-open');\n        if ($(this).hasClass('-open')) {\n          $('span', this).html('VIEW LESS');\n        } else {\n          $('span', this).html('VIEW MORE');\n        }\n      });\n    }\n\n\n    /////////////\n    // FETCH DATA\n    /////////////\n\n    // get country data\n    $.getJSON(`/apiJSON/countries?filter[id]=${id}`, function (data) {\n      if (data.data) {\n        const country = data.data[0];\n        // set banner counts\n        _setDataCount('.c-commitment-count .content-count', country.current_commitments_count);\n        _setDataCount('.irm-count', country.irm_commitments_count);\n        _setDataCount('.starred-count', country.starred_commitments_count);\n        _setDataCount('#currentCommitmentsAccordion .content-count', country.current_commitments_count);\n        _setDataCount('#irmReviewedCommitmentsAccordion .content-count', country.irm_commitments_count);\n        // loading bar data\n        if (country.current_themes) {\n          let themesData = [];\n          for (let i = 0; i < country.current_themes.length; i++) {\n            themesData.push({theme: country.current_themes[i], value: country.current_percentage[i]})\n          }\n          _appendLoadingBar(themesContainer, themesData);\n        }\n        if (country.midterm_percentage || country.endofterm_percentage) {\n          const completionData = [\n            {theme: 'Mid term percentage', value: country.midterm_percentage},\n            {theme: 'End of term percentage', value: country.endofterm_percentage}\n          ];\n          _appendLoadingBar(completionContainer, completionData);\n        } else {\n          showNoResults(`.completion-container`, 'Not yet reviewed', 'short', 'white', 'xlarge');\n        }\n      }\n      removeLoader('#countryHeaderBanner', null, true);\n    });\n\n\n    // fetch current commitments\n    $.getJSON(`/apiJSON/current_commitment?filter[country]=${id}&sort=label&page[size]=${pageThreshold}&page[number]=1`, (data) => {\n      if (data.data.length) {\n        initAccordion('currentCommitmentsAccordion', data.data);\n        if (data.count > pageThreshold) {\n          currentPageCount = getPageCount(data.count, pageThreshold);\n          initPagination(page, currentPageCount, 'currentCommitmentsAccordion');\n          setPaginationListerners('currentCommitmentsAccordion', 'current_commitment', currentPageCount);\n        }\n      } else {\n        showNoResults(`#currentCommitmentsAccordion .c-accordion`, 'No current commitments', 'medium', 'grey', 'xxlarge');\n      }\n      removeLoader('#currentCommitmentsAccordion', null, true);\n    });\n\n\n    // fetch review commitments\n    $.getJSON(`/apiJSON/irm_commitments?filter[country]=${id}&page[size]=${pageThreshold}&sort=label&page[number]=1`, (data) => {\n      if (data.data.length) {\n        initAccordion('irmReviewedCommitmentsAccordion', data.data);\n        if (data.count > pageThreshold) {\n          irmPageCount = getPageCount(data.count, pageThreshold);\n          initPagination(page, irmPageCount, 'irmReviewedCommitmentsAccordion');\n          setPaginationListerners('irmReviewedCommitmentsAccordion', 'irm_commitments', irmPageCount);\n        }\n      } else {\n        showNoResults(`#irmReviewedCommitmentsAccordion .c-accordion`, 'No reviewed commitments', 'medium', 'grey', 'xxlarge');\n      }\n      removeLoader('#irmReviewedCommitmentsAccordion', null, true);\n    });\n\n    // fetch stories\n    $.getJSON(`/apiJSON/stories?filter[country]=${id}&page[size]=9`, (data) => {\n      if (data.data.length) {\n        _appendStories('.c-activity-stream ul', data.data);\n        $('.item-bridge').removeClass('-hidden');\n      } else {\n        showNoResults('.c-activity-stream ul', 'No recent activity', 'medium', 'white', 'xlarge');\n      }\n      removeLoader('.c-activity-stream');\n    });\n\n    // fetch events\n    $.getJSON(`/apiJSON/events?filter[country]=${id}`, (data) => {\n      if (data.data.length) {\n        if (dateDiff(data.data[0].date.value) <= 0) {\n          _appendEvents(data.data[0]);\n          $(eventsContainer).removeClass('-hidden');\n        }\n      }\n    });\n\n    $.getJSON(`/apiJSON/resource?filter[country]=${id}`, (data) => {\n      const dataCache = data.data;\n      initLinksSelectorContainer(dataCache, actionPlansContainer, ['cycle_start', 'cycle_end'], docTypes.actionPlans);\n      initLinksSelectorContainer(dataCache, reportsContainer, ['cycle_start', 'cycle_end'], docTypes.reports);\n      initLinksSelectorContainer(dataCache, lettersContainer, ['publication_date'], docTypes.letters);\n      removeLoader('#resourceDocsContainer', null, true);\n    });\n\n    // init selectors and views for actions, reports and letters data\n    bodyContentListener();\n\n  })(jQuery);\n}\n","function initCountriesMap() {\n  const map = L.map('countriesMap', {\n    zoomControl: false,\n    center: [35, -60],\n    zoom: 2,\n    maxZoom: 6,\n    minZoom: 2,\n    scrollWheelZoom: false\n  });\n  const basemap = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png', {\n    attribution: ''\n  }).addTo(map);\n  $('#in').click(function () {\n    map.setZoom(map.getZoom() + 1);\n  });\n\n  $('#out').click(function () {\n    map.setZoom(map.getZoom() - 1);\n  });\n  return map;\n}\n\nfunction initMapLayer(map, countriesData, layers, cartoQueryLink) {\n  let over = false;\n\n  cartodb.createLayer(map, {\n    user_name: 'jmonaco',\n    type: 'cartodb',\n    sublayers: []\n  })\n  .addTo(map)\n  .done(function (layer) {\n    layer.setInteraction(true);\n    layer.createSubLayer(layers['action']);\n    const hovers = [];\n\n    layer.bind('featureOver', function(e, latlon, pxPos, data, layers) {\n      hovers[layers] = 1;\n      if (_.any(hovers)) {\n        $('#countriesMap').css('cursor', 'pointer');\n      }\n    });\n\n    layer.bind('featureOut', function(m, layers) {\n      hovers[layers] = 0;\n      if (!_.any(hovers)) {\n        $('#countriesMap').css('cursor', 'auto');\n      }\n    });\n\n    layer.on('featureClick', function(e, latlng, pos, data) {\n      $('.tooltip').remove();\n      if (layer.layers[0].options.name !== 'participants') {\n        showLoader('.l-map');\n      }\n      switch (layer.layers[0].options.name) {\n        case 'action':\n          $.getJSON(`${cartoQueryLink} SELECT * FROM countries_homepage WHERE cartodb_id = ${data.cartodb_id}`, function (actionPlanData) {\n            updateMapModal(actionPlanData.rows[0].nid, 'actionPlan', countriesData);\n          });\n          break;\n        case 'starred':\n          $.getJSON(`${cartoQueryLink} SELECT * FROM starred_commitments WHERE cartodb_id = ${data.cartodb_id}`, function (starredData) {\n            updateMapModal(starredData.rows[0].countryid, 'starred', countriesData);\n          });\n          break;\n        case 'people':\n          $.getJSON(`${cartoQueryLink} SELECT * FROM people_involved WHERE cartodb_id = ${data.cartodb_id}`, function (peopleInvolvedData) {\n            updateMapModal(peopleInvolvedData.rows[0].countryid, 'people', countriesData);\n          });\n          break;\n        case 'stories':\n          $.getJSON(`${cartoQueryLink} SELECT * FROM stories WHERE cartodb_id = ${data.cartodb_id}`, function (storiesData) {\n            updateMapModal(storiesData.rows[0].countryid, 'stories', countriesData);\n          });\n          break;\n        case 'event':\n          $.getJSON(`${cartoQueryLink} SELECT * FROM events_country WHERE cartodb_id = ${data.cartodb_id} AND country IS NOT NULL`, function (eventData) {\n            updateMapModal(eventData.rows[0].countryid, 'event', countriesData);\n          });\n          break;\n        case 'commitment':\n          $.getJSON(`${cartoQueryLink} SELECT * FROM currentcommitments_countries WHERE cartodb_id = ${data.cartodb_id}`, function (commitmentsData) {\n            updateMapModal(commitmentsData.rows[0].countryid, 'commitment', countriesData);\n          });\n          break;\n        default:\n      }\n    });\n\n    layer.on('featureOver', function(e, latlng, pos, data) {\n\n      const country = data.country;\n      const titleEvent = data.title;\n\n      if (over === false) {\n        if (country) {\n          $('body').append(`<div class=\"tooltip\" style=\"padding: 5px; position: absolute; z-index: 10; background-color: rgba(255, 255, 255, 1); top:${e.pageY - 25}px; left:${e.pageX + 25}px\">${country}</div>`);\n        }\n\n        if (titleEvent) {\n          $('body').append(`<div class=\"tooltip\" style=\"padding: 5px; position: absolute; z-index: 10; background-color: rgba(255, 255, 255, 1); top:${e.pageY - 25}px; left:${e.pageX + 25}px\">${titleEvent}</div>`);\n        }\n        over = true;\n      } else {\n\n        if (country) {\n          $('.tooltip').html(country);\n        }\n\n        if (titleEvent) {\n          $('.tooltip').html(titleEvent);\n        }\n        $('.tooltip').css('top', `${e.pageY - 25}px`);\n        $('.tooltip').css('left', `${e.pageX + 25}px`);\n      }\n    });\n\n    layer.on('featureOut', function(e, latlng, pos, data) {\n      over = false;\n      $('.tooltip').remove();\n    });\n\n    initEventFunctions(layer, layers);\n    setMapLegendListeners(layer, layers);\n  });\n}\n\nfunction removeLayers(layer) {\n  layer.getSubLayers().forEach(function (sublayer) {\n    sublayer.remove();\n  });\n}\n\nfunction initEventFunctions(layer, layers) {\n  $('.change-past-event-layer').click(function() {\n    removeLayers(layer);\n    $(this).html('LOOKING FOR UPCOMING EVENTS?');\n    $('.legend-info-event').html('Past Events');\n    $(this).removeClass('change-past-event-layer');\n    $(this).addClass('change-upcoming-event-layer');\n    layer.setInteraction(true);\n    layer.createSubLayer(layers['pastevent']);\n    initEventFunctions();\n  });\n\n  $('.change-upcoming-event-layer').click(function() {\n    removeLayers(layer);\n    $(this).html('LOOKING FOR PAST EVENTS?');\n    $('.legend-info-event').html('Upcoming Events');\n    $(this).removeClass('change-upcoming-event-layer');\n    $(this).addClass('change-past-event-layer');\n    layer.setInteraction(true);\n    layer.createSubLayer(layers['upcomingevent']);\n    initEventFunctions();\n  });\n}\n\nfunction setMapLegendListeners(layer, layers) {\n  $('.select-legend').click(function () {\n    $('.tooltip').remove();\n    const container = $(this).attr('data-value');\n    const namelayer = $(this).attr('data-layer');\n    removeLayers(layer);\n    if ($(this).hasClass('-selected') === false) {\n      $('.select-legend').each(function () {\n        if ($(this).hasClass('-selected')) {\n          $(this).prop('disabled', false);\n          $(this).toggleClass('-selected');\n          $(`.${container}`).toggleClass('-open-legend');\n        }\n      });\n\n      $('.contain-info').each(function () {\n        if ($(this).hasClass('-open-legend')) {\n          $(this).toggleClass('-open-legend');\n        }\n      });\n      if ($('.scroll-contain-legend').hasClass('-scroll') === false) {\n        $('.scroll-contain-legend').toggleClass('-scroll');\n      }\n      $(`.${container}`).toggleClass('-open-legend');\n      $(this).toggleClass('-selected');\n      $(this).prop('disabled', true);\n      layer.setInteraction(true);\n      layer.createSubLayer(layers[namelayer]);\n    }\n  });\n\n  $('.select-legend-dropdown').change(function () {\n    const theme = $(this).val();\n    removeLayers(layer);\n    layer.setInteraction(true);\n    layer.createSubLayer({\n      sql: 'SELECT country, Min(cartodb_id) cartodb_id, Min(theme) theme, count(country), st_centroid(the_geom_webmercator) the_geom_webmercator FROM currentcommitments_countries WHERE country IS NOT NULL AND theme LIKE \\'%' + theme + '%\\' AND the_geom_webmercator IS NOT NULL AND LENGTH(country) > 0 GROUP BY the_geom_webmercator, country ORDER BY country',\n      cartocss: '#layer::z1 {marker-width: ramp([count], range(25, 45), quantiles(7));marker-fill: #ffa200;marker-fill-opacity: 1;marker-line-width: 1;marker-line-color: #4b392f;marker-line-opacity: 0.1;marker-allow-overlap:true;marker-comp-op: src;[zoom = 2] {marker-width: ramp([count], range(25, 30), quantiles(3));}[zoom = 3] {marker-width: ramp([count], range(30, 35), quantiles(4));}[zoom = 4] {marker-width: ramp([count], range(30, 40), quantiles(5));}[zoom = 5] {marker-width: ramp([count], range(30, 45), quantiles(6));} [zoom = 6] {marker-width: ramp([count], range(35, 45), quantiles(7));}} #layer::z1 {text-name: [count];text-face-name: \"DejaVu Sans Book\";text-size: 10;text-fill: #FFFFFF;text-label-position-tolerance: 0;text-halo-radius: 0;text-halo-fill: #6F808D;text-dy: 0;text-allow-overlap: true;}',\n      interactivity: 'cartodb_id, the_geom_webmercator, country',\n      name: 'commitment'\n    });\n  });\n}\n","function showCountriesPage() {\n  (function ($) {\n\n    // consts for map\n    const cartoQueryLink = 'https://jmonaco.carto.com/api/v2/sql?q=';\n    const layers = {\n      action: {\n        sql: 'SELECT * FROM countries_homepage',\n        cartocss: '#layer {polygon-fill: ramp([actionplan],(#66bc29, #2d4f00, #cc3300), (\"Developing action plan\",\"Implementing action plan\", \"Inactive\"),category);line-width: 1;line-color: #FFF;line-opacity: 0.5;}',\n        interactivity: 'the_geom, nid, country, cartodb_id',\n        name: 'action'\n      },\n      starred: {\n        sql: 'SELECT numberstarred,country, cartodb_id, st_centroid(the_geom_webmercator) the_geom_webmercator FROM starred_commitments WHERE the_geom_webmercator IS NOT NULL ORDER BY numberstarred',\n        cartocss: '#layer::z1 {marker-width: 30;marker-fill: #ffffff;marker-fill-opacity: 1;marker-line-width: 1;marker-line-color: #4b392f;marker-line-opacity: 0.2;marker-allow-overlap:true;marker-comp-op: src;[zoom = 2] {marker-width: 30;}[zoom = 3] {marker-width: 35;}[zoom = 4] {marker-width: 40;}[zoom = 5] {marker-width: 45;}[zoom = 6] {marker-width: 45;}} #layer::z1 {text-name: [numberstarred];text-face-name: \"DejaVu Sans Book\";text-size: 10;text-fill: #000000;text-label-position-tolerance: 0;text-halo-radius: 0;text-halo-fill: #6F808D;text-dy: 0;text-allow-overlap: true;}',\n        interactivity: 'numberstarred, country, cartodb_id, the_geom_webmercator',\n        name: 'starred'\n      },\n      people: {\n        sql: 'SELECT numberpeopleinvolved,country,countryid, cartodb_id, st_centroid(the_geom_webmercator) the_geom_webmercator FROM people_involved WHERE the_geom_webmercator IS NOT NULL',\n        cartocss: '#layer {marker-width: 50;marker-height: 45;marker-fill: #007acb;marker-fill-opacity: 1;marker-file:url(\"https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/marker-18.svg\");marker-allow-overlap: true;marker-line-width: 1;marker-line-color: #4b392f;marker-line-opacity: 1;marker-comp-op: src-over;[zoom = 2] {marker-width: 30;marker-height: 25;}[zoom = 3] {marker-width: 35;marker-height: 30;}[zoom = 4] {marker-width: 45;marker-height: 40;} [zoom = 5] {marker-width: 50;marker-height: 45;}[zoom = 6] {marker-width: 55;marker-height: 50;}}',\n        interactivity: 'numberpeopleinvolved,countryid, country, cartodb_id, the_geom_webmercator',\n        name: 'people'\n      },\n      stories: {\n        sql: 'SELECT numberstories,country, cartodb_id, st_centroid(the_geom_webmercator) the_geom_webmercator FROM stories WHERE the_geom_webmercator IS NOT NULL',\n        cartocss: '#layer::z1{marker-width: 50;marker-height: 45;marker-fill: #0099ff;marker-fill-opacity: 1;marker-file:url(\"https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/marker-18.svg\");marker-allow-overlap: true;marker-line-width: 1;marker-line-color: #4b392f;marker-line-opacity: 1;marker-comp-op: src-over;[zoom = 2] {marker-width: 50;marker-height: 45;}[zoom = 3] {marker-width: 55;marker-height: 50;}[zoom = 4] {marker-width: 60;marker-height: 55;}[zoom = 5] {marker-width: 65;marker-height: 60;}[zoom = 6] {marker-width: 70;marker-height: 65;}} #layer::z1{text-name: [numberstories];text-face-name: \"DejaVu Sans Book\";text-size: 10;text-fill: #FFFFFF;text-label-position-tolerance: 0;text-halo-radius: 0;text-halo-fill: #6F808D;text-dy: -0.9;text-allow-overlap: true;text-placement: point;text-placement-type: simple;text-comp-op: screen;}',\n        interactivity: 'numberstories, country, cartodb_id, the_geom_webmercator',\n        name: 'stories'\n      },\n      upcomingevent: {\n        sql: 'SELECT now(), country,countryid, count(country),Min(cartodb_id) cartodb_id, Min(date) date, Min(end_date) end_date, Min(start_date) start_date, Min(title) title, st_centroid(the_geom_webmercator) the_geom_webmercator FROM events_country WHERE title IS NOT NULL AND the_geom_webmercator IS NOT NULL AND end_date > now() GROUP BY  the_geom_webmercator, country, countryid ORDER BY country',\n        cartocss: '#layer::z1 {marker-width: 30;marker-fill: #66bc29;marker-fill-opacity: 1;marker-line-width: 0;marker-line-color: #151718;marker-line-opacity: 0.2;marker-allow-overlap:true;marker-comp-op: src;[zoom = 2] {marker-width: 30;}[zoom = 3] {marker-width: 35;}[zoom = 4] {marker-width: 40;}[zoom = 5] {marker-width: 45;}[zoom = 6] {marker-width: 45;}} #layer::z1 {text-name: [count];text-face-name: \"DejaVu Sans Book\";text-size: 10;text-fill: #FFFFFF;text-label-position-tolerance: 0;text-halo-radius: 0;text-halo-fill: #6F808D;text-dy: 0;text-allow-overlap: true;}',\n        interactivity: 'cartodb_id, the_geom_webmercator',\n        name: 'event'\n      },\n      pastevent: {\n        sql: 'SELECT now(), country,countryid, count(country),Min(cartodb_id) cartodb_id, Min(date) date, Min(end_date) end_date, Min(start_date) start_date, Min(title) title, st_centroid(the_geom_webmercator) the_geom_webmercator FROM events_country WHERE title IS NOT NULL AND the_geom_webmercator IS NOT NULL AND end_date < now() GROUP BY  the_geom_webmercator, country, countryid ORDER BY country',\n        cartocss: '#layer::z1 {marker-width: 30;marker-fill: #66bc29;marker-fill-opacity: 1;marker-line-width: 0;marker-line-color: #151718;marker-line-opacity: 0.2;marker-allow-overlap:true;marker-comp-op: src;[zoom = 2] {marker-width: 30;}[zoom = 3] {marker-width: 35;}[zoom = 4] {marker-width: 40;}[zoom = 5] {marker-width: 45;}[zoom = 6] {marker-width: 45;}} #layer::z1 {text-name: [count];text-face-name: \"DejaVu Sans Book\";text-size: 10;text-fill: #FFFFFF;text-label-position-tolerance: 0;text-halo-radius: 0;text-halo-fill: #6F808D;text-dy: 0;text-allow-overlap: true;}',\n        interactivity: 'cartodb_id, the_geom_webmercator, country',\n        name: 'event'\n      },\n      commitment: {\n        sql: 'SELECT country, Min(cartodb_id) cartodb_id, count(country), st_centroid(the_geom_webmercator) the_geom_webmercator FROM currentcommitments_countries WHERE country IS NOT NULL AND the_geom_webmercator IS NOT NULL AND LENGTH(country) > 0 GROUP BY the_geom_webmercator, country ORDER BY country DESC',\n        cartocss: '#layer::z1 {marker-width: 30;marker-fill: #ffa200;marker-fill-opacity: 1;marker-line-width: 1;marker-line-color: #4b392f;marker-line-opacity: 0.1;marker-allow-overlap:true;marker-comp-op: src;[zoom = 2] {marker-width: 30;}[zoom = 3] {marker-width: 35;}[zoom = 4] {marker-width: 40;}[zoom = 5] {marker-width:45;} [zoom = 6] {marker-width: 45;}} #layer::z1 {text-name: [count];text-face-name: \"DejaVu Sans Book\";text-size: 10;text-fill: #FFFFFF;text-label-position-tolerance: 0;text-halo-radius: 0;text-halo-fill: #6F808D;text-dy: 0;text-allow-overlap: true;}',\n        interactivity: 'cartodb_id, the_geom_webmercator, country',\n        name: 'commitment'\n      },\n      participants: {\n        sql: 'SELECT * FROM working_group WHERE show_on_map IS TRUE',\n        cartocss: '#layer {marker-width: 50;marker-height: 45;marker-fill: #FFB927;marker-fill-opacity: 1;marker-file: url(\"https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/marker-18.svg\");marker-allow-overlap: true;marker-line-width: 1;marker-line-color: #4b392f;marker-line-opacity: 1;marker-comp-op: src-over;[zoom = 2] {marker-width: 30;marker-height: 25;}[zoom = 3] {marker-width: 35;marker-height: 30;}[zoom = 4] {marker-width: 45;marker-height: 40;}[zoom = 5] {marker-width: 50;marker-height: 45;}[zoom = 6] {marker-width: 55;marker-height: 50;}}',\n        interactivity: 'cartodb_id, title',\n        name: 'participants'\n      }\n    };\n\n    //consts for tabs\n    const countriesContent = '#countriesContentContainer';\n    let page = 1;\n    let activeTab = 'starred';\n    const pageThreshold = 10;\n\n    // cache\n    let countriesMap;\n    let countriesData;\n    let themesData;\n\n    // custom callback for tabs component\n    const onChangeCountryTab = function(id, label) {\n      setPageCount(1);\n      $('.tab-content').addClass('-hidden');\n      $(`.${id}`).removeClass('-hidden');\n      showLoader('#countriesContentContainer');\n      showCountriesData(countriesData, id, countriesContent, $('#countriesSearch select').val());\n    };\n\n    function cacheData() {\n      $.getJSON(`/apiJSON/countries?sort=label`, function (countries) {\n        countriesData = countries.data;\n        initMapLayer(countriesMap, countriesData, layers, cartoQueryLink);\n        countriesMap.invalidateSize();\n        showCountriesData(countriesData, activeTab, countriesContent);\n        buildCountrySelector($('#countriesSearch select'), countriesContent, countriesData, activeTab);\n        onClickPagination(activeTab, countriesContent, countriesData);\n        initCountryTabs(onChangeCountryTab);\n        $.getJSON(`/apiJSON/themes?sort=name&fields=id,label`, function (themes) {\n          themesData = themes.data;\n          appendSelectOptionsFromData('.select-legend-dropdown', themesData);\n          removeLoader('.l-map', null, true);\n        });\n      });\n    }\n\n    function initViews() {\n      countriesMap = initCountriesMap();\n      $('.select-legend-dropdown').select2({\n        minimumResultsForSearch: Infinity,\n        placeholder: 'All themes',\n      });\n      $('#countriesSearch select').select2({\n        containerCssClass: '-tall',\n        placeholder: 'Search country...'\n      });\n    }\n\n    // let's begin\n    initViews();\n    cacheData();\n    buildMapModal();\n\n  })(jQuery);\n}\n","function buildCountrySelector(selector, container, countries, activeTab) {\n  selector.append('<option value=\"0\">All countries</option>');\n  selector.append('<svg class=\"icon -medium -blue\"><use xlink:href=\"#icon-search\"></use></svg>');\n  appendSelectOptionsFromData(selector, countries)\n  setCountrySelectorListeners(selector, container, countries, activeTab);\n}\n\nfunction setCountrySelectorListeners(selector, container, countriesData, activeTab) {\n  selector.on('change', function () {\n    setPageCount(1);\n    showLoader(container);\n    const filterValue = $(this).val();\n    showCountriesData(countriesData, activeTab, container, filterValue);\n  });\n}\n\nfunction setPageCount(val) {\n  $('.page-count').data('value', val);\n}\n\nfunction getCurrentPage() {\n  const pageCount = $('.page-count').data('value');\n  return pageCount;\n}\n\nfunction onClickPagination(activeTab, container, countriesData) {\n  $('.c-pagination-click').on('click', function() {\n    setPageCount(getCurrentPage() + 1);\n    showCountriesData(countriesData, activeTab, container);\n  });\n}\n\nfunction showOnClickPagination() {\n  $('.c-pagination-click').removeClass('-hidden');\n}\n\nfunction hideOnClickPagination() {\n  $('.c-pagination-click').addClass('-hidden');\n}\n\nfunction setCountryDataTiles(container, country) {\n  const activeTab = $('.tabs-container').find('.-selected').data('node');\n  $(`#country-${country.id} .data-tiles`).html('');\n  if (activeTab === 'starred') {\n    if (country.starred_commitments.length > 0) {\n      const trimCommitments = country.starred_commitments.slice(0, 2);\n      appendSmallTiles(trimCommitments, `#country-${country.id}`, 2, '-short -country');\n    } else {\n      showNoResults(`#country-${country.id} .data-tiles`, 'No starred commitments', 'medium', 'grey', 'xlarge');\n    }\n  } else if (activeTab === 'potential') {\n    if (country.year_action_plan !== null) {\n      appendCountriesInfoBars(country, `#country-${country.id}`);\n    } else {\n      showNoResults(`#country-${country.id} .data-tiles`, 'No data available', 'medium', 'grey', 'xlarge');\n    }\n  } else if (activeTab === 'relevance') {\n    if (country.access_information || country.civic_participation || country.public_accountability || country.unclear) {\n      appendCountriesRelevance(country, `#country-${country.id}`);\n    } else {\n      showNoResults(`#country-${country.id} .data-tiles`, 'No data available', 'medium', 'grey', 'xlarge');\n    }\n  } else if (activeTab === 'thematic') {\n    if (country.current_themes) {\n      appendCountriesThematicBars(country, `#country-${country.id}`);\n    } else {\n      showNoResults(`#country-${country.id} .data-tiles`, 'No data available', 'medium', 'grey', 'xlarge');\n    }\n  } else {\n    showNoResults(`#country-${country.id} .data-tiles`, 'No data available', 'medium', 'grey', 'large');\n  }\n  removeLoader('#countriesContentContainer', null, true);\n}\n\nfunction initCountryBox(container, country, activeTab) {\n  const html = `\n    <div class=\"column small-12 medium-6\" id=\"country-${country.id}\">\n      <div class=\"c-country-tile\">\n        <a class=\"text -title-x-small\" href=\"${country.alias}\">${country.label}&nbsp;<svg class=\"icon -blue -medium arrow\"><use xlink:href=\"#icon-arrow\"></use></svg></a>\n        <div class=\"first-info text\">\n          <span>Total Commitments ${parseInt(country.current_commitments_count) + parseInt(country.starred_commitments_count) + parseInt(country.irm_commitments_count)}</span>\n          <span>Action Plans ${country.action_plan_count}</span>\n          <span>Member since ${moment(parseInt(country.memberSince) * 1000).format('YYYY')}</span>\n        </div>\n        <div class=\"row data-tiles\"></div>\n      </div>\n    </div>\n  `;\n  $('.content-tiles', container).append(html);\n}\n\nfunction showCountriesData(countriesData, activeTab, container, countryId) {\n  hideOnClickPagination();\n  const page = getCurrentPage();\n  // get filter country data\n  let filteredCountries = '';\n  if (page === 1) {\n    $('.content-tiles', container).html('');\n  }\n  if (countryId && countryId > 0) {\n    filteredCountries = countriesData.filter(function(country) {\n      return country.id == countryId;\n    });\n  } else {\n    const sliceStart = (page - 1) * 10;\n    filteredCountries = countriesData.slice(sliceStart, sliceStart + 10);\n  }\n\n  filteredCountries.forEach(function(country, index) {\n    initCountryBox(container, country, activeTab);\n    setCountryDataTiles(container, country);\n  });\n\n  if (page < Math.ceil(countriesData.length / 10) && filteredCountries.length > 1) {\n    showOnClickPagination();\n  }\n  removeLoader(container, null, true);\n}\n\nfunction initCountryTabs(onChangeCountryTab) {\n  initTabs();\n  setTabListeners(onChangeCountryTab);\n}\n","function showHomePage() {\n  (function ($) {\n    // Slider that appear on Home page\n    $('.slider-cover-home').slick({\n      dots: true,\n      arrows: false,\n      speed: 500,\n      fade: true,\n      cssEase: 'linear',\n      dotsClass: 'dots-slider',\n      adaptiveHeight: true\n    });\n\n    const map = L.map('maphome', {\n      zoomControl: false,\n      center: [35, -60],\n      zoom: 2,\n      maxZoom: 6,\n      minZoom: 2,\n      scrollWheelZoom: false\n    });\n    let over = false;\n\n    $('#in').click(function () {\n      map.setZoom(map.getZoom() + 1);\n    });\n\n    $('#out').click(function () {\n      map.setZoom(map.getZoom() - 1);\n    });\n\n    const basemap = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png', {\n      attribution: ''\n    }).addTo(map);\n\n    cartodb.createLayer(map, {\n      user_name: 'jmonaco',\n      type: 'cartodb',\n      sublayers: [{\n        sql: 'SELECT * FROM countries_homepage',\n        cartocss: '#layer {polygon-fill: ramp([actionplan],(#66bc29, #2d4f00, #cc3300), (\"Developing action plan\",\"Implementing action plan\", \"Inactive\"),category);line-width: 1;line-color: #FFF;line-opacity: 0.5;}',\n        interactivity: 'the_geom, nid, country, cartodb_id'\n      }]\n    })\n    .addTo(map)\n    .done(function (layer) {\n      layer.setInteraction(true);\n      const hovers = [];\n\n      layer.on('featureClick', function(e, latlng, pos, data) {\n        $.getJSON(`https://jmonaco.carto.com/api/v2/sql?q= SELECT * FROM countries_homepage WHERE cartodb_id =  ${data.cartodb_id}`, function (datapath) {\n          document.location.href = `${window.location.origin}${datapath.rows[0].path}`;\n        });\n      });\n\n      layer.bind('featureOver', function(e, latlon, pxPos, data, layers) {\n        hovers[layers] = 1;\n        if (_.any(hovers)) {\n          $('#maphome').css('cursor', 'pointer');\n        }\n      });\n\n      layer.bind('featureOut', function(m, layers) {\n        hovers[layers] = 0;\n        if (!_.any(hovers)) {\n          $('#maphome').css('cursor', 'auto');\n        }\n      });\n\n      layer.on('featureOver', function(e, latlng, pos, data) {\n        if (over === false) {\n          $('body').append(`<div class=\"tooltip\" style=\"padding: 5px; position: absolute; z-index: 10; background-color: rgba(255, 255, 255, 1); top:${e.pageY - 25}px; left:${e.pageX + 25}px\">${data.country}</div>`);\n          over = true;\n        } else {\n          $('.tooltip').html(data.country);\n          $('.tooltip').css('top', `${e.pageY - 25}px`);\n          $('.tooltip').css('left', `${e.pageX + 25}px`);\n        }\n      });\n\n      layer.on('featureOut', function(e, latlng, pos, data) {\n        over = false;\n        $('.tooltip').remove();\n      });\n      map.invalidateSize();\n    });\n  })(jQuery);\n}\n","function showDocumentResourcePage() {\n  (function($) {\n    // cache dom\n    const tileContainer = $('#resourceDocsTiles');\n    const searchEl = $('.c-tile');\n    const searchText = $('.c-tile .tile');\n    const searchContainer = $('#resourceTilesSearch input');\n\n    // fetch content and append\n    $.getJSON(`/apiJSON/resource`, function (data) {\n      setSearchPlaceholder(searchContainer, data.data[0].label);\n      setSearchListeners(searchEl, searchText);\n      if (data.data.length) {\n        appendTiles(data.data, tileContainer, 4);\n      } else {\n        showNoResults();\n      }\n    });\n\n  })(jQuery);\n}\n","function showGroupResourcesDetail(id) {\n  (function($) {\n\n    // cache dom\n    const currentNode = $('#groupResourcesDetail').data('node');\n    const tabsContainer = $('#groupResourcesTabs .tabs-container');\n    const searchContainer = $('#resourceTilesSearch input');\n    const tilesContainer = $('#tilesContainer');\n    const searchEl = $('.c-tile');\n    const searchText = $('.c-tile .tile');\n\n    // custom callback for tabs component\n    const onChangeTab = (sub_group_id, label) => {\n      hideNoResults('#noResultsContainer');\n      showLoader('.l-section');\n      tilesContainer.html('');\n      searchContainer.val('');\n      const filterGroup = currentNode === 'All Resources' ? '' : `filter[group_resource]=${currentNode}&`;\n      $.getJSON(`/apiJSON/resources_info?${filterGroup}filter[sub_group]=${sub_group_id}`, (data) => {\n        if (data.data.length) {\n          appendTiles(data.data, tilesContainer, 4);\n        } else {\n          showNoResults('#noResultsContainer', 'No resources available', 'tall', 'grey', 'xxlarge');\n        }\n        removeLoader('.l-section', null, true);\n      });\n      setSearchPlaceholder(searchContainer, label);\n    };\n\n    // fetch content and append\n    $.getJSON(`/apiJSON/sub_group_resource`, (data) => {\n      buildTabs(data.data, tabsContainer, onChangeTab);\n      setSearchPlaceholder(searchContainer, data.data[0].label);\n      setSearchListeners(searchEl, searchText);\n      const filterGroup = currentNode === 'All Resources' ? '' : `filter[group_resource]=${currentNode}&`;\n      $.getJSON(`/apiJSON/resources_info?${filterGroup}filter[sub_group]=${data.data[0].id}&sort=-post_highlighted`, (resources) => {\n        if (resources.data.length) {\n          appendTiles(resources.data, tilesContainer, 4);\n        } else {\n          showNoResults('#noResultsContainer', 'No resources available', 'tall', 'grey', 'xxlarge');\n        }\n        removeLoader('.l-section', null, true);\n      });\n    });\n  })(jQuery);\n}\n","function showGroupResourcesPage() {\n  (function($) {\n    // cache dom\n    const tileContainer = $('#groupResourcesTiles');\n\n    // fetch content and append\n    $.getJSON(`/apiJSON/group_resources`, function (data) {\n      data.data.forEach(function(resource) {\n        const html = `\n          <div class=\"column small-12 medium-4 c-tile\">\n            <a href=\"${resource.alias}\" class=\"tile -tall\">\n              <span class=\"text -tile -white\">\n                ${resource.label}\n              </span>\n            </a>\n          </div>\n        `;\n        tileContainer.append(html);\n      });\n      removeLoader('.l-section', null, true);\n    });\n  })(jQuery);\n}\n","function showResourcesDetail(id) {\n  (function($) {\n    $.getJSON(`/apiJSON/resources_info?filter[id]=${id}`, function (data) {\n      buildExploreMoreTiles('resources_info', 'group_resource', data.data[0].group_resource[0]);\n    });\n  })(jQuery);\n}\n","function showStoryDetail(id) {\n  (function ($) {\n\n    // data for post\n    $.getJSON(`/apiJSON/stories/${id}`, function (data) {\n      // cache\n      const story = data.data[0];\n      const creationDate = convertPostDate(story.created, 'dd/mm/yyyy');\n      let metaHtml = '';\n      // set country tags\n      if (story.country.length) {\n        const countries = story.country;\n        countries.forEach(function(country, index) {\n          const pathCountry = `${country.alias}`;\n          if (index === countries.length - 1) {\n            metaHtml += `<a href=\"/${pathCountry}\">${country.label}</a><span class=\"text -post-meta\"> | </span>`;\n          } else {\n            metaHtml += `<a href=\"/${pathCountry}\">${country.label}, </a>`;\n          }\n        });\n      }\n      metaHtml += `<span class=\"text -post-meta\">${creationDate}</span>`;\n      $('.countries').html(metaHtml);\n\n      // set body content\n      if (story.content) {\n        $('.-body-content').html(story.content.value);\n      }\n\n      // set author and topics\n      if (story.author[0]) {\n        const authors = getAuthors(story.author);\n        $('.author').append(`<strong>Authors: ${authors}</strong>`);\n      }\n      if (story.topic[0]) {\n        $('.topic').append('<strong>Topics: </strong>');\n        story.topic.forEach(function(topic) {\n          const pathTheme = `${topic.alias}`;\n          $('.topic').append(`<a href=\"${pathTheme}\">${topic.label}</a> `);\n        });\n      }\n\n      $('p').each(function() {\n        var $this = $(this);\n        if($this.html().replace(/\\s|&nbsp;/g, '').length == 0)\n        $this.remove();\n      });\n\n      removeLoader('#storiesDetail');\n    });\n  })(jQuery);\n}\n","function showStoriesPage() {\n  (function ($) {\n\n    // cache\n    let countryFilter = 0;\n    let typeFilter = 0;\n    let page = 1;\n    let totalPages = 0;\n\n    //selectors\n    const countrySelector = $('.country-filter');\n    const typeSelector = $('.type-filter');\n    const coverEvents = $('.c-content-banner');\n    const storiesContainer = $('#storiesTiles');\n\n    // public functions\n    function buildHighlightedEvent(story) {\n      if (story.image) {\n        $('.c-content-banner').css('background-image', `url(${story.image})`);\n      }\n      $('.banner-link', coverEvents).attr('href', story.alias);\n      $('.banner-title', coverEvents).html(story.label);\n      $('.banner-date', coverEvents).html(moment(parseInt(story.created)).format('D MMMM YYYY'));\n      $('.banner-author', coverEvents).html(getAuthors(story.author));\n      $('.c-content-banner').removeClass('-hidden');\n    }\n\n    function buildSelector(selector, placeholder, endpoint, query) {\n      selector.select2({\n        minimumResultsForSearch: Infinity,\n        containerCssClass: '-green -tall',\n        dropdownCssClass: '-green',\n        placeholder: `${placeholder}`,\n      });\n      selector.append(`<option value=\"0\">${placeholder}</option>`);\n\n      $.getJSON(`/apiJSON/${endpoint}?${query}`, function (data) {\n        data.data.forEach(function(data) {\n          const option = `<option value=\"${data.id}\">${data.label}</option>`;\n          selector.append(option);\n        });\n\n        selector.on('change', function () {\n          showLoader('#storiesContainer');\n          countryFilter = countrySelector.val();\n          typeFilter = typeSelector.val();\n          page = 1;\n          showStories(countryFilter, typeFilter, page);\n        });\n      });\n    }\n\n    function setPaginationListerners() {\n      countryFilter = countrySelector.val();\n      typeFilter = typeSelector.val();\n      $('.onClickPagination').on('click', function(e) {\n        showLoader('#storiesContainer');\n        const pageNum = $(this).data('value');\n        showStories(countryFilter, typeFilter, pageNum);\n      })\n    }\n\n    function showStories(country, type, page) {\n      const activeCountry = parseInt(country) > 0 ? `filter[country]=${country}&` : '';\n      const activeType = parseInt(type) > 0 ? `filter[category]=${type}&` : '';\n      const activeFilters = `${activeCountry}${activeType}&page=${page}`;\n      $.getJSON(`/apiJSON/stories?${activeFilters}&sort=-created`, function (stories) {\n        if (stories.data.length > 0) {\n          totalPages = getPageCount(stories.count, 6);\n          if (page === 1) {\n            $.getJSON(`/apiJSON/stories?sort=-created`, function (highlightedStory) {\n              buildHighlightedEvent(highlightedStory.data[0]);\n              appendTilesDetailed(stories.data, storiesContainer, 2);\n              initPagination(page, totalPages, 'storiesPage');\n              setPaginationListerners();\n              removeLoader('#storiesContainer', null, true);\n            });\n          } else {\n            appendTilesDetailed(stories.data, storiesContainer, 2);\n            removeLoader('#storiesContainer', null, true);\n            initPagination(page, totalPages, 'storiesPage');\n            setPaginationListerners();\n          }\n        } else {\n          showNoResults('#storiesTiles', 'No stories with these filters', 'tall', 'grey', 'xxlarge');\n          $('.c-pagination').html('');\n          removeLoader('#storiesContainer', null, true);\n        }\n      });\n\n    }\n\n    // build page\n    buildSelector(countrySelector, 'All countries', 'countries', 'fields=id,label&sort=label');\n    buildSelector(typeSelector, 'All story types', 'stories_categories', 'fields=id,label&sort=label');\n    showStories(countryFilter, typeFilter, page);\n\n  })(jQuery);\n}\n","function showStoriesSubmitPage(id) {\n  (function ($) {\n\n    // cache\n    const themeSelector = '.type-select';\n    const countrySelector = '.country-select';\n\n    $('#stories-menu').addClass('active');\n\n    $(themeSelector).select2({\n      minimumResultsForSearch: Infinity,\n      containerCssClass: '-tall',\n      placeholder: 'All story types'\n    });\n    $(countrySelector).select2({\n      minimumResultsForSearch: Infinity,\n      containerCssClass: '-tall',\n      placeholder: 'All countries'\n    });\n\n    $.getJSON(`/apiJSON/countries?fields=id,name,label&sort=label`, function (data) {\n      appendSelectOptionsFromData(countrySelector, data.data);\n      $.getJSON(`/apiJSON/themes?sort=label&fields=id,label`, function (data) {\n        appendSelectOptionsFromData(themeSelector, data.data);\n        removeLoader('.c-form', null, true);\n      });\n    });\n\n    $('.js-submit-story').click(function() {\n      const title = $('.-title').val();\n      const countryId = $('.country-select').val();\n      const topicId = $('.type-select').val();\n      const date = $('.-date').val();\n      const image = $('.-image').val();\n      const content = $('.-content').val();\n      const email = $('.-email').val();\n      const author = $('.-author').val();\n      $.ajax({\n        url: `/sites/all/themes/custom/ogp_theme/phpFunctions/createNode.php`,\n        type: 'POST',\n        dataType: 'json',\n        data: {}\n      }).done(function (data) {\n      });\n    });\n\n  })(jQuery);\n}\n","function showThemesDetail(id) {\n  (function showAPIThemes($) {\n\n    //cache\n    const countrySelector = $('.country-selector');\n    const contentContainer = $('#contentContainer .content-tiles');\n    const contributorText = $('#contributorsText');\n    let countryFilter;\n\n    // local functions\n    function setContributorsText(log, author, email) {\n      const html = `\n        <b>Contributors:</b> This topic has been developed for the Open Gov Guide by the National Democratic Institute. The lead author was Patrick Merloe with contributions from Michelle Brown and Tova Wang. Please send comments to pat@ndi.org.\n      `;\n      contributorText.html(html);\n    }\n\n    function setSelectCountryListerners() {\n      countrySelector.on('change', function () {\n        hideNoResults();\n        showLoader('#themesDetail');\n        const activeTab = $('.c-tabs .-selected').data('node');\n        const countryModel = $(this).val();\n        if (parseInt(countryModel) === 0) {\n          showContent(contentContainer, activeTab);\n        } else {\n          showContent(contentContainer, activeTab, countryModel);\n        }\n      });\n    }\n\n    // init selector\n    function initSelectors() {\n      countrySelector.select2({\n        minimumResultsForSearch: Infinity,\n        containerCssClass: '-green -tall',\n        dropdownCssClass: '-green',\n        placeholder: 'All countries',\n      });\n      $('.select2').addClass('-green-select');\n      $.getJSON(`/apiJSON/countries?fields=id,name,label&sort=label`, function(data) {\n        data.data.forEach(function(country) {\n          const option = `<option value=\"${country.id}\">${country.name.name}</option>`;\n          countrySelector.append(option);\n        });\n      });\n      setSelectCountryListerners();\n    }\n\n    // custom callback for tabs component\n    const onChangeTab = (id, label) => {\n      hideNoResults();\n      showLoader('#themesDetail');\n      $('#themesDetail .-body-content').addClass('-hidden');\n      $(`#themesDetail .${id}`).removeClass('-hidden');\n      const activeCountry = countrySelector.val();\n      if (parseInt(activeCountry) === 0) {\n        showContent(contentContainer, id);\n      } else {\n        showContent(contentContainer, id, activeCountry);\n      }\n      setContributorsText();\n      if (id === 'modelcommitments') {\n        contributorText.removeClass('-hidden');\n      } else {\n        contributorText.addClass('-hidden');\n      }\n    }\n\n    function showContent(container, endpoint, countryFilter) {\n      container.html('');\n      const countryQuery = countryFilter ? `&filter[country]=${countryFilter}` : '';\n      $.getJSON(`/apiJSON/${endpoint}?filter[theme]=${id}${countryQuery}`, function(data) {\n        hideNoResults();\n        if (data.data.length) {\n          appendTilesWithoutBackground(data.data, container, 2, '-themes');\n        } else {\n          showNoResults(container, 'No content available', 'tall', 'grey', 'xxlarge');\n        }\n        removeLoader('#themesDetail', null, true);\n      });\n    }\n    // init page\n    initTabs();\n    setTabListeners(onChangeTab);\n    initSelectors();\n    showContent(contentContainer, 'starredcommitments');\n    buildExploreMoreTiles('themes');\n\n  })(jQuery);\n}\n","function showThemesPage() {\n  (function showAPIThemes($) {\n\n    //consts\n    const themesContainer = $('#tilesContainer');\n    const searchContainer = $('#themesTilesSearch input');\n    const searchEl = $('.c-tile');\n    const searchText = $('.c-tile .tile');\n    const themesTitle = $('.tiles-heading');\n\n    // local functions\n    function showThemesTiles() {\n      $.getJSON(`/apiJSON/themes`, function(data) {\n        if (data.data.length) {\n          appendTiles(data.data, themesContainer, 3);\n        } else {\n          showNoResults('#tilesNoResults', 'No themes available', 'tall', 'grey', 'xxlarge');\n        }\n        removeLoader('.l-section', null, true);\n      });\n    }\n\n    // custom callback for tabs component\n    const onChangeTab = (id, label) => {\n      themesTitle.html(label);\n      let currentSearch = searchContainer.val();\n      currentSearch = currentSearch.toLowerCase();\n      const parseId = parseInt(id);\n      $('.c-tile').each(function () {\n        if (currentSearch) {\n          if ( ($(this).data('group') === parseId && $(this).html().toLowerCase().indexOf(currentSearch) > -1) ||\n          (id === '0' && $('.tile', this).html().toLowerCase().indexOf(currentSearch) > -1 )) {\n            $(this).css('display', 'block');\n          } else {\n            $(this).css('display', 'none');\n          }\n        } else {\n          if ($(this).data('group') === parseId || parseId === 0) {\n            $(this).css('display', 'block');\n          } else {\n            $(this).css('display', 'none');\n          }\n        }\n      });\n\n      // check for zero results\n      const results = $('.c-tile').filter(function () {\n        return $(this).css('display') === 'block';\n      }).length;\n\n      // show empty results\n      if (results === 0) {\n        showNoResults('#noResultsContainer', 'No themes available', 'tall', 'grey', 'xxlarge');\n      } else {\n        hideNoResults('#noResultsContainer');\n      }\n    };\n\n    // init page\n    showThemesTiles();\n    initTabs();\n    setTabListeners(onChangeTab);\n    setSearchListeners(searchEl, searchText);\n\n  })(jQuery);\n}\n","function showGroupList() {\n  (function($) {\n    let page = 1;\n    let totalPages = 0;\n    let sortValue = 'asc';\n    const tableContainer = $('.container-info-table');\n\n    $('.sort-field').click(function() {\n      if (sortValue === 'asc') {\n        $('.triangle-sort').css('transform', 'rotate(180deg)'); // use this functions, because jquery method addClass not work with svg.\n        sortValue = 'desc';\n      } else {\n        $('.triangle-sort').css('transform', 'rotate(0deg)');\n        sortValue = 'asc';\n      }\n      page = 1;\n      showLoader('#tableContainer');\n      showGroups(page, sortValue);\n    });\n\n    function setPaginationListerners() {\n      $('.onClickPagination').on('click', function(e) {\n        showLoader('#tableContainer');\n        const pageNum = $(this).data('value');\n        showGroups(pageNum, sortValue);\n      })\n    }\n\n    function showGroups(page, sort) {\n      let sortApi = '';\n\n      if (sort === 'asc') {\n        sortApi = 'sort=label'\n      } else {\n        sortApi = 'sort-=label'\n      }\n\n      $.getJSON(`/apiJSON/working_group?&page=${page}&${sortApi}`, function (working) {\n        totalPages = getPageCount(working.count, 5);\n        if (page === 1) {\n          $.getJSON(`/apiJSON/working_group?date&page=${page}&${sortApi}`, function (workingTable) {\n            createTable(workingTable);\n            initPagination(page, totalPages, 'workingGroupList');\n            setPaginationListerners();\n            removeLoader('#tableContainer', null, true);\n          });\n        } else {\n          createTable(working);\n          removeLoader('#tableContainer', null, true);\n          initPagination(page, totalPages, 'workingGroupList');\n          setPaginationListerners();\n        }\n      });\n    }\n\n    function createTable(data) {\n      let html = '';\n      for (let i = 0; i < data.data.length; i += 1) {\n        html += `\n          <tr class=\"text\">\n            <th class=\"text -small-bold\">${data.data[i].label}</th>\n            <th class=\"text -body\">\n              ${addDots(data.data[i].body.value, 120)}\n            </th>\n            <th class=\"text\">${data.data[i].name.name}</th>\n            <th class=\"text -blue -capitalize\">${moment(parseInt(data.data[i].date) * 1000).startOf('month').fromNow()}</th>\n            <th><a class=\"text -blue -capitalize\" href=\"${data.data[i].alias}\">Go to Working Group <svg class=\"icon -blue -medium\"><use xlink:href=\"#icon-arrow\"></use></svg></a></th>\n          </tr>\n        `;\n      }\n      tableContainer.html(html);\n    }\n    showGroups(page, sortValue);\n  })(jQuery);\n}\n","function showWorkingGroupDetail(id) {\n  (function($) {\n    const tabsContainer = $('.tabs-container');\n    const containerInfo = $('#container-info');\n\n    // custom callback for tabs component\n    const onChangeWorkinPageTab = function (id, label) {\n      $('.tab-content').addClass('-hidden');\n      $(`.${id}`).removeClass('-hidden');\n    };\n\n    function initWorkingTabs(onChange) {\n      initTabs();\n      setTabListeners(onChange);\n    }\n    showLoader('.working-group-content');\n    $.getJSON(`/apiJSON/working_group_page?filter[working_group]=${id}`, (data) => {\n      buildTabs(data.data, tabsContainer, onChangeWorkinPageTab);\n      initWorkingTabs(onChangeWorkinPageTab);\n      for (let i = 0; i < data.data.length; i += 1) {\n        containerInfo.append(`\n          <div class=\"tab-content -hidden ${data.data[i].id}\">\n            <h3 class=\"text -section-title\">${data.data[i].label}</h3>\n            <div class=\"text -body-content\">\n              <p class=\"text -body-content\">\n                ${data.data[i].body.value}\n              </p>\n            </div>\n          </div>\n        `);\n      }\n      removeLoader('.working-group-content', null, true);\n    });\n  })(jQuery);\n}\n"]}