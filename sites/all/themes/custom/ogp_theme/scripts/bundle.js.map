{"version":3,"sources":["main.js","helpers/dates.js","helpers/random.js","helpers/smoothScroll.js","helpers/strings.js","helpers/threeDots.js","components/aboutMenu.js","components/accordion.js","components/banner.js","components/comments.js","components/exploreMore.js","components/link.js","components/loader.js","components/modal.js","components/pagination.js","components/placeholder.js","components/search.js","components/selector.js","components/table.js","components/tabs.js","components/tile.js","components/twitterLink.js","layouts/about/aboutPage.js","layouts/commitments/currentCommitmentsDetail.js","layouts/commitments/irmCommitmentsDetail.js","layouts/commitments/modelCommitmentsDetail.js","layouts/commitments/starredCommitmentsDetail.js","layouts/countries/countriesDetail.js","layouts/countries/countriesMap.js","layouts/countries/countriesPage.js","layouts/countries/countriesTabs.js","layouts/documents/resourcePage.js","layouts/home/homePage.js","layouts/home/sliderHomePage.js","layouts/irm-reports/irmReports.js","layouts/login-page/loginPage.js","layouts/news-events/newsEventsPage.js","layouts/pages/pagesList.js","layouts/people-involved/peopleInvolved.js","layouts/resources/groupResourcesDetail.js","layouts/resources/groupResourcesPage.js","layouts/resources/resourceDetail.js","layouts/search-result/featuresResultPage.js","layouts/search-result/searchPage.js","layouts/stories/storiesDetail.js","layouts/stories/storiesPage.js","layouts/stories/storiesSubmitPage.js","layouts/tag-page/tagPage.js","layouts/themes/themeDetail.js","layouts/themes/themePage.js","layouts/working-group/groupList.js","layouts/working-group/workingGroupDetail.js"],"names":["getAbsolutePath","loc","window","location","pathName","pathname","substring","lastIndexOf","href","length","search","hash","$","Drupal","behaviors","myBehavior","attach","context","settings","page","block_refresh","args","liveSettings","api_key","picker","smoothScroll","twitterLink","find","showHomePage","showSliderHomePage","addBanner","showStoriesPage","showStoriesSubmitPage","showStoryDetail","stripEmptyStrings","showCountriesDetail","showCountriesPage","showThemesPage","showThemesDetail","showGroupResourcesPage","showGroupResourcesDetail","showResourcesDetail","showDocumentResourcePage","showModelCommitmentDetail","showStarredCommitmentDetail","showCurrentCommitmentDetail","showIrmCommitmentDetail","peopleInvolved","showNewsEventsPage","showGroupList","showWorkingGroupDetail","showPageList","showIrmReports","showAboutPages","searchPage","tagsPage","featuresResultPage","buildSubscribeModal","showComments","aboutMenu","select2","minimumResultsForSearch","Infinity","containerCssClass","loginPage","jQuery","convertPostDate","date","format","dateString","Date","dd","getDate","mm","getMonth","yyyy","getFullYear","convertEventDate","myDate","moment","dateDiff","diff","uniqueRandoms","numRandoms","makeUniqueRandom","i","push","index","Math","floor","random","val","splice","click","replace","hostname","target","slice","animate","scrollTop","offset","top","getAuthors","data","authorString","forEach","author","label","each","$this","html","remove","addDots","string","limit","dots","id","toggleClass","closeAccordionSection","removeClass","slideUp","getPageCount","dataCount","threshold","ceil","appendAccordionItems","view","accordion","item","body","value","alias","setAccordionListeners","e","currentAttrValue","attr","is","addClass","slideDown","preventDefault","initAccordion","type","append","getJSON","initModalPeople","countriesData","updateMapModal","disqus_config","url","identifier","d","document","s","createElement","src","setAttribute","head","appendChild","buildExploreMoreTiles","endPoint","filter","country","numberInformation","filters","tiles","appendTilesRandom","removeLoader","buildLink","link","description","buildRelLink","container","removeList","hide","showLoader","initModal","template","customClass","setModalListeners","closeModal","openModal","updateModalContainer","on","onChangeNewsletterListener","newsletterId","subscribeModalTemplate","buildMapModal","mapModalTemplate","countryId","setMapModalContent","setDataToModal","pushDefaultModal","query","countryData","dataLabel","buttonText","buttonLink","modalType","secondData","totalPeople","dataInfo","id_people","trimmedData","inArray","topic","unix","created","memberSince","action_plan_count","count","pushSmallModal","firstDataLabel","secondDataLabel","parseInt","current_commitments_count","starred_commitments_count","irm_commitments_count","themeCommitmentAlias","currentFilter","poc","buildPagination","totalPages","numbersPager","j","_j","initPagination","containerId","paginationHtml","showNoResults","text","size","color","iconSize","hideNoResults","setSearchPlaceholder","toLowerCase","setSearchListeners","keyup","activeTab","valueInput","indexOf","css","results","appendSelectOptions","selector","options","option","appendSelectOptionsFromData","getSelectOptionsFromData","optionName","some","startDate","endDate","year","value2","sort","reverse","buildSelector","createTable","tableContainer","page_category","startOf","fromNow","name","setTabListeners","callback","hasClass","dataset","node","innerHTML","initTabs","first","buildTabs","tabsContainer","randomTiles","appendTilesWithoutBackground","gridNum","gridWidth","countryList","group","appendTiles","image","countryText","rand","appendSmallTiles","topContainer","appendStandardsTiles","standardsguidance","linkstandardsguidance","appendTilesIRM","countries","reportsTrimmed","irm_reports","report","appendTilesComments","reportCommentsTrimmed","irm_report_comments","appendTilesEvent","language","appendTilesDetailed","limitTopics","topicsHtml","authorsHtml","title","appendTilesDetailedNews","appendCountriesInfoBars","year_action_plan","none_impact","minor_impact","moderate_impact","transformative_impact","appendCountriesRelevance","access_information","civic_participation","public_accountability","unclear","appendCountriesThematicBars","current_themes","current_percentage","idStatus","containerInfo","onChangeAboutPageTab","initAboutTabs","onChange","buildCurrentCommitment","lead_institution","support_institution","onChangeTab","fetchModelCommitmentDetail","strength","contributors","justification","years","docTypes","actionPlans","letters","reports","pageThreshold","actionPlansContainer","reportsContainer","lettersContainer","eventsContainer","themesContainer","completionContainer","currentPageCount","irmPageCount","lettersData","actionPlansData","reportsData","_setDataCount","_appendLoadingBar","theme","_appendStories","stories","story","_appendLinks","activeFilter","_appendEvents","event","eventMeta","locality","setPaginationListerners","pageCount","pageNum","setSelectorListener","initLinksSelectorContainer","dataCache","optionValues","bodyContentListener","themesData","midterm_percentage","endofterm_percentage","completionData","layerMap","initCountriesMap","map","L","zoomControl","center","zoom","maxZoom","minZoom","scrollWheelZoom","basemap","tileLayer","attribution","addTo","setZoom","getZoom","initMapLayer","layers","cartoQueryLink","over","cartodb","createLayer","user_name","sublayers","done","layer","setInteraction","createSubLayer","hovers","bind","latlon","pxPos","_","any","m","latlng","pos","cartodb_id","actionPlanData","rows","nid","starredData","countryid","peopleInvolvedData","storiesData","eventData","commitmentsData","participantsData","origin","path","titleEvent","pageY","pageX","initEventFunctions","setMapLegendListeners","removeLayers","getSubLayers","sublayer","namelayer","prop","changeCommitmentLayer","sql","cartocss","interactivity","action","starred","people","upcomingevent","pastevent","commitment","participants","countriesContent","countriesMap","onChangeCountryTab","setPageCount","showCountriesData","cacheData","invalidateSize","buildCountrySelector","onClickPagination","initCountryTabs","themes","initViews","placeholder","change","setCountrySelectorListeners","filterValue","getCurrentPage","showOnClickPagination","hideOnClickPagination","initModalStarred","setCountryDataTiles","starred_commitments","trimCommitments","initCountryBox","filteredCountries","sliceStart","tileContainer","searchEl","searchText","searchContainer","datapath","getSlideConten","dataContent","dataSlide","imageContent","textLink","imageSlide","text_link","slideContent","show","slide","information_current","information_event","information_irm","information_model","information_news","information_page","information_starred","information_stories","information_working","information_working_page","slick","arrows","speed","fade","cssEase","dotsClass","adaptiveHeight","countryFilter","typeFilter","countrySelectorDownload","countrySelectorComments","irmContainer","commentsContainer","onChangeIRMTabs","initIRMTabs","setPageCountComments","getCurrentPageComments","showTilesIrmReports","onClickPaginationComments","showTilesComments","pageNext","activeCountry","buildSelectorDownload","endpoint","dropdownCssClass","buildSelectorComments","totalPagesEvents","pageEvents","countrySelector","typeSelector","coverEvents","newsContainer","buildHighlightedEvent","showEvents","showNews","activeType","activeFilters","events","highlightedEvent","news","sortValue","showPages","pageNumber","sortApi","pageresult","pageTable","getPeopleInvolvedStories","idPeople","content","getPeopleInvolvedNews","getPicture","currentNode","tilesContainer","sub_group_id","filterGroup","resources","resource","group_resource","creationDate","metaHtml","pathCountry","pathTheme","tags","tag","storiesContainer","showStories","error","themeSelector","submit","email","dataString","ajax","success","showAPIThemes","contentContainer","contributorText","setContributorsText","log","setSelectCountryListerners","countryModel","showContent","initSelectors","countryQuery","sorting","themesTitle","showThemesTiles","currentSearch","parseId","showGroups","working","workingTable","onChangeWorkinPageTab","initWorkingTabs"],"mappings":"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","file":"bundle.js","sourcesContent":["function getAbsolutePath() {\n  const loc = window.location;\n  const pathName = loc.pathname.substring(0, loc.pathname.lastIndexOf('/') + 1);\n  return loc.href.substring(0, loc.href.length - (\n    (loc.pathname + loc.search + loc.hash).length - pathName.length)\n  );\n}\n\n(function($) {\n  Drupal.behaviors.myBehavior = {\n    attach: function (context, settings) {\n      const page = settings.block_refresh.args[0];\n\n      window.liveSettings={\n        api_key:\"2e24be1dcf164e729229ca078bdcfae7\",\n        picker: \"#transifexSelector\"\n      };\n\n      /////////////////\n      // global actions\n      /////////////////\n\n      // listener for anchor smooth scrolling\n      smoothScroll();\n\n      // General\n      twitterLink();\n\n      //init transifex\n      window.liveSettings.picker = '#transifexSelector';\n\n\n      /////////////////\n      // Routing action\n      /////////////////\n\n      // home page\n      if ($(context).find('#homePage').length !== 0) {\n        showHomePage();\n        showSliderHomePage();\n        addBanner('involved');\n      }\n\n      // stories\n      if ($(context).find('#storiesPage').length !== 0) {\n        showStoriesPage();\n        addBanner('writestory');\n        addBanner('newsletter');\n      }\n      if ($(context).find('#storiesSubmitPage').length !== 0) {\n        addBanner('newsletter');\n        showStoriesSubmitPage(settings.block_refresh.args[2]);\n      }\n      if ($(context).find('#storiesDetail').length !== 0) {\n        addBanner('writestory');\n        addBanner('newsletter');\n        showStoryDetail(settings.block_refresh.args[1]);\n        stripEmptyStrings();\n      }\n\n      // countries\n      if ($(context).find('#countriesDetail').length !== 0) {\n        addBanner('peopleCountry', settings.block_refresh.args[1]);\n        addBanner('newsletter');\n        showCountriesDetail(settings.block_refresh.args[1]);\n      }\n      if ($(context).find('#countriesPage').length !== 0) {\n        addBanner('newsletter');\n        showCountriesPage();\n      }\n\n      // themes\n      if ($(context).find('#themesPage').length !== 0) {\n        addBanner('newsletter');\n        showThemesPage();\n      }\n      if ($(context).find('#themesDetail').length !== 0) {\n        addBanner('newsletter');\n        showThemesDetail(settings.block_refresh.args[2]);\n      }\n\n      // resources\n      if ($(context).find('#groupResourcesPage').length !== 0) {\n        addBanner('newsletter');\n        showGroupResourcesPage();\n      }\n      if ($(context).find('#groupResourcesDetail').length !== 0) {\n        addBanner('newsletter');\n        showGroupResourcesDetail(settings.block_refresh.args[1]);\n      }\n      if ($(context).find('#resourcesDetail').length !== 0) {\n        addBanner('newsletter');\n        showResourcesDetail(settings.block_refresh.args[1]);\n      }\n\n      // document resources\n      if ($(context).find('#documentResourcesPage').length !== 0) {\n        addBanner('newsletter');\n        showDocumentResourcePage();\n        stripEmptyStrings();\n      }\n\n      if ($(context).find('#documentResourcesDetail').length !== 0) {\n        addBanner('newsletter');\n        stripEmptyStrings();\n      }\n\n      // commitments\n      if ($(context).find('#modelCommitmentsDetail').length !== 0) {\n        addBanner('newsletter');\n        showModelCommitmentDetail(settings.block_refresh.args[1]);\n      }\n      if ($(context).find('#starredCommitmentsDetail').length !== 0) {\n        addBanner('newsletter');\n        showStarredCommitmentDetail(settings.block_refresh.args[1]); }\n      if ($(context).find('#currentCommitmentsDetail').length !== 0) {\n        addBanner('newsletter');\n        showCurrentCommitmentDetail(settings.block_refresh.args[1]);\n      }\n      if ($(context).find('#irmCommitmentsDetail').length !== 0) {\n        addBanner('newsletter');\n        showIrmCommitmentDetail(settings.block_refresh.args[1]);\n      }\n\n      // People Involved\n      if ($(context).find('#peopleInvolved').length !== 0) {\n        peopleInvolved(settings.block_refresh.args[1]);\n        addBanner('newsletter');\n      }\n\n      // News and Events\n\n      if ($(context).find('#newsEventsPage').length !== 0) {\n        showNewsEventsPage();\n        addBanner('writestory');\n        addBanner('newsletter');\n      }\n\n      if ($(context).find('#newsTemplate').length !== 0) {\n        addBanner('writestory');\n        addBanner('newsletter');\n      }\n\n      if ($(context).find('#eventsTemplate').length !== 0) {\n        addBanner('writestory');\n        addBanner('newsletter');\n      }\n\n      // Working Group\n      if ($(context).find('#workingGroupList').length !== 0) {\n        showGroupList();\n        addBanner('newsletter');\n      }\n\n      if ($(context).find('#workingGroupDetail').length !== 0) {\n        showWorkingGroupDetail(settings.block_refresh.args[1]);\n        addBanner('newsletter');\n      }\n\n      // Pages\n      if ($(context).find('#pagesList').length !== 0) {\n        showPageList();\n        addBanner('newsletter');\n      }\n\n      if ($(context).find('#irmReportsPage').length !== 0) {\n        showIrmReports();\n        addBanner('newsletter');\n      }\n\n      // Pages\n      if ($(context).find('#loginPage').length !== 0) {\n        addBanner('newsletter');\n      }\n\n      if ($(context).find('#aboutPage').length !== 0) {\n        showAboutPages('newsletter');\n        addBanner('newsletter');\n      }\n\n      if ($(context).find('#searchPage').length !== 0) {\n        searchPage();\n        addBanner('newsletter');\n      }\n\n      if ($(context).find('#tagDetail').length !== 0) {\n        tagsPage();\n        addBanner('newsletter');\n      }\n\n      if ($(context).find('#resultSearchPage').length !== 0) {\n        featuresResultPage();\n      }\n\n      if ($(context).find('#page404').length !== 0) {\n        addBanner('newsletter');\n      }\n\n      if ($(context).find('#node').length !== 0) {\n        addBanner('newsletter');\n      }\n\n      //build subscribe modal\n      buildSubscribeModal();\n\n      //add comments\n      if ($(context).find('#disqus_thread').length !== 0) {\n        showComments(settings.block_refresh.args[1]);\n      }\n\n      if ($(context).find('#aboutMenu').length !== 0) {\n        aboutMenu();\n      }\n\n      // convert all custom views_templates\n      $('.form-select').select2({\n        minimumResultsForSearch: Infinity,\n        containerCssClass: '-tall'\n      });\n\n      if ($(context).find('#loginPage').length !== 0) {\n        loginPage();\n      }\n\n    }\n  };\n})(jQuery);\n","function convertPostDate(date, format) {\n  var dateString = new Date(date * 1e3);\n  var dd = dateString.getDate();\n  var mm = dateString.getMonth() + 1; //January is 0!\n  var yyyy = dateString.getFullYear();\n\n  if (format === 'dd/mm/yyyy') {\n    if ( dd < 10 ) {\n      dd = `0${dd}`;\n    }\n\n    if ( mm < 10 ) {\n      mm = `0${mm}`;\n    }\n  }\n\n  dateString = `${dd}/${mm}/${yyyy}`;\n\n  return dateString;\n}\n\nfunction convertEventDate(date) {\n  var myDate = moment(date, 'YYYY-M-DD HH:mm:ss');\n  return myDate.format('MMMM D, YYYY - hh:mm');\n}\n\nfunction dateDiff(date) {\n  return moment().diff(date, 'days');\n}\n","let uniqueRandoms = [];\nlet numRandoms = 50;\n\nfunction makeUniqueRandom() {\n  // refill the array if needed\n  if (!uniqueRandoms.length) {\n    for (let i = 0; i < numRandoms; i++) {\n      uniqueRandoms.push(i);\n    }\n  }\n  const index = Math.floor(Math.random() * uniqueRandoms.length);\n  const val = uniqueRandoms[index];\n\n  // now remove that value from the array\n  uniqueRandoms.splice(index, 1);\n\n  return val;\n}\n","function smoothScroll() {\n  $('a[href*=\"#\"]:not([href=\"#\"])').click(function() {\n    if (location.pathname.replace(/^\\//,'') == this.pathname.replace(/^\\//,'') && location.hostname == this.hostname) {\n      var target = $(this.hash);\n      target = target.length ? target : $('[name=' + this.hash.slice(1) +']');\n      if (target.length) {\n        $('html, body').animate({\n          scrollTop: target.offset().top\n        }, 500);\n        return false;\n      }\n    }\n  });\n}\n","function getAuthors(data) {\n  let authorString = '';\n  if (data[0]) {\n    data.forEach(function (author, index) {\n      if (index === data.length - 1) {\n        authorString += `${author.label}`;\n      } else {\n        authorString += `${author.label}, `;\n      }\n    });\n  }\n  return authorString;\n}\n\nfunction stripEmptyStrings() {\n  $('p').each(function() {\n    var $this = $(this);\n    if($this.html().replace(/\\s|&nbsp;/g, '').length == 0)\n    $this.remove();\n  });\n}\n","function addDots(string, limit) {\n  const dots = '...';\n  if (string.length > limit) {\n    string = string.substring(0, limit) + dots;\n  }\n\n  return string;\n}\n","function aboutMenu() {\n  (function ($) {\n\n    $('.parent .icon').click(function() {\n      const id = $(this).data('value');\n      $(`#${id}.sub-menu`).toggleClass('-open');\n      $(`#${id}`).toggleClass('-open');\n    });\n\n  })(jQuery);\n}\n","function closeAccordionSection() {\n  $('.c-accordion .accordion-section-title').removeClass('active');\n  $('.c-accordion .accordion-section-content').slideUp(200).removeClass('open');\n}\n\nfunction getPageCount(dataCount, threshold) {\n  return Math.ceil(dataCount / threshold);\n}\n\nfunction appendAccordionItems(view, data) {\n  const accordion = $(`#${view} .c-accordion`);\n  let html = '';\n  data.forEach((item) => {\n    html += `\n      <div class=\"accordion-section\">\n        <a class=\"accordion-section-title text -small-bold -black\" href=\"#accordion-${view}-${item.id}\">${item.label}<svg class=\"icon -blue -small\"><use xlink:href=\"#icon-down-arrow\"></use></svg></a>\n        <div id=\"accordion-${view}-${item.id}\" class=\"accordion-section-content\">\n        <div class=\"text -body-content body-container\">${item.body.value}</div>\n        <div class=\"body-container -link\">\n          <a class=\"text -blue link-accordion\" href=\"/${item.alias}\">See more <svg class=\"icon -blue -medium\"><use xlink:href=\"#icon-arrow\"></use></svg></a>\n        </div>\n        </div>\n      </div>\n    `;\n  });\n  accordion.html(html);\n}\n\nfunction setAccordionListeners(view) {\n  $(`#${view} .accordion-section-title`).click(function(e) {\n    var currentAttrValue = $(this).attr('href');\n    if($(e.target).is('.active')) {\n      closeAccordionSection();\n    } else {\n      closeAccordionSection();\n      $(this).addClass('active');\n      $(`#${view} .c-accordion ${currentAttrValue}`).slideDown(200).addClass('open');\n    }\n    e.preventDefault();\n  });\n}\n\nfunction initAccordion(view, data) {\n  appendAccordionItems(view, data);\n  setAccordionListeners(view);\n}\n","function addBanner(type, id) {\n  switch (type) {\n    case 'writestory':\n      $('.banners-container').append(`\n        <div class=\"l-full-width -blue -short -center\">\n          <div class=\"row\">\n            <div class=\"column small-12 medium-7 large-9\">\n              <h3 class=\"text -title-small -white\">Have a story worth sharing? </h3>\n              <p class=\"text -white\">\n                Write your own story and tell us how your government and civil society are working\n                together to accomplish open government commitments.\n              </p>\n            </div>\n            <div class=\"column small-12 medium-5 large-3 vertical\">\n              <a class=\"c-button -box -large -center\" href=\"/submit-story\">write story</a>\n            </div>\n          </div>\n        </div>\n      `);\n      break;\n    case 'newsletter':\n      $('.banners-container').append(`\n        <div class=\"l-full-width -black -short -center\">\n          <div class=\"row\">\n            <div class=\"column small-12 medium-7 large-9\">\n              <h3 class=\"text -title-small -white\">OGP Newsletters</h3>\n              <p class=\"text -white\">\n                Sign-ups for OGP in the News, the Gazette, the Civil Society mailing list, and our monthly highlights.\n              </p>\n            </div>\n            <div class=\"column small-12 medium-5 large-3 vertical\">\n                <span class=\"c-button -box -large -center js-subscribeModalOpen\">Subscribe</span>\n            </div>\n          </div>\n        </div>\n      `);\n      break;\n    case 'involved':\n      $('.banners-container').append(`\n        <div class=\"l-full-width -black -short -center\">\n          <div class=\"row\">\n            <div class=\"column small-12 medium-7 large-9\">\n              <h3 class=\"text -title-small -white\">Get involved</h3>\n              <p class=\"text -white\">\n                For the Open Government Partnership model to work, lots of people need to get involved\n              </p>\n            </div>\n            <div class=\"column small-12 medium-5 large-3 vertical\">\n                <a class=\"c-button -box -large -center\" href=\"/resources\">Resources</a>\n            </div>\n          </div>\n        </div>\n      `);\n      break;\n      case 'peopleCountry':\n        $.getJSON(`/apiJSON/countries/${id}`, function (data) {\n          $('.banners-container').append(`\n            <div class=\"l-full-width -blue -short -center\">\n              <div class=\"row\">\n                <div class=\"column small-12 medium-7 large-9\">\n                  <h3 class=\"text -title-small -white\">People involved from ${data.data[0].label}</h3>\n                  <p class=\"text -white\">\n                    For the Open Government Partnership model to work, lots of people need to get involved\n                  </p>\n                </div>\n                <div class=\"column small-12 medium-5 large-3 vertical\">\n                  <span class=\"c-button -box -large -center show-people-modal\">EXPLORE PEOPLE</span>\n                </div>\n              </div>\n            </div>\n          `);\n          initModalPeople(data);\n        });\n      break;\n    default:\n      break;\n  }\n\n  function initModalPeople(countriesData) {\n    $('.show-people-modal').click(function() {\n      updateMapModal(id, 'peopleDetail', countriesData);\n    });\n  }\n}\n","function showComments(id) {\n  /**\n   *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.\n   *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables\n   */\n  var disqus_config = function () {\n      this.page.url = window.location.href;  // Replace PAGE_URL with your page's canonical URL variable\n      this.page.identifier = id; // Replace PAGE_IDENTIFIER with your page's unique identifier variable\n  };\n  (function() {  // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW\n      var d = document, s = d.createElement('script');\n\n      s.src = '//opengovpartnership.disqus.com/embed.js';  // IMPORTANT: Replace EXAMPLE with your forum shortname!\n\n      s.setAttribute('data-timestamp', +new Date());\n      (d.head || d.body).appendChild(s);\n  })();\n}\n","function buildExploreMoreTiles(endPoint, filter, value, country, numberInformation) {\n  let filters = '';\n  if (filter) {\n    filters = `filter[${filter}]=${value}&`;\n  }\n  $.getJSON(`/apiJSON/${endPoint}?${filters}`, (data) => {\n    if (data.data.length) {\n      const tiles = data.data;\n      appendTilesRandom(tiles, $('.explore-more-container'), 4, '', country, numberInformation);\n    }\n    removeLoader('.c-explore-more');\n  });\n}\n","function buildLink(link) {\n  const html = `\n    <div class=\"c-link\">\n      <div class=\"link\">\n        <svg class=\"icon -blue\"><use xlink:href=\"#icon-external-link\"></use></svg>\n        <a class=\"text -link -blue\" href=\"/${link.link.url}\" target=\"_blank\" rel=\"nofollow\">${link.label}</a>\n      </div>\n      ${link.description ? '<p class=\"text -footnote\">Description lorem ipsum leo isus, porta ac consectetur ac, vestibulum at eras.</p>' : ''}\n    </div>\n  `;\n  return html;\n}\n\nfunction buildRelLink(link) {\n  const html = `\n    <div class=\"c-link\">\n      <div class=\"link\">\n        <svg class=\"icon -blue\"><use xlink:href=\"#icon-external-link\"></use></svg>\n        <a class=\"text -link -blue\" href=\"/${link.alias}\" rel=\"nofollow\">${link.label}</a>\n      </div>\n      ${link.description ? '<p class=\"text -footnote\">Description lorem ipsum leo isus, porta ac consectetur ac, vestibulum at eras.</p>' : ''}\n    </div>\n  `;\n  return html;\n}\n","function removeLoader(container, removeList, hide) {\n  if (hide) {\n    $(`${container} .c-loader`).addClass('-hidden');\n  } else {\n    $(`${container} .c-loader`).remove();\n  }\n\n  // additional items to remove -hidden class from\n  if (removeList) {\n    removeList.forEach(function(item) {\n      $(item).removeClass('-hidden');\n    });\n  }\n}\n\nfunction showLoader(container) {\n  $(`${container} .c-loader`).removeClass('-hidden');\n}\n","function initModal(id, template, customClass) {\n  const html = `\n    <div id=\"${id}\" class=\"c-modal ${customClass}\">\n      <div class=\"modal-overlay\"></div>\n      <div class=\"modal-container\">\n        <svg class=\"icon close-icon js-close-modal\"><use xlink:href=\"#icon-close\"></use></svg>\n        <div class=\"modal-content\">\n          ${template}\n        </div>\n      </div>\n    </div>\n  `;\n  $('body').append(html);\n  setModalListeners(id);\n}\n\nfunction closeModal(id) {\n  $(`#${id}`).removeClass('-open');\n}\n\nfunction openModal(id) {\n  $(`#${id}`).addClass('-open');\n  $('body').addClass('-fixed');\n}\n\nfunction updateModalContainer(id, template) {\n  $(`#${id} .modal-content`).html(template);\n}\n\nfunction setModalListeners(id) {\n  $(`.js-${id}Open`).on('click', function() {\n    openModal(id);\n  });\n  $(`.js-close-modal`).on('click', function() {\n    closeModal(id);\n  });\n  $(`.modal-overlay`).on('click', function() {\n    closeModal(id);\n  });\n  if (id === 'subscribeModal') {\n    onChangeNewsletterListener();\n  }\n}\n\nfunction onChangeNewsletterListener() {\n  $('.newsletter-selector').on('click', function() {\n    const newsletterId = `http://opengovpartnership.us3.list-manage.com/subscribe/post?u=b25f647af089f5f52485a663d&id=${$(this).data('option')}`;\n    $('.newsletter-selector').removeClass('-selected');\n    $(this).addClass('-selected');\n    $('#subscribeModal .c-form').attr('target', newsletterId);\n  });\n}\n\nfunction buildSubscribeModal() {\n  const subscribeModalTemplate = `\n    <form class=\"c-form validate\" id=\"mc-embedded-subscribe-form\" name=\"mc-embedded-subscribe-form\" action=\"http://opengovpartnership.us3.list-manage.com/subscribe/post?u=b25f647af089f5f52485a663d&id=874e29c81c\" method=\"POST\">\n      <div class=\"content-wrapper\">\n        <h3 class=\"text -module-title with-padding\">Our Newsletters</h3>\n        <label class=\"text -small-bold -blue\" for=\"email\">Email</label>\n        <input type=\"email\" required=\"required\" placeholder=\"Your email address\" id=\"mce-EMAIL\" name=\"EMAIL\">\n        <label class=\"text -small-bold -blue\">Subscribe to</label>\n        <div class=\"selector-boxes\">\n          <div class=\"text newsletter-selector -selected -interactive\" data-option=\"874e29c81c\">OGP Newsletter</div>\n          <div class=\"text newsletter-selector -interactive\" data-option=\"20323ef712\">OGP Gazette</div>\n          <div class=\"text newsletter-selector -interactive\" data-option=\"ec2455b5b5\">Boletn de OGP</div>\n          <div class=\"text newsletter-selector -interactive\" data-option=\"add766fb76\">OGP in the News</div>\n        </div>\n      </div>\n      <input type=\"submit\" name=\"subscribe\" id=\"mc-embedded-subscribe\" class=\"c-button -tall -green-back -white\" value=\"subscribe\">\n    </form>\n    <a href=\"https://dgroups.org/hivos/ogp/login\" rel=\"noreferrer noopener\" target=\"_blank\">\n      <div class=\"content-footer\">\n        <span class=\"text -newsletter-selector\">Join the OGP Civil Society Mailing List</span>\n        <svg class=\"icon -blue -medium arrow\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#icon-arrow\"></use></svg>\n      </div>\n    </a>\n  `;\n  initModal('subscribeModal', subscribeModalTemplate, '-subscribe');\n}\n\nfunction buildMapModal() {\n  let mapModalTemplate = '';\n  initModal('mapModal', mapModalTemplate, '-map');\n}\n\nfunction updateMapModal(countryId, type, countriesData) {\n  $(`#mapModal .modal-content`).html('');\n  setMapModalContent('mapModal', type, countryId, countriesData);\n}\n\nfunction setDataToModal(id, html) {\n  updateModalContainer(id, html);\n  removeLoader('.l-map', null, true);\n  openModal(id);\n}\n\nfunction pushDefaultModal(id, query, countryData, dataLabel, buttonText, buttonLink, modalType, secondData) {\n  let totalPeople = 0;\n  $.getJSON(`/apiJSON/${query}`, function (data) {\n    let dataInfo = '';\n    let id_people= [];\n    if (dataLabel === 'people involved') {\n      if (secondData.data.length > 0) {\n        for (let i = 0; i < secondData.data.length; i += 1) {\n          totalPeople += 1;\n          id_people[i] = secondData.data[i].id;\n          dataInfo += `\n            <div class=\"modal-line-separator\">\n              <a class=\"text -small-bold -blue\" href=\"/${secondData.data[i].alias}\">(point of contact) ${secondData.data[i].label}</a>\n              <p class=\"text -body-content\">${secondData.data[i].body ? secondData.data[i].body.value : ''}</p>\n            </div>`;\n        }\n      }\n    }\n\n    if (data.data.length > 0) {\n      const trimmedData = modalType === 'slider' ? data.data.slice(0,3): data.data;\n      trimmedData.forEach(function(data) {\n        if (modalType === 'list') {\n          dataInfo += `\n          <div class=\"people-line-separator\">\n            <a href=\"/${data.alias}\">\n              <h2 class=\"text -title-x-small\">${data.label}</h2>\n            </a>\n          `;\n        } else if (modalType === 'grid') {\n          if ($.inArray(data.id, id_people) === -1) {\n            totalPeople += 1;\n            dataInfo += `\n            <div class=\"modal-line-separator\">\n              <a class=\"text -small-bold -blue\" href=\"/${data.alias}\">${data.label ? data.label : ''}</a>\n              <p class=\"text -body-content\">${data.body ? addDots(data.body.value, 100) : ''}</p>\n            </div>`;\n          }\n        } else if (modalType === 'slider') {\n          dataInfo += `\n            <div class=\"slide -stories\">\n              <a href=\"/${data.topic[0] ? data.topic[0].alias : ''}\" class=\"text -small-bold -blue\">${data.topic[0] ? data.topic[0].label : ''}</a>\n              <a href=\"/${data.alias}\" class=\"text -section-title-small\">${data.label}</a>\n              <span class=\"text date-text -small-bold\">${moment.unix(data.created).format('D MMMM YYYY')}</span>\n              <p class=\"text -meta\">${data.author[0] ? data.author[0].label : ''}</p>\n            </div>\n          `;\n        }\n      });\n    }\n    const html = `\n      <div class=\"modal-header\">\n        <div class=\"header-info\">\n          <h3 class=\"text -module-title\">${countryData[0].label}</h3>\n          <p class=\"text -meta\">Member since ${moment.unix(countryData[0].memberSince).format('YYYY')}, Action plans ${countryData[0].action_plan_count}</p>\n        </div>\n        <div class=\"c-data-number\">\n          <h3 class=\"text -number\">${dataLabel === 'people involved' ? totalPeople : data.count}</h3>\n          <p class=\"text -small-bold\">${dataLabel}</p>\n        </div>\n      </div>\n      <div class=\"content-wrapper -scroll ${modalType === 'slider' ? 'stories-slider': ''}\">\n        ${dataInfo}\n      </div>\n      <div class=\"button-container -fixed\">\n        <a href=\"/${buttonLink}\" class=\"c-button -tall -green-back -box\">${buttonText}</a>\n        <a href=\"/${countryData[0].alias}\" class=\"c-button -tall -green-back -box\">VIEW COUNTRY</a>\n      </div>\n    `;\n    setDataToModal(id, html);\n  });\n}\n\nfunction pushSmallModal(id, query, countryData, firstDataLabel, secondDataLabel, buttonText, buttonLink) {\n  const html = `\n    <div class=\"content-wrapper\">\n      <h3 class=\"text -module-title\">${countryData[0].label}</h3>\n      <p class=\"text -meta\">Member since ${moment.unix(countryData[0].memberSince).format('YYYY')}</p>\n      <div class=\"data-container\">\n        <div class=\"c-data-number -with-padding\">\n          <h4 class=\"text -number\">${parseInt(countryData[0].current_commitments_count) + parseInt(countryData[0].starred_commitments_count) + parseInt(countryData[0].irm_commitments_count)}</h4>\n          <span class=\"text -small-bold\">${firstDataLabel}</span>\n        </div>\n        <div class=\"c-data-number -with-padding\">\n          <h4 class=\"text -number\">3</h4>\n          <span class=\"text -small-bold\">${secondDataLabel}</span>\n        </div>\n      </div>\n    </div>\n    <div class=\"button-container\">\n      <a class=\"c-button -box -tall -green-back -white\" href=\"${buttonLink}\">${buttonText}</a>\n      <a class=\"c-button -box -tall -green-back -white\" href=\"${countryData[0].alias}\">View country</a>\n    </div>\n  `;\n  setDataToModal(id, html);\n}\n\nfunction setMapModalContent(id, type, countryId, countriesData) {\n  let themeCommitmentAlias = 'theme';\n  let countryData;\n  if (type !== 'peopleDetail') {\n    countryData = countriesData.filter(function(country) {\n      return country.id == countryId;\n    });\n  } else {\n    countryData = countriesData.data;\n  }\n  switch (type) {\n    case 'actionPlan':\n      pushSmallModal(id, `countries/${countryId}`, countryData, 'commitments', 'themes covered', 'latest stories', 'stories', '');\n      break;\n    case 'starred':\n      pushDefaultModal(id, `starredcommitments?filter[country]=${countryId}`, countryData, 'starred commitments', 'latest stories', 'stories', 'list', '');\n      break;\n    case 'event':\n      pushDefaultModal(id, `events?filter[country]=${countryId}`, countryData, 'events', 'go to events', 'news-and-events', 'list', '');\n      break;\n    case 'commitment':\n      if ($('.select-legend-dropdown').find(':selected').data('value')) {\n        themeCommitmentAlias = $('.select-legend-dropdown').find(':selected').data('value');\n      }\n      const currentFilter = $('.select-legend-dropdown').val() ? `&filter[theme_id]=${$('.select-legend-dropdown').val()}` : '';\n      pushDefaultModal(id, `current_commitment?filter[country]=${countryId}${currentFilter}`, countryData, 'current commitments', 'explore this theme', `${themeCommitmentAlias}`, 'list', '');\n      break;\n    case 'people':\n      $.getJSON(`/apiJSON/people?filter[country_poc]=${countryId}`, function (poc) {\n        pushDefaultModal(id, `people?filter[country]=${countryId}`, countryData, 'people involved', 'latest stories', 'stories', 'grid', poc);\n      });\n      break;\n    case 'peopleDetail':\n      $.getJSON(`/apiJSON/people?filter[country_poc]=${countryId}`, function (poc) {\n        pushDefaultModal(id, `people?filter[country]=${countryId}`, countryData, 'people involved', 'latest stories', 'stories', 'grid', poc);\n      });\n      break;\n    case 'stories':\n      pushDefaultModal(id, `stories?filter[country]=${countryId}&sort=-created&range=3`, countryData, 'stories', 'latest stories', 'stories', 'slider', '');\n      break;\n    default:\n      break;\n  }\n}\n","function buildPagination(page, totalPages) {\n  let numbersPager = '';\n  if (page > 1) {\n    numbersPager += '<li class=\"prev text -pagination onClickPagination\" data-value=\"' + (page - 1) + '\">back</li>';\n  }\n  // previous pages\n  for (var j = page - 4; j < page; j += 1) {\n    if (j < 1) continue;\n\n    if (j === page - 4 && j >= 2) {\n      numbersPager += '<li class=\"text -pagination onClickPagination\" data-value=\"1\">1</li>';\n      numbersPager += '<li class=\"text -pagination onClickPagination\" data-value=\"' + j + '\">\\u2026</li>';\n      continue;\n    }\n\n    if (j <= totalPages) {\n      if (j < page) {\n        numbersPager += '<li class=\"text -pagination onClickPagination\" data-value=\"' + j + '\">' + j + '</li>';\n      }\n    }\n  }\n  // next pages\n  for (var _j = page; _j < page + 5; _j += 1) {\n    if (_j <= totalPages) {\n      if (_j === page) {\n        numbersPager += '<li class=\"-selected text -pagination onClickPagination\" data-value=\"' + _j + '\">' + _j + '</li>';\n        continue;\n      }\n\n      if (_j < page + 4) {\n        numbersPager += '<li class=\"text -pagination onClickPagination\" data-value=\"' + _j + '\">' + _j + '</li>';\n      }\n\n      if (_j === page + 4) {\n        numbersPager += '<li class=\"text -pagination onClickPagination\" data-value=\"' + _j + '\">\\u2026</li>';\n        numbersPager += '<li class=\"text -pagination onClickPagination\" data-value=\"' + totalPages + '\">' + totalPages + '</li>';\n      }\n    }\n  }\n  if (page < totalPages) {\n    numbersPager += '<li class=\"next text -pagination onClickPagination\" data-value=\"' + (page + 1) + '\">next</li>';\n  }\n  return numbersPager;\n}\n\nfunction initPagination(page, totalPages, containerId) {\n  const container = $(`#${containerId} .c-pagination`);\n  if (totalPages > 1) {\n    const paginationHtml = buildPagination(page, totalPages);\n    container.html(paginationHtml);\n  } else {\n    container.html('');\n  }\n}\n","function showNoResults(container, text, size, color, iconSize, type) {\n  const html = `\n    <div class=\"c-no-results -${size} column small-12\">\n      <svg class=\"icon -${iconSize}\"><use xlink:href=\"#icon-compass-${type}\"></use></svg>\n      <p class=\"text -${color}\">${text}</p>\n    </div>\n  `;\n  $(container).html(html);\n}\n\nfunction hideNoResults(container) {\n  $(`${container} .c-no-results`).remove();\n}\n","function setSearchPlaceholder(container, label) {\n  container.attr('placeholder', `Search ${label.toLowerCase()}...`);\n}\n\nfunction setSearchListeners() {\n  $('.c-search-bar input').keyup(function() {\n    const activeTab = $('#themesTiles .c-tabs .-selected').data('node');\n\n    // listen for type ahead\n    let valueInput = $(this).val();\n    valueInput = valueInput.toLowerCase();\n    $('.c-tile').each(function () {\n      if (activeTab) {\n        if ( $('.tile', this).html().toLowerCase().indexOf(valueInput) !== -1 && $(this).data('group') === activeTab ) {\n          $(this).css('display', 'block');\n        } else {\n          $(this).css('display', 'none');\n        }\n      } else {\n        if ($('.tile', this).html().toLowerCase().indexOf(valueInput) !== -1) {\n          $(this).css('display', 'block');\n        } else {\n          $(this).css('display', 'none');\n        }\n      }\n    });\n    // check for zero results\n    const results = $('.c-tile').filter(function () {\n      return $(this).css('display') === 'block';\n    }).length;\n\n    // show empty results\n    if (results === 0) {\n      showNoResults('#noResultsContainer', 'No resources available', 'tall', 'grey', 'xxlarge', 'blue');\n    } else {\n      hideNoResults('#noResultsContainer');\n    }\n  });\n}\n","function appendSelectOptions(selector, options) {\n  options.forEach(function(option) {\n    const html = `\n      <option value=\"${option}\" data-id=${options.id}>${option}</option>\n    `;\n    $(selector).append(html);\n  });\n}\n\nfunction appendSelectOptionsFromData(selector, options) {\n  options.forEach(function(option) {\n    const html = `\n      <option value=\"${option.id}\" data-value=\"${option.alias}\">${option.label}</option>\n    `;\n    $(selector).append(html);\n  });\n}\n\nfunction getSelectOptionsFromData(data, optionName, type) {\n  let options = [];\n  data.forEach(function(item) {\n    if (item.type && type.some(index => item.type.indexOf(index) >= 0) && item.date) {\n      let startDate, endDate;\n      startDate = moment(item.date.value).year();\n      if ( options.indexOf(startDate) === -1 ) {\n        options.push(startDate);\n      }\n      if (item.date.value2) {\n        endDate = moment(item.date.value2).year();\n        if ( options.indexOf(endDate) === -1 ) {\n          options.push(endDate);\n        }\n      }\n    }\n  });\n  options.sort();\n  options.reverse();\n\n  return options;\n}\n\nfunction buildSelector(selector, options) {\n  //build selector\n  appendSelectOptions(selector, options);\n}\n","function createTable(data, type) {\n  let html = '';\n  const tableContainer = $('.container-info-table');\n  const length = data.data.length;\n  switch (type) {\n    case 'pages':\n      for (let i = 0; i < length; i += 1) {\n        if (data.data[i].body) {\n          html += `\n            <tr class=\"text\">\n              <th class=\"text -small-bold\">${data.data[i].label}</th>\n              <th class=\"text\">${data.data[i].page_category.label}</th>\n              <th class=\"text -blue -capitalize\">${moment.unix(data.data[i].date).startOf('month').fromNow()}</th>\n              <th><a class=\"text -blue -capitalize\" href=\"${data.data[i].alias}\">Go to Page <svg class=\"icon -blue -medium\"><use xlink:href=\"#icon-arrow\"></use></svg></a></th>\n            </tr>\n          `;\n        }\n      }\n      break;\n    case 'groups':\n      for (let i = 0; i < length; i += 1) {\n        html += `\n          <tr class=\"text\">\n            <th class=\"text -small-bold\">${data.data[i].label}</th>\n            <th class=\"text -body\">\n              ${addDots(data.data[i].body.value, 120)}\n            </th>\n            <th class=\"text\">${data.data[i].name.name}</th>\n            <th class=\"text -blue -capitalize\">${moment.unix(data.data[i].date).startOf('month').fromNow()}</th>\n            <th><a class=\"text -blue -capitalize\" href=\"${data.data[i].alias}\">Go to Working Group <svg class=\"icon -blue -medium\"><use xlink:href=\"#icon-arrow\"></use></svg></a></th>\n          </tr>\n        `;\n      }\n      break;\n    default:\n      break;\n  }\n\n  tableContainer.html(html);\n}\n","function setTabListeners(callback) {\n  $('.tab').click((e) => {\n    if (!$(e.target).hasClass('-selected')) {\n      const id = e.target.dataset.node;\n      const label = e.target.innerHTML;\n      $('.tab').removeClass('-selected');\n      $(e.target).addClass('-selected');\n      callback(id, label);\n    }\n  });\n}\n\nfunction initTabs() {\n  $('.tab').first().addClass('-selected');\n}\n\nfunction buildTabs(data, tabsContainer, callback) {\n  data.forEach((item) => {\n    const html = `\n      <li class=\"tab text -tab\" data-node=\"${item.id}\">${item.label}</li>\n    `;\n    tabsContainer.append(html);\n  });\n  initTabs();\n  setTabListeners(callback);\n}\n","// append tiles to div\nlet randomTiles = [];\nconst numRandoms = 50;\n\nfunction appendTilesWithoutBackground(data, container, gridNum, customClass, type) {\n  const gridWidth = 12 / gridNum;\n  let countryList = '';\n  if (data.length !== 0) {\n    data.forEach((item) => {\n      if (item.country) {\n        countryList = '';\n        if (type === 'stories') {\n          for (let i = 0; i < item.country.length; i += 1) {\n            if (i === item.country.length - 1) {\n              countryList += `${item.country[i].label}`;\n            } else {\n              countryList += `${item.country[i].label}, `;\n            }\n          }\n        } else {\n          countryList = item.country.label;\n        }\n      }\n      const html = `\n        <div class=\"column small-12 medium-${gridWidth} c-tile ${customClass ? customClass : ''}\" data-group=\"${item.group ? item.group : ''}\">\n          <a href=\"/${item.alias}\" class=\"tile\">\n            <span class=\"text -tile -white\">\n              ${item.label}\n            </span>\n            <br>\n            <span class=\"text -tile -white country-name ${item.country ? '-visible' : '-hidden'}\">\n              ${item.country ? countryList : ''}\n            </span>\n          </a>\n        </div>\n      `;\n      container.append(html);\n    });\n  }\n}\n\nfunction appendTiles(data, container, gridNum, customClass) {\n  const gridWidth = 12 / gridNum;\n  if (data.length !== 0) {\n    data.forEach((item) => {\n      const html = `\n        <div class=\"column small-12 medium-${gridWidth} c-tile ${customClass ? customClass : ''}\" data-group=\"${item.group ? item.group : ''}\">\n          <a href=\"/${item.alias}\" class=\"tile\" style=\"background-image: url('${item.image ? item.image : ''}')\">\n            <div class=\"${item.image ? 'overlay' : ''}\"></div>\n            <span class=\"text -tile -white\">\n              ${item.label}\n            </span>\n          </a>\n        </div>\n      `;\n      container.append(html);\n    });\n  }\n}\n\nfunction appendTilesRandom(data, container, gridNum, customClass, country, numberInformation) {\n  let countryText = '';\n  for (let i = 0; i < 4; i += 1) {\n    const rand = makeUniqueRandom();\n    if (i % numRandoms == 0) {}\n    randomTiles[i] = rand;\n  }\n  const gridWidth = 12 / gridNum;\n  if (data.length !== 0) {\n    for (let i = 0; i < 4; i += 1) {\n      if (country === true) {\n        countryText = `(${data[randomTiles[i]].country.label})`;\n      }\n      const html = `\n          <a href=\"/${data[randomTiles[i]].alias}\" class=\"tile column small-12 medium-${gridWidth} c-tile ${customClass ? customClass : ''}\" data-group=\"${data[randomTiles[i]].group ? data[randomTiles[i]].group : ''}\" style=\"background-image: url('${data[randomTiles[i]].image ? data[randomTiles[i]].image : ''}')\">\n            <div class=\"${data[randomTiles[i]].image ? 'overlay' : ''}\"></div>\n            <span class=\"text -tile -white\">\n              ${data[randomTiles[i]].label}\n              <br>\n              ${countryText}\n            </span>\n          </a>\n      `;\n      container.append(html);\n    }\n  }\n}\n\nfunction appendSmallTiles(data, topContainer, gridNum, customClass) {\n  const container = $(`${topContainer} .data-tiles`);\n  const gridWidth = 12 / gridNum;\n  if (data.length > 0) {\n    data.forEach((item) => {\n      const html = `\n        <div class=\"column small-12 large-${gridWidth} c-tile ${customClass ? customClass : ''}\" data-group=\"${item.group ? item.group : ''}\">\n          <a href=\"/${item.alias}\" class=\"tile\" style=\"background-image: url('${item.image ? item.image : ''}')\">\n            <div class=\"${item.image ? 'overlay' : ''}\"></div>\n            <span class=\"text -tile -white\">\n              ${item.label}\n            </span>\n          </a>\n        </div>\n      `;\n      container.append(html);\n    });\n  }\n}\n\nfunction appendStandardsTiles(data, container, gridNum, customClass) {\n  const gridWidth = 12 / gridNum;\n  if (data.standardsguidance.length > 0) {\n    data.standardsguidance.forEach((item, index) => {\n      const html = `\n        <div class=\"column small-12 large-${gridWidth} c-tile ${customClass ? customClass : ''}\">\n          <a href=\"${data.linkstandardsguidance[index]}\" class=\"tile\" target=\"_blank\">\n            <div class=\"${item.image ? 'overlay' : ''}\"></div>\n            <span class=\"text -tile -white\">\n              ${item}\n            </span>\n          </a>\n        </div>\n      `;\n      container.append(html);\n    });\n  }\n}\n\nfunction appendTilesIRM(countries, topContainer) {\n  let html = '';\n  countries.forEach(function(country) {\n    html += `\n      <div class=\"column small-12 medium-6\">\n        <div class=\"c-country-tile\" id=\"country-report-${country.id}\">\n          <a class=\"text -title-x-small\" href=\"/${country.alias}\">${country.label}<svg class=\"icon -blue -medium arrow\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#icon-arrow\"></use></svg></a>\n          <div class=\"row data-tiles\">\n    `;\n    const reportsTrimmed = country.irm_reports.splice(0,2);\n    reportsTrimmed.forEach(function(report){\n      if (report.type) {\n        html += `\n        <div class=\"column small-12 large-6 c-tile -short\">\n          <a href=\"/${report.alias}\" class=\"tile\">\n            <span class=\"text -tile -white\">${report.label}</span>\n          </a>\n        </div>\n        `;\n      }\n    });\n    html += '</div></div></div>';\n  });\n  removeLoader('#tab-loader', null, true);\n  $(`${topContainer.selector}`).append(html);\n}\n\nfunction appendTilesComments(countries, topContainer) {\n  let html = '';\n  countries.forEach(function(country) {\n    html += `\n      <div class=\"column small-12 medium-6\">\n        <div class=\"c-country-tile\" id=\"country-comment-${country.id}\">\n          <a class=\"text -title-x-small\" href=\"${country.alias}\">${country.label}<svg class=\"icon -blue -medium arrow\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#icon-arrow\"></use></svg></a>\n          <div class=\"row data-tiles\">\n    `;\n    const reportCommentsTrimmed = country.irm_report_comments.splice(0,2);\n    reportCommentsTrimmed.forEach(function(report){\n      if (report.type) {\n        html += `\n          <div class=\"column small-12 large-6 c-tile -short\">\n            <a href=\"${report.alias}\" class=\"tile\">\n              <span class=\"text -tile -white\">${report.label}</span>\n            </a>\n          </div>\n        `;\n      }\n    });\n    html += '</div></div></div>';\n  });\n  $(`${topContainer.selector}`).append(html);\n}\n\nfunction appendTilesEvent(data, container) {\n  if (data.length > 0) {\n    let html = '';\n    data.forEach((item) => {\n      html += `\n        <div class=\"small-12 medium-3 event-tile-container\">\n          <div>\n            <h3 class=\"text -title-x-small\">${moment(item.date.value).format('MMMM, DD')}</h3>\n            <span class=\"text language-text\">Language: ${item.language ? item.language : 'not specified'}</span>\n          </div>\n          <div>\n            <a class=\"text -interactive -blue\" href=\"${item.alias}\">${item.label}</a>\n          </div>\n        </div>\n      `;\n    });\n    container.html(html);\n  }\n}\n\n// append tiles to div\nfunction appendTilesDetailed(data, container, gridNum) {\n  const gridWidth = 12 / gridNum;\n  let html = '';\n  const limitTopics = 5;\n  data.forEach((item) => {\n    // get variables\n    let topicsHtml = '';\n    let authorsHtml = '';\n\n    // build topics\n    if (item.topic[0]) {\n      // item.topic.forEach(function(topic ,index) {\n      //   if (index === limitTopics && item.topic.length > limitTopics) {\n      //     topicsHtml += `<a href=\"#\" class=\"disabled\">...</a>`;\n      //     return false;\n      //   } else {\n      //     topicsHtml += `<a href=\"/${topic.alias}\">${topic.label}, </a>`;\n      //   }\n      // });\n      for (let i = 0; i < item.topic.length && i <= limitTopics; i += 1) {\n        if (i === limitTopics) {\n          topicsHtml += `<a href=\"#\" class=\"disabled\">...</a>`;\n        } else {\n          if (i === item.topic.length - 1) {\n            topicsHtml += `<a href=\"/${item.topic[i].alias}\">${item.topic[i].label}</a>`;\n          } else {\n            topicsHtml += `<a href=\"/${item.topic[i].alias}\">${item.topic[i].label}, </a>`;\n          }\n        }\n      }\n    }\n\n    if (item.author[0]) {\n      item.author.forEach(function(author ,index) {\n        if (index === item.author.length - 1) {\n          authorsHtml += `<a class=\"text -blue\" href=\"/${author.alias}\">${author.label}</a>`;\n        } else {\n          authorsHtml += `<a class=\"text -blue\" href=\"/${author.alias}\">${author.label}, </a>`;\n        }\n      });\n    }\n\n    html +=`\n      <div class=\"column small-12 medium-${gridWidth} c-tile\">\n        <div class=\"tile-detailed\" style=\"background-image: url('${item.image ? item.image : ''}')\">\n          <div class=\"${item.image ? 'overlay' : ''}\"></div>\n          <div class=\"tile-content\">\n            <div class=\"topics text -dynamic-link ${item.image ? '-white' : ''}\">${topicsHtml}</div>\n            <a href=\"/${item.alias}\"><h3 class=\"text -tile-detail ${item.image ? '-white' : ''}\">${item.title ? item.title : ''}</h3></a>\n            <div class=\"meta\">\n              <span class=\"text -meta-large ${item.image ? '-white' : ''}\">${moment.unix(parseInt(item.created)).format('D MMMM YYYY')}</span>\n              <a class=\"text -meta-large ${item.image ? '-white' : ''}\">${authorsHtml}</a>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n  });\n  container.html(html);\n}\n\nfunction appendTilesDetailedNews(data, container, gridNum) {\n  const gridWidth = 12 / gridNum;\n  let html = '';\n  data.forEach((item) => {\n    html +=`\n      <div class=\"column small-12 medium-6 c-tile\">\n        <div class=\"tile-detailed\">\n          <div></div>\n          <span class=\"text -uppercase -blue -small-bold\">News</span>\n          <div class=\"tile-content\">\n            <a href=\"/${item.alias}\"><h3 class=\"text -tile-detail \">${item.label ? item.label : ''}</h3></a>\n            <div class=\"meta\">\n              <span class=\"text -meta-large\">${moment.unix(parseInt(item.date)).format('DD MMMM YYYY ')}</span>\n              <span class=\"text -meta-large\">${item.name.name}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n  });\n  container.html(html);\n}\n\nfunction appendCountriesInfoBars(item, topContainer) {\n  const container = $(`${topContainer} .data-tiles`);\n  let html = '';\n  html = `\n    <div class=\"column small-12\">\n      <div class=\"c-country-info-bar\">\n        <strong>Action Plan ${item.year_action_plan} Potential Impact</strong>\n        <div class=\"${item.year_action_plan === null ? 'contain-legend-bars -hiden' : 'contain-legend-bars -show'}\">\n          <span class=\"box box-none\"><div class=\"box-color\"></div>None</span>\n          <span class=\"box box-minor\"><div class=\"box-color\"></div>Minor</span>\n          <span class=\"box box-moderate\"><div class=\"box-color\"></div>Moderate</span>\n          <span class=\"box box-transformative\"><div class=\"box-color\"></div>Transformative</span>\n        </div>\n        <div class=\"${item.year_action_plan === null ? 'contain-bars-potential -hiden' : 'contain-bars-potential -show'}\">\n          <div class=\"bar ${item.none_impact? 'none-bar' : '-hiden'}\" style=\"flex-basis:${item.none_impact}%\"><span>${item.none_impact}%</span></div>\n          <div class=\"bar ${item.minor_impact ? 'minor-bar' : '-hiden'}\" style=\"flex-basis:${item.minor_impact}%\"><span>${item.minor_impact}%</span></div>\n          <div class=\"bar ${item.moderate_impact ? 'moderate-bar' : '-hiden'}\" style=\"flex-basis:${item.moderate_impact}%\"><span>${item.moderate_impact}%</span></div>\n          <div class=\"bar ${item.transformative_impact ? 'transformative-bar' : '-hiden'}\" style=\"flex-basis:${item.transformative_impact}%\"><span>${item.transformative_impact}%</span></div>\n        </div>\n        <div class=\"message-error ${item.year_action_plan === null ? '-show' : '-hiden'}\">\n          <span>Sorry, nothing to see</span>\n        </div>\n        <a href=\"http://www.opengovpartnership.org/explorer/all-data.html\" target=\"_blank\" class=\"text -blue\">For data definitions and more data, see the OGP Explorer</a>\n      </div>\n    </div>\n  `;\n  container.html(html);\n}\n\nfunction appendCountriesRelevance(item, topContainer) {\n  const container = $(`${topContainer} .data-tiles`);\n  let html;\n  html = `\n    <div class=\"column small-12\">\n      <div class=\"c-country-relevance-bar\">\n        <div class=\"relevance-bar\">\n          <h4>Access to Information ${item.access_information ? '(' + item.access_information + '% )' : ''}</h4>\n          <div class=\"${item.access_information ? 'bar-border' : 'bar-border -hiden'}\">\n            <div class=\"${item.access_information ? 'bar' : 'bar -hiden'}\" style=\"${item.access_information ? 'width:' + item.access_information + '%' : ''}\" >\n              <span class=\"${item.access_information ? 'bar-error -hiden' : 'bar-error'}\">Sorry, nothing to see.</span>\n            </div>\n          </div>\n          <h4>Civic Participation ${item.civic_participation ? '(' + item.civic_participation + '% )' : ''}</h4>\n          <div class=\"${item.civic_participation ? 'bar-border' : 'bar-border -hiden'}\">\n            <div class=\"${item.civic_participation ? 'bar' : 'bar -hiden'}\" style=\"${item.civic_participation ? 'width:' + item.civic_participation + '%' : ''}\" >\n              <span class=\"${item.civic_participation ? 'bar-error -hiden' : 'bar-error'}\">Sorry, nothing to see.</span>\n            </div>\n          </div>\n          <h4>Public Accountability ${item.public_accountability ? '(' + item.public_accountability + '% )' : ''}</h4>\n          <div class=\"${item.public_accountability ? 'bar-border' : 'bar-border -hiden'}\">\n            <div class=\"${item.public_accountability ? 'bar' : 'bar -hiden'}\" style=\"${item.public_accountability ? 'width:' + item.public_accountability + '%' : ''}\" >\n              <span class=\"${item.public_accountability ? 'bar-error -hiden' : 'bar-error'}\">Sorry, nothing to see.</span>\n            </div>\n          </div>\n          <h4>Unclear ${item.unclear ? '(' + item.unclear + '% )' : ''}</h4>\n          <div class=\"${item.unclear ? 'bar-border' : 'bar-border -hiden'}\">\n            <div class=\"${item.unclear ? 'bar' : 'bar -hiden'}\" style=\"${item.unclear ? 'width:' + item.unclear + '%' : ''}\" >\n              <span class=\"${item.unclear ? 'bar-error -hiden' : 'bar-error'}\">Sorry, nothing to see.</span>\n            </div>\n          </div>\n        </div>\n        <a href=\"http://www.opengovpartnership.org/explorer/all-data.html\" target=\"_blank\" class=\"text -blue\">For data definitions and more data, see the OGP Explorer</a>\n      </div>\n    </div>\n  `;\n  container.html(html);\n}\n\nfunction appendCountriesThematicBars(item, topContainer) {\n  const container = $(`${topContainer} .data-tiles`);\n  const html = `\n    <div class=\"column small-12\">\n      <div class=\"c-country-thematic-bar\">\n        <div class=\"thematic-bar\">\n        <div class=\"thematic-bar\">\n          <h4>${item.current_themes[0]} ${item.current_percentage.length > 0 ? '(' + item.current_percentage[0] + '%)' : ''}</h4>\n          <div class=\"${item.current_percentage[0] ? 'bar-border' : 'bar-border -hiden'}\">\n            <div class=\"${item.current_percentage[0] ? 'bar -green' : 'bar -hiden'}\" style=\"${item.current_percentage[0] ? 'width:' + item.current_percentage[0] + '%' : ''}\" >\n              <span class=\"${item.current_percentage[0] ? 'bar-error -hiden' : 'bar-error'}\">Sorry, nothing to see.</span>\n            </div>\n          </div>\n          <h4>${item.current_themes[1]} ${item.current_percentage[1] ? '(' + item.current_percentage[1] + '%)' : ''}</h4>\n          <div class=\"${item.current_percentage[1] ? 'bar-border' : 'bar-border -hiden'}\">\n            <div class=\"${item.current_percentage[1] ? 'bar -green' : 'bar -hiden'}\" style=\"${item.current_percentage[1] ? 'width:' + item.current_percentage[1] + '%' : ''}\" >\n              <span class=\"${item.current_percentage[1] ? 'bar-error -hiden' : 'bar-error'}\">Sorry, nothing to see.</span>\n            </div>\n          </div>\n          <h4>${item.current_themes[2]} ${item.current_percentage[2] ? '(' + item.current_percentage[2] + '%)' : ''}</h4>\n          <div class=\"${item.current_percentage[2] ? 'bar-border' : 'bar-border -hiden'}\">\n            <div class=\"${item.current_percentage[2] ? 'bar -green' : 'bar -hiden'}\" style=\"${item.current_percentage[2] ? 'width:' + item.current_percentage[2] + '%' : ''}\" >\n              <span class=\"${item.current_percentage[2] ? 'bar-error -hiden' : 'bar-error'}\">Sorry, nothing to see.</span>\n            </div>\n          </div>\n        </div>\n        </div>\n        <a href=\"http://www.opengovpartnership.org/explorer/all-data.html\" target=\"_blank\" class=\"text -blue\">For data definitions and more data, see the OGP Explorer</a>\n      </div>\n    </div>\n  `;\n  container.html(html);\n}\n","function twitterLink() {\n  (function ($) {\n    const idStatus = $('.value-status').text();\n    $('.link-twitter').attr('href', idStatus);\n  })(jQuery);\n}\n","function showAboutPages() {\n  (function ($) {\n\n  const tabsContainer = $('.tabs-container');\n  const containerInfo = $('#containerInfo');\n\n  // custom callback for tabs component\n  const onChangeAboutPageTab = function (id, label) {\n    $('.tab-content').addClass('-hidden');\n    $(`.${id}`).removeClass('-hidden');\n  };\n\n  function initAboutTabs(onChange) {\n    initTabs();\n    setTabListeners(onChange);\n  }\n\n  showLoader('#containerInfo');\n  $.getJSON(`/apiJSON/page?filter[page_category]=2925`, (data) => {\n    buildTabs(data.data, tabsContainer, onChangeAboutPageTab);\n    initAboutTabs(onChangeAboutPageTab);\n    for (let i = 0; i < data.data.length; i += 1) {\n      containerInfo.append(`\n        <div class=\"tab-content -hidden ${data.data[i].id}\">\n          <h3 class=\"text -section-title\">${data.data[i].label}</h3>\n          <div class=\"text -body-content\">\n            <p class=\"text -body-content\">\n              ${data.data[i].body.value}\n            </p>\n          </div>\n        </div>\n      `);\n    }\n    removeLoader('#containerInfo', null, true);\n  });\n\n  })(jQuery);\n}\n","function showCurrentCommitmentDetail(id) {\n  (function ($) {\n\n    function buildCurrentCommitment() {\n      $.getJSON(`/apiJSON/current_commitment/${id}`, function (data) {\n        if(data.data[0].lead_institution[0]) {\n          $('#currentCommitmentContent .lead').html(data.data[0].lead_institution[0]);\n        }\n        if(data.data[0].support_institution[0]) {\n          $('#currentCommitmentContent .support').html(data.data[0].support_institution[0]);\n        }\n      });\n    }\n\n    $('#theme-menu').addClass('active');\n    buildCurrentCommitment();\n    buildExploreMoreTiles('current_commitment', '', '', true, false);\n\n  })(jQuery);\n}\n","function showIrmCommitmentDetail(id) {\n  (function ($) {\n    $('#theme-menu').addClass('active');\n    buildExploreMoreTiles('irm_commitments', '', '', true, false);\n  })(jQuery);\n}\n","function showModelCommitmentDetail(id) {\n  (function ($) {\n\n    const onChangeTab = (id, label) => {\n      $('.tab-container').addClass('-hidden')\n      $(`#${id} .tab-container`).removeClass('-hidden');\n    }\n\n    function fetchModelCommitmentDetail() {\n      $.getJSON(`/apiJSON/modelcommitments/${id}`, function (data) {\n        $('.strength-info').html(`<strong>Strength: </strong>${data.data[0].strength.label}`);\n        $('.contributor-info').html(`<strong>Contributors: </strong>${data.data[0].contributors}`);\n        $('#justification .container').html(data.data[0].justification);\n        appendStandardsTiles(data.data[0], $('#standards .container'), 2);\n        removeLoader('.l-section', null, true);\n      });\n    }\n\n    // init view\n    initTabs();\n    setTabListeners(onChangeTab);\n    fetchModelCommitmentDetail();\n    buildExploreMoreTiles('modelcommitments', '', '', false, false);\n\n  })(jQuery);\n}\n","function showStarredCommitmentDetail(id) {\n  (function ($) {\n    $('#theme-menu').addClass('active');\n    buildExploreMoreTiles('starredcommitments', '', '', true, true);\n  })(jQuery);\n}\n","function showCountriesDetail(id) {\n  (function($) {\n\n    //cache\n    const years = ['2014', '2015', '2016'];\n    const docTypes = {\n      actionPlans: ['2703'],\n      letters: ['2779'],\n      reports: ['2704', '2768', '2705']\n    }\n    const pageThreshold = 10;\n\n    // selectors and containers\n    const actionPlansContainer = '#actionPlansLinks';\n    const reportsContainer = '#reportsLinks';\n    const lettersContainer = '#lettersLinks';\n    const eventsContainer = '#eventsBanner';\n    const themesContainer = '.themes-container';\n    const completionContainer = '.completion-container';\n\n    // initial settings\n    let page = 1;\n    let currentPageCount = 0;\n    let irmPageCount = 0;\n\n    //data cache\n    let lettersData;\n    let actionPlansData;\n    let reportsData;\n\n    // init selectors\n    $('select').select2({\n      minimumResultsForSearch: Infinity,\n      containerCssClass: '-hidden'\n    });\n\n    // local functions\n    function _setDataCount(selector, count) {\n      $(selector).html(`${count}`);\n    }\n\n    function _appendLoadingBar(view, data) {\n      const container = $(view);\n      data.forEach(function(data) {\n        if (data.value) {\n          const html = `\n          <div class=\"c-loading-bar\">\n          <div class=\"text -small-bold -white\">${data.value}% ${data.theme}</div>\n          <div class=\"bar -white\" style=\"width: ${data.value}%;\"></div>\n          </div>\n          `;\n          container.append(html);\n        }\n      });\n    }\n\n    function _appendStories(view, stories) {\n      const container = $(view);\n      stories.forEach(function(story) {\n        const html = `\n          <li class=\"story-item\">\n            <div class=\"badge\">\n              <svg class=\"icon -white\"><use xlink:href=\"#icon-external-link\"></use></svg>\n            </div>\n            <div class=\"notification\">\n              A new OGP <b>Story</b> has been posted: <b><a href=\"/${story.alias}\">${story.label}</a></b>\n            </div>\n          </li>\n        `;\n        container.append(html);\n      });\n    }\n\n    function _appendLinks(view, data, selector, type) {\n      const activeFilter = $(selector).val();\n      const container = $(`${view} .links-container`);\n      let html = '';\n      data.forEach(function(link) {\n        if (link.type && type.some(index => link.type.indexOf(index) >= 0)) {\n          if ((link.date && moment(link.date.value).year() === parseInt(activeFilter)) ||\n              (link.date && moment(link.date.value2).year() === parseInt(activeFilter))) {\n            html += buildRelLink(link);\n          }\n        }\n      });\n      if (html === '') {\n        showNoResults(container, 'No documents available', 'short', 'grey', 'xlarge', 'grey');\n      } else {\n        container.html(html);\n      }\n    }\n\n    function _appendEvents(event) {\n      if (event.image) {\n        $(`${eventsContainer} .banner-image`).css('background-image', `url(${event.image})`);\n      }\n      $(`${eventsContainer} .banner-title`).html(event.label);\n\n      let eventMeta = '';\n      eventMeta += convertEventDate(event.date.value);\n      if (event.date.value2) {\n        const endDate = convertEventDate(event.date.value2);\n        eventMeta += ` to ${endDate}.`;\n      }\n      eventMeta += ` | ${event.location.locality}, ${event.location.country}`;\n      $(`${eventsContainer} .banner-date`).html(eventMeta);\n      $(`${eventsContainer} .c-button`).attr('href', `/${event.alias}`);\n    }\n\n    function setPaginationListerners(container, endPoint, pageCount) {\n      $(`#${container} .onClickPagination`).on('click', function(e) {\n        const pageNum = $(this).data('value');\n        showLoader(`#${container}`);\n        $.getJSON(`/apiJSON/${endPoint}?filter[country]=${id}&page[number]=${pageNum}&page[size]=${pageThreshold}&sort=label`, (data) => {\n          initAccordion(container, data.data);\n          initPagination(pageNum, pageCount, container);\n          setPaginationListerners(container, endPoint, pageCount);\n          removeLoader(`#${container}`, null, true);\n        });\n      })\n    }\n\n    function setSelectorListener(view, selector, data, type) {\n      _appendLinks(view, data, selector, type);\n      $(selector).on('change', function() {\n        _appendLinks(view, data, selector, type);\n      });\n    }\n\n    function initLinksSelectorContainer(dataCache, container, filter, type) {\n      if (dataCache.length) {\n        const optionValues = getSelectOptionsFromData(dataCache, filter, type);\n        if (optionValues.length) {\n          $(`${container} select`).removeClass('-hidden');\n          buildSelector(`${container} select`, optionValues);\n          setSelectorListener(`${container}`, `${container} select`, dataCache, type);\n          $(`${container} .select2-selection`).removeClass('-hidden');\n        } else {\n          _appendLinks(`${container}`, dataCache, `${container} select`, type);\n        }\n      }\n    }\n\n    function bodyContentListener() {\n      $('.js-view-more').on('click', function() {\n        $('.body-view-more').toggleClass('-show');\n        $(this).toggleClass('-open');\n        if ($(this).hasClass('-open')) {\n          $('span', this).html('VIEW LESS');\n        } else {\n          $('span', this).html('VIEW MORE');\n        }\n      });\n    }\n\n\n    /////////////\n    // FETCH DATA\n    /////////////\n\n    // get country data\n    $.getJSON(`/apiJSON/countries?filter[id]=${id}`, function (data) {\n      if (data.data) {\n        const country = data.data[0];\n        // set banner counts\n        _setDataCount('.c-commitment-count .content-count', country.current_commitments_count);\n        _setDataCount('.irm-count', country.irm_commitments_count);\n        _setDataCount('.starred-count', country.starred_commitments_count);\n        _setDataCount('#currentCommitmentsAccordion .content-count', country.current_commitments_count);\n        _setDataCount('#irmReviewedCommitmentsAccordion .content-count', country.irm_commitments_count);\n        // loading bar data\n        if (country.current_themes) {\n          let themesData = [];\n          for (let i = 0; i < country.current_themes.length; i++) {\n            themesData.push({theme: country.current_themes[i], value: country.current_percentage[i]})\n          }\n          _appendLoadingBar(themesContainer, themesData);\n        }\n        if (country.midterm_percentage || country.endofterm_percentage) {\n          const completionData = [\n            {theme: 'Mid term percentage', value: country.midterm_percentage},\n            {theme: 'End of term percentage', value: country.endofterm_percentage}\n          ];\n          _appendLoadingBar(completionContainer, completionData);\n        } else {\n          showNoResults(`.completion-container`, 'Not yet reviewed', 'short', 'white', 'xlarge', 'grey');\n        }\n      }\n      removeLoader('#countryHeaderBanner', null, true);\n    });\n\n\n    // fetch current commitments\n    $.getJSON(`/apiJSON/current_commitment?filter[country]=${id}&sort=label&page[size]=${pageThreshold}&page[number]=1`, (data) => {\n      if (data.data.length) {\n        initAccordion('currentCommitmentsAccordion', data.data);\n        if (data.count > pageThreshold) {\n          currentPageCount = getPageCount(data.count, pageThreshold);\n          initPagination(page, currentPageCount, 'currentCommitmentsAccordion');\n          setPaginationListerners('currentCommitmentsAccordion', 'current_commitment', currentPageCount);\n        }\n      } else {\n        showNoResults(`#currentCommitmentsAccordion .c-accordion`, 'No current commitments', 'medium', 'grey', 'xxlarge', 'blue');\n      }\n      removeLoader('#currentCommitmentsAccordion', null, true);\n    });\n\n\n    // fetch review commitments\n    $.getJSON(`/apiJSON/irm_commitments?filter[country]=${id}&page[size]=${pageThreshold}&sort=label&page[number]=1`, (data) => {\n      if (data.data.length) {\n        initAccordion('irmReviewedCommitmentsAccordion', data.data);\n        if (data.count > pageThreshold) {\n          irmPageCount = getPageCount(data.count, pageThreshold);\n          initPagination(page, irmPageCount, 'irmReviewedCommitmentsAccordion');\n          setPaginationListerners('irmReviewedCommitmentsAccordion', 'irm_commitments', irmPageCount);\n        }\n      } else {\n        showNoResults(`#irmReviewedCommitmentsAccordion .c-accordion`, 'No reviewed commitments', 'medium', 'grey', 'xxlarge', 'blue');\n      }\n      removeLoader('#irmReviewedCommitmentsAccordion', null, true);\n    });\n\n    // fetch stories\n    $.getJSON(`/apiJSON/stories?filter[country]=${id}&page[size]=9&sort=-created`, (data) => {\n      if (data.data.length) {\n        _appendStories('.c-activity-stream ul', data.data);\n        $('.item-bridge').removeClass('-hidden');\n      } else {\n        showNoResults('.c-activity-stream ul', 'No recent activity', 'medium', 'white', 'xlarge', 'grey');\n      }\n      removeLoader('.c-activity-stream');\n    });\n\n    // fetch events\n    $.getJSON(`/apiJSON/events?filter[country]=${id}`, (data) => {\n      if (data.data.length) {\n        if (dateDiff(data.data[0].date.value) <= 0) {\n          _appendEvents(data.data[0]);\n          $(eventsContainer).removeClass('-hidden');\n        }\n      }\n    });\n\n    $.getJSON(`/apiJSON/documents?filter[country]=${id}`, (data) => {\n      const dataCache = data.data;\n      initLinksSelectorContainer(dataCache, actionPlansContainer, ['date'], docTypes.actionPlans);\n      initLinksSelectorContainer(dataCache, reportsContainer, ['date'], docTypes.reports);\n      initLinksSelectorContainer(dataCache, lettersContainer, ['date'], docTypes.letters);\n      removeLoader('#resourceDocsContainer', null, true);\n    });\n\n    // init selectors and views for actions, reports and letters data\n    buildMapModal();\n    bodyContentListener();\n\n  })(jQuery);\n}\n","let layerMap = '';\nfunction initCountriesMap() {\n  const map = L.map('countriesMap', {\n    zoomControl: false,\n    center: [35, -60],\n    zoom: 2,\n    maxZoom: 6,\n    minZoom: 2,\n    scrollWheelZoom: false\n  });\n  const basemap = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png', {\n    attribution: ''\n  }).addTo(map);\n  $('#in').click(function () {\n    map.setZoom(map.getZoom() + 1);\n  });\n\n  $('#out').click(function () {\n    map.setZoom(map.getZoom() - 1);\n  });\n  return map;\n}\n\nfunction initMapLayer(map, countriesData, layers, cartoQueryLink) {\n  let over = false;\n\n  cartodb.createLayer(map, {\n    user_name: 'jmonaco',\n    type: 'cartodb',\n    sublayers: []\n  })\n  .addTo(map)\n  .done(function (layer) {\n    layer.setInteraction(true);\n    layer.createSubLayer(layers['action']);\n    const hovers = [];\n\n    layer.bind('featureOver', function(e, latlon, pxPos, data, layers) {\n      hovers[layers] = 1;\n      if (_.any(hovers)) {\n        $('#countriesMap').css('cursor', 'pointer');\n      }\n    });\n\n    layer.bind('featureOut', function(m, layers) {\n      hovers[layers] = 0;\n      if (!_.any(hovers)) {\n        $('#countriesMap').css('cursor', 'auto');\n      }\n    });\n\n    layer.on('featureClick', function(e, latlng, pos, data) {\n      $('.tooltip').remove();\n      if (layer.layers[0].options.name !== 'participants') {\n        showLoader('.l-map');\n      }\n      switch (layer.layers[0].options.name) {\n        case 'action':\n          $.getJSON(`${cartoQueryLink} SELECT * FROM ggtqckcj2bioeepnuvxoow WHERE cartodb_id = ${data.cartodb_id}`, function (actionPlanData) {\n            updateMapModal(actionPlanData.rows[0].nid, 'actionPlan', countriesData);\n          });\n          break;\n        case 'starred':\n          $.getJSON(`${cartoQueryLink} SELECT * FROM zzpexx07fxnjtcvjpptz2q WHERE cartodb_id = ${data.cartodb_id}`, function (starredData) {\n            updateMapModal(starredData.rows[0].countryid, 'starred', countriesData);\n          });\n          break;\n        case 'people':\n          $.getJSON(`${cartoQueryLink} SELECT * FROM u4yhv_fq5_jb91rzuzgd8q WHERE cartodb_id = ${data.cartodb_id}`, function (peopleInvolvedData) {\n            updateMapModal(peopleInvolvedData.rows[0].countryid, 'people', countriesData);\n          });\n          break;\n        case 'stories':\n          $.getJSON(`${cartoQueryLink} SELECT * FROM cajq0nm1zsu0aav_wrnyvg WHERE cartodb_id = ${data.cartodb_id}`, function (storiesData) {\n            updateMapModal(storiesData.rows[0].countryid, 'stories', countriesData);\n          });\n          break;\n        case 'event':\n          $.getJSON(`${cartoQueryLink} SELECT * FROM ojy344p9szp9irh8dc1uaa WHERE cartodb_id = ${data.cartodb_id} AND country IS NOT NULL`, function (eventData) {\n            updateMapModal(eventData.rows[0].countryid, 'event', countriesData);\n          });\n          break;\n        case 'commitment':\n          $.getJSON(`${cartoQueryLink} SELECT * FROM c73t2gfiumef0fs5de9huq WHERE cartodb_id = ${data.cartodb_id}`, function (commitmentsData) {\n            updateMapModal(commitmentsData.rows[0].countryid, 'commitment', countriesData);\n          });\n          break;\n        case 'participants':\n          $.getJSON(`${cartoQueryLink} SELECT * FROM table_4q9xwd8iroblyagpt_dx5q WHERE cartodb_id = ${data.cartodb_id}`, function (participantsData) {\n            document.location.href = `${window.location.origin}${participantsData.rows[0].path}`;\n          });\n          break;\n        default:\n      }\n    });\n\n    layer.on('featureOver', function(e, latlng, pos, data) {\n\n      const country = data.country;\n      const titleEvent = data.title;\n\n      if (over === false) {\n        if (country) {\n          $('body').append(`<div class=\"tooltip\" style=\"padding: 5px; position: absolute; z-index: 10; background-color: rgba(255, 255, 255, 1); top:${e.pageY - 25}px; left:${e.pageX + 25}px\">${country}</div>`);\n        }\n\n        if (titleEvent) {\n          $('body').append(`<div class=\"tooltip\" style=\"padding: 5px; position: absolute; z-index: 10; background-color: rgba(255, 255, 255, 1); top:${e.pageY - 25}px; left:${e.pageX + 25}px\">${titleEvent}</div>`);\n        }\n        over = true;\n      } else {\n\n        if (country) {\n          $('.tooltip').html(country);\n        }\n\n        if (titleEvent) {\n          $('.tooltip').html(titleEvent);\n        }\n        $('.tooltip').css('top', `${e.pageY - 25}px`);\n        $('.tooltip').css('left', `${e.pageX + 25}px`);\n      }\n    });\n\n    layer.on('featureOut', function(e, latlng, pos, data) {\n      over = false;\n      $('.tooltip').remove();\n    });\n    layerMap = layer;\n    initEventFunctions(layer, layers);\n    setMapLegendListeners(layer, layers);\n  });\n}\n\nfunction removeLayers(layer) {\n  layer.getSubLayers().forEach(function (sublayer) {\n    sublayer.remove();\n  });\n}\n\nfunction initEventFunctions(layer, layers) {\n  $('.change-past-event-layer').click(function() {\n    removeLayers(layer);\n    $(this).html('LOOKING FOR UPCOMING EVENTS?');\n    $('.legend-info-event').html('Past Events');\n    $(this).removeClass('change-past-event-layer');\n    $(this).addClass('change-upcoming-event-layer');\n    layer.setInteraction(true);\n    layer.createSubLayer(layers['pastevent']);\n    initEventFunctions();\n  });\n\n  $('.change-upcoming-event-layer').click(function() {\n    removeLayers(layer);\n    $(this).html('LOOKING FOR PAST EVENTS?');\n    $('.legend-info-event').html('Upcoming Events');\n    $(this).removeClass('change-upcoming-event-layer');\n    $(this).addClass('change-past-event-layer');\n    layer.setInteraction(true);\n    layer.createSubLayer(layers['upcomingevent']);\n    initEventFunctions();\n  });\n}\n\nfunction setMapLegendListeners(layer, layers) {\n  $('.select-legend').click(function () {\n    $('.tooltip').remove();\n    const container = $(this).attr('data-value');\n    const namelayer = $(this).attr('data-layer');\n    removeLayers(layer);\n    if ($(this).hasClass('-selected') === false) {\n      $('.select-legend').each(function () {\n        if ($(this).hasClass('-selected')) {\n          $(this).prop('disabled', false);\n          $(this).toggleClass('-selected');\n          $(`.${container}`).toggleClass('-open-legend');\n        }\n      });\n\n      $('.contain-info').each(function () {\n        if ($(this).hasClass('-open-legend')) {\n          $(this).toggleClass('-open-legend');\n        }\n      });\n      if ($('.scroll-contain-legend').hasClass('-scroll') === false) {\n        $('.scroll-contain-legend').toggleClass('-scroll');\n      }\n      $(`.${container}`).toggleClass('-open-legend');\n      $(this).toggleClass('-selected');\n      $(this).prop('disabled', true);\n      layer.setInteraction(true);\n      layer.createSubLayer(layers[namelayer]);\n    }\n  });\n}\n\nfunction changeCommitmentLayer(){\n  const theme =   $('.select-legend-dropdown').val();\n  removeLayers(layerMap);\n  layerMap.setInteraction(true);\n  layerMap.createSubLayer({\n    sql: 'SELECT country,Min(countryid) countryid, Min(cc.cartodb_id) cartodb_id, count(country), st_centroid(wb.the_geom_webmercator) the_geom_webmercator FROM c73t2gfiumef0fs5de9huq cc INNER JOIN country_centroids_all wb on cc.country = wb.short_name WHERE country IS NOT NULL AND wb.the_geom_webmercator IS NOT NULL AND LENGTH(country) > 0 AND theme LIKE \\'%' + theme + '%\\' GROUP BY wb.the_geom_webmercator, country ORDER BY country DESC',\n    cartocss: '#layer::z1 {marker-width: ramp([count], range(25, 45), quantiles(7));marker-fill: #ffa200;marker-fill-opacity: 1;marker-line-width: 1;marker-line-color: #4b392f;marker-line-opacity: 0.1;marker-allow-overlap:true;marker-comp-op: src;[zoom = 2] {marker-width: ramp([count], range(25, 30), quantiles(3));}[zoom = 3] {marker-width: ramp([count], range(30, 35), quantiles(4));}[zoom = 4] {marker-width: ramp([count], range(30, 40), quantiles(5));}[zoom = 5] {marker-width: ramp([count], range(30, 45), quantiles(6));} [zoom = 6] {marker-width: ramp([count], range(35, 45), quantiles(7));}} #layer::z1 {text-name: [count];text-face-name: \"DejaVu Sans Book\";text-size: 10;text-fill: #FFFFFF;text-label-position-tolerance: 0;text-halo-radius: 0;text-halo-fill: #6F808D;text-dy: 0;text-allow-overlap: true;}',\n    interactivity: 'cartodb_id, the_geom_webmercator, country',\n    name: 'commitment'\n  });\n}\n","function showCountriesPage() {\n  (function ($) {\n\n    // consts for map\n    const cartoQueryLink = 'https://jmonaco.carto.com/api/v2/sql?q=';\n    const layers = {\n      action: {\n        sql: 'SELECT  wb.the_geom_webmercator the_geom_webmercator, nid, member_since, at.path, actionplan, at.country, at.cartodb_id FROM ggtqckcj2bioeepnuvxoow at INNER JOIN country_centroids_all ca on at.country = ca.short_name INNER JOIN world_borders_hd wb on ca.iso3136 = wb.wb_a2',\n        cartocss: '#layer {polygon-fill: ramp([actionplan], (#2d4f00, #66bc29, #2d4f00, #66bc29, #2d4f00, #2d4f00, #cc3300, #cc3300), (\"Implementing 1st action plan and Developing 2nd action plan\",\"Developing action plan\", \"Implementing 2nd action plan\", \"Developing 1st Action Plan\", \"Implementing 1st action plan\", \"Implementing action plan\", , \"Inactive\"), \"=\"); line-width: 1; line-color: #FFF; line-opacity: 0.5;}',\n        interactivity: 'the_geom_webmercator, nid, country, cartodb_id',\n        name: 'action'\n      },\n      starred: {\n        sql: 'SELECT numberstarred,country, st.cartodb_id, st_centroid(wb.the_geom_webmercator) the_geom_webmercator FROM zzpexx07fxnjtcvjpptz2q st INNER JOIN country_centroids_all wb on st.country = wb.short_name WHERE wb.the_geom_webmercator IS NOT NULL ORDER BY numberstarred',\n        cartocss: '#layer::z1 {marker-width: 30;marker-fill: #ffffff;marker-fill-opacity: 1;marker-line-width: 1;marker-line-color: #4b392f;marker-line-opacity: 0.2;marker-allow-overlap:true;marker-comp-op: src;[zoom = 2] {marker-width: 30;}[zoom = 3] {marker-width: 35;}[zoom = 4] {marker-width: 40;}[zoom = 5] {marker-width: 45;}[zoom = 6] {marker-width: 45;}} #layer::z1 {text-name: [numberstarred];text-face-name: \"DejaVu Sans Book\";text-size: 10;text-fill: #000000;text-label-position-tolerance: 0;text-halo-radius: 0;text-halo-fill: #6F808D;text-dy: 0;text-allow-overlap: true;}',\n        interactivity: 'numberstarred, country, cartodb_id, the_geom_webmercator',\n        name: 'starred'\n      },\n      people: {\n        sql: 'SELECT numberpeopleinvolved,country,countryid, pi.cartodb_id, st_centroid(wb.the_geom_webmercator) the_geom_webmercator FROM u4yhv_fq5_jb91rzuzgd8q pi INNER JOIN country_centroids_all wb on pi.country = wb.short_name WHERE wb.the_geom_webmercator IS NOT NULL',\n        cartocss: '#layer {marker-width: 50;marker-height: 45;marker-fill: #007acb;marker-fill-opacity: 1;marker-file:url(\"https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/marker-18.svg\");marker-allow-overlap: true;marker-line-width: 1;marker-line-color: #4b392f;marker-line-opacity: 1;marker-comp-op: src-over;[zoom = 2] {marker-width: 30;marker-height: 25;}[zoom = 3] {marker-width: 35;marker-height: 30;}[zoom = 4] {marker-width: 45;marker-height: 40;} [zoom = 5] {marker-width: 50;marker-height: 45;}[zoom = 6] {marker-width: 55;marker-height: 50;}}',\n        interactivity: 'numberpeopleinvolved,countryid, country, cartodb_id, the_geom_webmercator',\n        name: 'people'\n      },\n      stories: {\n        sql: 'SELECT numberstories,country, st.cartodb_id, st_centroid(wb.the_geom_webmercator) the_geom_webmercator FROM cajq0nm1zsu0aav_wrnyvg st INNER JOIN country_centroids_all wb on st.country = wb.short_name WHERE st.the_geom_webmercator IS NOT NULL',\n        cartocss: '#layer::z1{marker-width: 50;marker-height: 45;marker-fill: #0099ff;marker-fill-opacity: 1;marker-file:url(\"https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/marker-18.svg\");marker-allow-overlap: true;marker-line-width: 1;marker-line-color: #4b392f;marker-line-opacity: 1;marker-comp-op: src-over;[zoom = 2] {marker-width: 50;marker-height: 45;}[zoom = 3] {marker-width: 55;marker-height: 50;}[zoom = 4] {marker-width: 60;marker-height: 55;}[zoom = 5] {marker-width: 65;marker-height: 60;}[zoom = 6] {marker-width: 70;marker-height: 65;}} #layer::z1{text-name: [numberstories];text-face-name: \"DejaVu Sans Book\";text-size: 10;text-fill: #FFFFFF;text-label-position-tolerance: 0;text-halo-radius: 0;text-halo-fill: #6F808D;text-dy: -0.9;text-allow-overlap: true;text-placement: point;text-placement-type: simple;text-comp-op: screen;}',\n        interactivity: 'numberstories, country, cartodb_id, the_geom_webmercator',\n        name: 'stories'\n      },\n      upcomingevent: {\n        sql: 'SELECT now(), country, countryid, count(country), Min(ec.cartodb_id) cartodb_id, Min(date) date, Min(end_date) end_date, Min(start_date) start_date, Min(title) title, st_centroid(wb.the_geom_webmercator) the_geom_webmercator FROM ojy344p9szp9irh8dc1uaa ec INNER JOIN country_centroids_all wb on ec.country = wb.short_name WHERE title IS NOT NULL AND wb.the_geom_webmercator IS NOT NULL AND end_date > now() GROUP BY country, countryid, wb.the_geom_webmercator ORDER BY country',\n        cartocss: '#layer::z1 {marker-width: 30;marker-fill: #66bc29;marker-fill-opacity: 1;marker-line-width: 0;marker-line-color: #151718;marker-line-opacity: 0.2;marker-allow-overlap:true;marker-comp-op: src;[zoom = 2] {marker-width: 30;}[zoom = 3] {marker-width: 35;}[zoom = 4] {marker-width: 40;}[zoom = 5] {marker-width: 45;}[zoom = 6] {marker-width: 45;}} #layer::z1 {text-name: [count];text-face-name: \"DejaVu Sans Book\";text-size: 10;text-fill: #FFFFFF;text-label-position-tolerance: 0;text-halo-radius: 0;text-halo-fill: #6F808D;text-dy: 0;text-allow-overlap: true;}',\n        interactivity: 'cartodb_id, the_geom_webmercator',\n        name: 'event'\n      },\n      pastevent: {\n        sql: 'SELECT now(), country, countryid, count(country), Min(ec.cartodb_id) cartodb_id, Min(date) date, Min(end_date) end_date, Min(start_date) start_date, Min(title) title, st_centroid(wb.the_geom_webmercator) the_geom_webmercator FROM ojy344p9szp9irh8dc1uaa ec INNER JOIN country_centroids_all wb on ec.country = wb.short_name WHERE title IS NOT NULL AND wb.the_geom_webmercator IS NOT NULL AND end_date < now() GROUP BY country, countryid, wb.the_geom_webmercator ORDER BY country',\n        cartocss: '#layer::z1 {marker-width: 30;marker-fill: #66bc29;marker-fill-opacity: 1;marker-line-width: 0;marker-line-color: #151718;marker-line-opacity: 0.2;marker-allow-overlap:true;marker-comp-op: src;[zoom = 2] {marker-width: 30;}[zoom = 3] {marker-width: 35;}[zoom = 4] {marker-width: 40;}[zoom = 5] {marker-width: 45;}[zoom = 6] {marker-width: 45;}} #layer::z1 {text-name: [count];text-face-name: \"DejaVu Sans Book\";text-size: 10;text-fill: #FFFFFF;text-label-position-tolerance: 0;text-halo-radius: 0;text-halo-fill: #6F808D;text-dy: 0;text-allow-overlap: true;}',\n        interactivity: 'cartodb_id, the_geom_webmercator, country',\n        name: 'event'\n      },\n      commitment: {\n        sql: 'SELECT country,Min(countryid) countryid, Min(cc.cartodb_id) cartodb_id, count(country), st_centroid(wb.the_geom_webmercator) the_geom_webmercator FROM c73t2gfiumef0fs5de9huq cc INNER JOIN country_centroids_all wb on cc.country = wb.short_name WHERE country IS NOT NULL AND wb.the_geom_webmercator IS NOT NULL AND LENGTH(country) > 0 GROUP BY wb.the_geom_webmercator, country ORDER BY country DESC',\n        cartocss: '#layer::z1 {marker-width: 30;marker-fill: #ffa200;marker-fill-opacity: 1;marker-line-width: 1;marker-line-color: #4b392f;marker-line-opacity: 0.1;marker-allow-overlap:true;marker-comp-op: src;[zoom = 2] {marker-width: 30;}[zoom = 3] {marker-width: 35;}[zoom = 4] {marker-width: 40;}[zoom = 5] {marker-width:45;} [zoom = 6] {marker-width: 45;}} #layer::z1 {text-name: [count];text-face-name: \"DejaVu Sans Book\";text-size: 10;text-fill: #FFFFFF;text-label-position-tolerance: 0;text-halo-radius: 0;text-halo-fill: #6F808D;text-dy: 0;text-allow-overlap: true;}',\n        interactivity: 'cartodb_id, the_geom_webmercator, country',\n        name: 'commitment'\n      },\n      participants: {\n        sql: 'SELECT * FROM table_4q9xwd8iroblyagpt_dx5q WHERE show_on_map IS TRUE',\n        cartocss: '#layer {marker-width: 50;marker-height: 45;marker-fill: #FFB927;marker-fill-opacity: 1;marker-file: url(\"https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/marker-18.svg\");marker-allow-overlap: true;marker-line-width: 1;marker-line-color: #4b392f;marker-line-opacity: 1;marker-comp-op: src-over;[zoom = 2] {marker-width: 30;marker-height: 25;}[zoom = 3] {marker-width: 35;marker-height: 30;}[zoom = 4] {marker-width: 45;marker-height: 40;}[zoom = 5] {marker-width: 50;marker-height: 45;}[zoom = 6] {marker-width: 55;marker-height: 50;}}',\n        interactivity: 'cartodb_id, title',\n        name: 'participants'\n      }\n    };\n\n    //consts for tabs\n    const countriesContent = '#countriesContentContainer';\n    let page = 1;\n    let activeTab = 'starred';\n    const pageThreshold = 10;\n\n    // cache\n    let countriesMap;\n    let countriesData;\n    let themesData;\n\n    // custom callback for tabs component\n    const onChangeCountryTab = function(id, label) {\n      setPageCount(1);\n      $('.tab-content').addClass('-hidden');\n      $(`.${id}`).removeClass('-hidden');\n      showLoader('#countriesContentContainer');\n      showCountriesData(countriesData, id, countriesContent, $('#countriesSearch select').val());\n    };\n\n    function cacheData() {\n      $.getJSON(`/apiJSON/countries?sort=label`, function (countries) {\n        countriesData = countries.data;\n        initMapLayer(countriesMap, countriesData, layers, cartoQueryLink);\n        countriesMap.invalidateSize();\n        showCountriesData(countriesData, activeTab, countriesContent);\n        buildCountrySelector($('#countriesSearch select'), countriesContent, countriesData, activeTab);\n        onClickPagination(activeTab, countriesContent, countriesData);\n        initCountryTabs(onChangeCountryTab);\n        $.getJSON(`/apiJSON/themes?sort=name&fields=id,label,alias`, function (themes) {\n          themesData = themes.data;\n          appendSelectOptionsFromData('.select-legend-dropdown', themesData);\n          removeLoader('.l-map', null, true);\n        });\n      });\n    }\n\n    function initViews() {\n      countriesMap = initCountriesMap();\n      $('.select-legend-dropdown').select2({\n        minimumResultsForSearch: Infinity,\n        placeholder: 'All themes',\n      });\n      $('#countriesSearch select').select2({\n        containerCssClass: '-tall',\n        placeholder: 'Search country...'\n      });\n      $('.select-legend-dropdown').change(function () {\n        changeCommitmentLayer();\n      });\n    }\n\n    // let's begin\n    initViews();\n    cacheData();\n    buildMapModal();\n\n  })(jQuery);\n}\n","function buildCountrySelector(selector, container, countries, activeTab) {\n  selector.append('<option value=\"0\">All countries</option>');\n  selector.append('<svg class=\"icon -medium -blue\"><use xlink:href=\"#icon-search\"></use></svg>');\n  appendSelectOptionsFromData(selector, countries)\n  setCountrySelectorListeners(selector, container, countries, activeTab);\n}\n\nfunction setCountrySelectorListeners(selector, container, countriesData, activeTab) {\n  selector.on('change', function () {\n    setPageCount(1);\n    showLoader(container);\n    const filterValue = $(this).val();\n    showCountriesData(countriesData, activeTab, container, filterValue);\n  });\n}\n\nfunction setPageCount(val) {\n  $('.page-count').data('value', val);\n}\n\nfunction getCurrentPage() {\n  const pageCount = $('.page-count').data('value');\n  return pageCount;\n}\n\nfunction onClickPagination(activeTab, container, countriesData) {\n  $('.c-pagination-click').on('click', function() {\n    setPageCount(getCurrentPage() + 1);\n    showCountriesData(countriesData, activeTab, container);\n  });\n}\n\nfunction showOnClickPagination() {\n  $('.c-pagination-click').removeClass('-hidden');\n}\n\nfunction hideOnClickPagination() {\n  $('.c-pagination-click').addClass('-hidden');\n}\n\nfunction initModalStarred(countriesData) {\n  $('.show-modal-starred').click(function() {\n    const country = $(this).data('value');\n    setMapModalContent('mapModal', 'starred', country, countriesData);\n  });\n}\n\nfunction setCountryDataTiles(container, country) {\n  const activeTab = $('.tabs-container').find('.-selected').data('node');\n  $(`#country-${country.id} .data-tiles`).html('');\n  if (activeTab === 'starred') {\n    if (country.starred_commitments.length > 0) {\n      const trimCommitments = country.starred_commitments.slice(0, 2);\n      appendSmallTiles(trimCommitments, `#country-${country.id}`, 2, '-short -country');\n      $(`#country-${country.id} > .c-country-tile`).append(`\n        <span data-value=\"${country.id}\" class=\"show-modal-starred text -interactive -blue\">Show all starred commitments</span>\n      `);\n    } else {\n      showNoResults(`#country-${country.id} .data-tiles`, 'No starred commitments', 'medium', 'grey', 'xlarge', 'grey');\n    }\n  } else if (activeTab === 'potential') {\n    if (country.year_action_plan !== null) {\n      appendCountriesInfoBars(country, `#country-${country.id}`);\n    } else {\n      showNoResults(`#country-${country.id} .data-tiles`, 'No data available', 'medium', 'grey', 'xlarge', 'grey');\n    }\n  } else if (activeTab === 'relevance') {\n    if (country.access_information || country.civic_participation || country.public_accountability || country.unclear) {\n      appendCountriesRelevance(country, `#country-${country.id}`);\n    } else {\n      showNoResults(`#country-${country.id} .data-tiles`, 'No data available', 'medium', 'grey', 'xlarge', 'grey');\n    }\n  } else if (activeTab === 'thematic') {\n    if (country.current_themes) {\n      appendCountriesThematicBars(country, `#country-${country.id}`);\n    } else {\n      showNoResults(`#country-${country.id} .data-tiles`, 'No data available', 'medium', 'grey', 'xlarge', 'grey');\n    }\n  } else {\n    showNoResults(`#country-${country.id} .data-tiles`, 'No data available', 'medium', 'grey', 'large', 'grey');\n  }\n  removeLoader('#countriesContentContainer', null, true);\n}\n\nfunction initCountryBox(container, country, activeTab) {\n  const html = `\n    <div class=\"column small-12 medium-6\" id=\"country-${country.id}\">\n      <div class=\"c-country-tile\">\n        <a class=\"text -title-x-small\" href=\"/${country.alias}\">${country.label}&nbsp;<svg class=\"icon -blue -medium arrow\"><use xlink:href=\"#icon-arrow\"></use></svg></a>\n        <div class=\"first-info text\">\n          <span>Current Commitments ${parseInt(country.current_commitments_count)}</span>\n          <span>Reviewed Commitments ${parseInt(country.irm_commitments_count)}</span>\n        </div>\n        <div class=\"text border-line\">\n          <span>Starred Commitments ${parseInt(country.starred_commitments_count)}</span>\n        </div>\n        <div class=\"first-info text\">\n          <span>Action Plans ${country.action_plan_count}</span>\n          <span>Member since ${moment.unix(country.memberSince).format('YYYY')}</span>\n        </div>\n        <div class=\"row data-tiles\"></div>\n      </div>\n    </div>\n  `;\n  $('.content-tiles', container).append(html);\n}\n\nfunction showCountriesData(countriesData, activeTab, container, countryId) {\n  hideOnClickPagination();\n  const page = getCurrentPage();\n  // get filter country data\n  let filteredCountries = '';\n  if (page === 1) {\n    $('.content-tiles', container).html('');\n  }\n  if (countryId && countryId > 0) {\n    filteredCountries = countriesData.filter(function(country) {\n      return country.id == countryId;\n    });\n  } else {\n    const sliceStart = (page - 1) * 10;\n    filteredCountries = countriesData.slice(sliceStart, sliceStart + 10);\n  }\n\n  filteredCountries.forEach(function(country, index) {\n    initCountryBox(container, country, activeTab);\n    setCountryDataTiles(container, country);\n  });\n\n  if (page < Math.ceil(countriesData.length / 10) && filteredCountries.length > 1) {\n    showOnClickPagination();\n  }\n  removeLoader(container, null, true);\n  initModalStarred(countriesData);\n}\n\nfunction initCountryTabs(onChangeCountryTab) {\n  initTabs();\n  setTabListeners(onChangeCountryTab);\n}\n","function showDocumentResourcePage() {\n  (function($) {\n    // cache dom\n    const tileContainer = $('#resourceDocsTiles');\n    const searchEl = $('.c-tile');\n    const searchText = $('.c-tile .tile');\n    const searchContainer = $('#resourceTilesSearch input');\n\n    // fetch content and append\n    $.getJSON(`/apiJSON/resource`, function (data) {\n      setSearchPlaceholder(searchContainer, data.data[0].label);\n      setSearchListeners(searchEl, searchText);\n      if (data.data.length) {\n        appendTiles(data.data, tileContainer, 4);\n      } else {\n        showNoResults();\n      }\n    });\n\n  })(jQuery);\n}\n","function showHomePage() {\n  (function ($) {\n\n    const map = L.map('maphome', {\n      zoomControl: false,\n      center: [35, -60],\n      zoom: 2,\n      maxZoom: 6,\n      minZoom: 2,\n      scrollWheelZoom: false\n    });\n    let over = false;\n\n    $('#in').click(function () {\n      map.setZoom(map.getZoom() + 1);\n    });\n\n    $('#out').click(function () {\n      map.setZoom(map.getZoom() - 1);\n    });\n\n    const basemap = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png', {\n      attribution: ''\n    }).addTo(map);\n\n    cartodb.createLayer(map, {\n      user_name: 'jmonaco',\n      type: 'cartodb',\n      sublayers: [{\n        sql: 'SELECT  wb.the_geom_webmercator the_geom_webmercator, nid, member_since, at.path, actionplan, at.country, at.cartodb_id FROM ggtqckcj2bioeepnuvxoow at INNER JOIN country_centroids_all ca on at.country = ca.short_name INNER JOIN world_borders_hd wb on ca.iso3136 = wb.wb_a2',\n        cartocss: '#layer {polygon-fill: ramp([actionplan], (#2d4f00, #66bc29, #2d4f00, #66bc29, #2d4f00, #2d4f00, #cc3300, #cc3300), (\"Implementing 1st action plan and Developing 2nd action plan\",\"Developing action plan\", \"Implementing 2nd action plan\", \"Developing 1st Action Plan\", \"Implementing 1st action plan\", \"Implementing action plan\", , \"Inactive\"), \"=\"); line-width: 1; line-color: #FFF; line-opacity: 0.5;}',\n        interactivity: 'the_geom_webmercator, nid, country, cartodb_id'\n      }]\n    })\n    .addTo(map)\n    .done(function (layer) {\n      layer.setInteraction(true);\n      const hovers = [];\n      layer.on('featureClick', function(e, latlng, pos, data) {\n        $.getJSON(`https://jmonaco.carto.com/api/v2/sql?q= SELECT * FROM countries_homepage WHERE cartodb_id =  ${data.cartodb_id}`, function (datapath) {\n          document.location.href = `${window.location.origin}${datapath.rows[0].path}`;\n        });\n      });\n\n      layer.bind('featureOver', function(e, latlon, pxPos, data, layers) {\n        hovers[layers] = 1;\n        if (_.any(hovers)) {\n          $('#maphome').css('cursor', 'pointer');\n        }\n      });\n\n      layer.bind('featureOut', function(m, layers) {\n        hovers[layers] = 0;\n        if (!_.any(hovers)) {\n          $('#maphome').css('cursor', 'auto');\n        }\n      });\n\n      layer.on('featureOver', function(e, latlng, pos, data) {\n        if (over === false) {\n          $('body').append(`<div class=\"tooltip\" style=\"padding: 5px; position: absolute; z-index: 10; background-color: rgba(255, 255, 255, 1); top:${e.pageY - 25}px; left:${e.pageX + 25}px\">${data.country}</div>`);\n          over = true;\n        } else {\n          $('.tooltip').html(data.country);\n          $('.tooltip').css('top', `${e.pageY - 25}px`);\n          $('.tooltip').css('left', `${e.pageX + 25}px`);\n        }\n      });\n\n      layer.on('featureOut', function(e, latlng, pos, data) {\n        over = false;\n        $('.tooltip').remove();\n      });\n      map.invalidateSize();\n    });\n  })(jQuery);\n}\n","function showSliderHomePage() {\n  (function ($) {\n\n    function getSlideConten(dataContent, dataSlide, imageContent, i) {\n      let textLink = 'Explore the content';\n      let imageSlide;\n      if (dataSlide.text_link) {\n        textLink = `${dataSlide.text_link}`;\n      }\n      if (imageContent) {\n        if (dataSlide.image) {\n          imageSlide = `<div class=\"c-slider-home-page slider-image-${i} ${dataSlide.image ? '-image' : ''}\">`;\n\n        } else {\n          imageSlide = `<div class=\"c-slider-home-page slider-image-${i} ${dataContent.image ? '-image' : ''}\">`;\n        }\n      } else {\n        imageSlide = `<div class=\"c-slider-home-page slider-image-${i} ${dataSlide.image ? '-image' : ''}\">`;\n      }\n      const slideContent = `\n        ${imageSlide}\n          <div class=\"row\">\n            <div class=\"column small-12 medium-9\">\n              <div class=\"container slider-0\">\n                <div>\n                  <h1 class=\"title-text -white\">\n                    <a href=\"${dataSlide.alias}\">${dataContent.label}</a>\n                  </h1>\n                  <div class=\"small-12 medium-5 large-4\">\n                    <a class=\"c-button -box\" href=\"${dataSlide.alias}\">${textLink}</a>\n                  <div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      `;\n      return slideContent;\n    }\n\n    $.getJSON('/apiJSON/slider_home_page', function (stories) {\n      showLoader('.slider-cover-home');\n      for (let i = 0; i < stories.count; i += 1) {\n        if (stories.data[i].show) {\n          let slide = '';\n\n          if (stories.data[i].information_current) {\n            slide = getSlideConten(stories.data[i].information_current, stories.data[i], false, i);\n          }\n\n          if (stories.data[i].information_event) {\n            slide = getSlideConten(stories.data[i].information_event, stories.data[i], false, i);\n          }\n\n          if (stories.data[i].information_irm) {\n            slide = getSlideConten(stories.data[i].information_irm, stories.data[i], false, i);\n          }\n\n          if (stories.data[i].information_model) {\n            slide = getSlideConten(stories.data[i].information_model, stories.data[i], false, i);\n          }\n\n          if (stories.data[i].information_news) {\n            slide = getSlideConten(stories.data[i].information_news, stories.data[i], false, i);\n          }\n\n          if (stories.data[i].information_page) {\n            slide = getSlideConten(stories.data[i].information_page, stories.data[i], false, i);\n          }\n\n          if (stories.data[i].information_starred) {\n            slide = getSlideConten(stories.data[i].information_starred, stories.data[i], false, i);\n          }\n\n          if (stories.data[i].information_stories) {\n            slide = getSlideConten(stories.data[i].information_stories, stories.data[i], true, i);\n          }\n\n          if (stories.data[i].information_working) {\n            slide = getSlideConten(stories.data[i].information_working, stories.data[i], false, i);\n          }\n\n          if (stories.data[i].information_working_page) {\n            slide = getSlideConten(stories.data[i].information_working_page, stories.data[i], false, i);\n          }\n\n          $('.slider-cover-home').append(slide);\n        }\n\n        if (stories.data[i].information_stories) {\n          if (stories.data[i].image) {\n            $(`.slider-image-${i}`).css('background-image', `url(${stories.data[i].image})`);\n          }\n          if (stories.data[i].information_stories.image) {\n            $(`.slider-image-${i}`).css('background-image', `url(${stories.data[i].information_stories.image})`);\n          }\n        } else {\n          if (stories.data[i].image) {\n            $(`.slider-image-${i}`).css('background-image', `url(${stories.data[i].image})`);\n          }\n        }\n      }\n      removeLoader('.slider-cover-home');\n      $('.slider-cover-home').slick({\n        dots: true,\n        arrows: false,\n        speed: 500,\n        fade: true,\n        cssEase: 'linear',\n        dotsClass: 'dots-slider',\n        adaptiveHeight: true\n      });\n    });\n  })(jQuery);\n}\n","function showIrmReports() {\n  (function($) {\n\n    // cache\n    let countryFilter = 0;\n    let typeFilter = 0;\n    let page = 1;\n    let totalPages = 0;\n\n    //selectors\n    const countrySelectorDownload = $('.country-filter-download');\n    const countrySelectorComments = $('.country-filter-comments');\n    const tabsContainer = $('.tabs-container');\n    const containerInfo = $('#container-info');\n    const irmContainer = $('#downloadContainer');\n    const commentsContainer = $('#commentsContainer');\n\n    // custom callback for tabs component\n    const onChangeIRMTabs = function (id, label) {\n      $('.tab-content').addClass('-hidden');\n      $(`.${id}`).removeClass('-hidden');\n    };\n\n    function initIRMTabs(onChange) {\n      initTabs();\n      setTabListeners(onChange);\n    }\n\n    function setPageCount(val) {\n      $('.reload-thematic-download').data('value', val);\n    }\n\n    function setPageCountComments(val) {\n      $('.reload-thematic-comments').data('value', val);\n    }\n\n    function getCurrentPage() {\n      const pageCount = $('.reload-thematic-download').data('value');\n      return pageCount;\n    }\n\n    function getCurrentPageComments() {\n      const pageCount = $('.reload-thematic-comments').data('value');\n      return pageCount;\n    }\n\n    function onClickPagination() {\n      $('.c-pagination-click-download').on('click', function() {\n        setPageCount(getCurrentPage() + 1);\n        showLoader('#container-info');\n        showTilesIrmReports(countryFilter, getCurrentPage());\n      });\n    }\n\n    function onClickPaginationComments() {\n      $('.c-pagination-click-comments').on('click', function() {\n        setPageCountComments(getCurrentPageComments() + 1);\n        showLoader('#container-info');\n        showTilesComments(countryFilter, getCurrentPageComments());\n      });\n    }\n\n    function showTilesIrmReports(country, pageNext) {\n      const activeCountry = parseInt(country) > 0 ? `filter[id]=${country}&` : '';\n      $.getJSON(`/apiJSON/countries?${activeCountry}sort=label`, function (countries) {\n        appendTilesIRM(countries.data, irmContainer);\n        appendTilesComments(countries.data, commentsContainer);\n        removeLoader('#container-info', null, true);\n      });\n    }\n\n    // function showTilesComments(country, pageNext) {\n    //   const activeCountry = parseInt(country) > 0 ? `filter[id]=${country}&` : '';\n    //   $.getJSON(`/apiJSON/countries?${activeCountry}sort=label`, function (countries) {\n    //     for (let i = 0; i < countries.data.length; i += 1) {\n    //\n    //     }\n    //   });\n    // }\n\n    function buildSelectorDownload(selector, placeholder, endpoint, query) {\n      selector.select2({\n        minimumResultsForSearch: Infinity,\n        containerCssClass: '-green -tall',\n        dropdownCssClass: '-green',\n        placeholder: `${placeholder}`,\n      });\n      selector.append(`<option value=\"0\">${placeholder}</option>`);\n      $.getJSON(`/apiJSON/${endpoint}?${query}`, function (data) {\n        data.data.forEach(function(data) {\n          const option = `<option value=\"${data.id}\">${data.label}</option>`;\n          selector.append(option);\n        });\n\n        $(countrySelectorDownload).on('change', function () {\n          $(irmContainer).html('');\n          showLoader('#tab-loader');\n          countryFilter = countrySelectorDownload.val();\n          page = 1;\n          showTilesIrmReports(countryFilter, page);\n        });\n      });\n    }\n\n    function buildSelectorComments(selector, placeholder, endpoint, query) {\n      selector.select2({\n        minimumResultsForSearch: Infinity,\n        containerCssClass: '-green -tall',\n        dropdownCssClass: '-green',\n        placeholder: `${placeholder}`,\n      });\n      selector.append(`<option value=\"0\">${placeholder}</option>`);\n      $.getJSON(`/apiJSON/${endpoint}?${query}`, function (data) {\n        data.data.forEach(function(data) {\n          const option = `<option value=\"${data.id}\">${data.label}</option>`;\n          selector.append(option);\n        });\n\n        $(countrySelectorComments).on('change', function () {\n          $(irmContainer).html('');\n          showLoader('#tab-loader-comments');\n          countryFilter = countrySelectorComments.val();\n          page = 1;\n          showTilesComments(countryFilter, page);\n        });\n      });\n    }\n\n\n    buildSelectorDownload(countrySelectorDownload, 'All countries', 'countries', 'fields=id,label&sort=label');\n    buildSelectorComments(countrySelectorComments, 'All countries', 'countries', 'fields=id,label&sort=label');\n    onClickPagination();\n    onClickPaginationComments();\n    initIRMTabs(onChangeIRMTabs);\n    showTilesIrmReports(countryFilter, page);\n    // showTilesComments(countryFilter, page);\n\n\n  })(jQuery);\n}\n","function loginPage() {\n  (function($) {\n\n    $('#edit-name').attr('placeholder', 'Enter your Open Government Partnership username');\n    $('#edit-pass').attr('placeholder', 'Enter the password that accompanies your username.');\n\n  })(jQuery);\n}\n","function showNewsEventsPage() {\n  (function ($) {\n    // cache\n    let countryFilter = 0;\n    let typeFilter = 0;\n    let page = 1;\n    let totalPages = 0;\n    let totalPagesEvents = 0;\n    let pageEvents = 1;\n\n    //selectors\n    const countrySelector = $('.country-filter');\n    const typeSelector = $('.type-filter');\n    const coverEvents = $('.c-content-banner');\n    const eventsContainer = $('#eventsTiles');\n    const newsContainer = $('#newsTiles');\n\n    // public functions\n    function buildHighlightedEvent(event) {\n      if (event.image) {\n        $('.c-content-banner').css('background-image', `url(${event.image})`);\n      }\n      if (moment() > moment(event.date.value)) {\n        $('.banner-type-date-event').html('Past Event');\n      } else {\n        $('.banner-type-date-event').html('Upcoming Event');\n      }\n      $('.banner-link', coverEvents).attr('href', event.alias);\n      $('.banner-title', coverEvents).html(event.label);\n      $('.banner-date', coverEvents).html(moment(event.date.value).format('MMMM DD, hh:mm a'));\n      $('.c-content-banner').removeClass('-hidden');\n    }\n\n    function setPageCount(val) {\n      $('.page-count').data('value', val);\n    }\n\n    function getCurrentPage() {\n      const pageCount = $('.page-count').data('value');\n      return pageCount;\n    }\n\n    function onClickPagination() {\n      $('.page-count').on('click', function() {\n        setPageCount(getCurrentPage() + 1);\n        pageEvents = getCurrentPage();\n        if (totalPagesEvents > getCurrentPage()) {\n          showLoader('#eventsContainer');\n          showEvents(countryFilter, typeFilter, getCurrentPage());\n        }\n      });\n    }\n\n    function buildSelector(selector, placeholder, endpoint, query) {\n      selector.select2({\n        minimumResultsForSearch: Infinity,\n        containerCssClass: '-green -tall',\n        dropdownCssClass: '-green',\n        placeholder: `${placeholder}`,\n      });\n      selector.append(`<option value=\"0\">${placeholder}</option>`);\n\n      $.getJSON(`/apiJSON/${endpoint}?${query}`, function (data) {\n        data.data.forEach(function(data) {\n          const option = `<option value=\"${data.id}\">${data.label}</option>`;\n          selector.append(option);\n        });\n\n        selector.on('change', function () {\n          // showLoader('#newsContainer');\n          showLoader('#eventsContainer');\n          countryFilter = countrySelector.val();\n          typeFilter = typeSelector.val();\n          page = 1;\n          // showNews(countryFilter, typeFilter, page);\n          showEvents(countryFilter, typeFilter, page);\n        });\n      });\n    }\n\n    function setPaginationListerners() {\n      countryFilter = countrySelector.val();\n      typeFilter = typeSelector.val();\n      $('.onClickPagination').on('click', function(e) {\n        showLoader('#newsContainer');\n        const pageNum = $(this).data('value');\n        showNews(countryFilter, typeFilter, pageNum);\n      })\n    }\n\n    function showEvents(country, type, page) {\n      const activeCountry = parseInt(country) > 0 ? `filter[country]=${country}&` : '';\n      const activeType = parseInt(type) > 0 ? `filter[category]=${type}&` : '';\n      const activeFilters = `${activeCountry}${activeType}&page[number]=${page}&page[size]=8`;\n      $.getJSON(`/apiJSON/events?${activeFilters}&sort=-date`, function (events) {\n        totalPagesEvents = getPageCount(events.count, 4);\n        if (events.data.length > 0) {\n          if (pageEvents === 1) {\n            $.getJSON(`/apiJSON/events?sort=-date`, function (highlightedEvent) {\n              buildHighlightedEvent(highlightedEvent.data[0]);\n              appendTilesEvent(events.data, eventsContainer);\n              removeLoader('#eventsContainer', null, true);\n            });\n          } else {\n            appendTilesEvent(events.data, eventsContainer);\n            removeLoader('#eventsContainer', null, true);\n          }\n        } else {\n          showNoResults('#eventsContainer', 'No events with these filters', 'tall', 'grey', 'xxlarge', 'blue');\n          removeLoader('#eventsContainer', null, true);\n        }\n      });\n    }\n\n    function showNews(country, type, page) {\n      const activeCountry = parseInt(country) > 0 ? `filter[country]=${country}&` : '';\n      const activeType = parseInt(type) > 0 ? `filter[category]=${type}&` : '';\n      const activeFilters = `${activeCountry}${activeType}&page[number]=${page}&page[size]=8`;\n      $.getJSON(`/apiJSON/news?${activeFilters}&sort=-date`, function (news) {\n        if (news.data.length > 0) {\n          totalPages = getPageCount(news.count, 4);\n          appendTilesDetailedNews(news.data, newsContainer, 2);\n          removeLoader('#newsContainer', null, true);\n          initPagination(page, totalPages, 'newsEventsPage');\n          setPaginationListerners();\n        } else {\n          showNoResults('#newsTiles', 'No news with these filters', 'tall', 'grey', 'xxlarge', 'blue');\n          $('.c-pagination').html('');\n          removeLoader('#newsContainer', null, true);\n        }\n      });\n    }\n\n    // build page\n    buildSelector(countrySelector, 'All countries', 'countries', 'fields=id,label&sort=label');\n    buildSelector(typeSelector, 'All story types', 'stories_categories', 'fields=id,label&sort=label');\n    showEvents(countryFilter, typeFilter, page);\n    showNews(countryFilter, typeFilter, page);\n    onClickPagination();\n\n  })(jQuery);\n}\n","function showPageList() {\n  (function($) {\n    let page = 1;\n    let totalPages = 0;\n    let sortValue = 'asc';\n\n    $('.sort-field').click(function() {\n      if (sortValue === 'asc') {\n        $('.triangle-sort').css('transform', 'rotate(180deg)'); // use this functions, because jquery method addClass not work with svg.\n        sortValue = 'desc';\n      } else {\n        $('.triangle-sort').css('transform', 'rotate(0deg)');\n        sortValue = 'asc';\n      }\n      page = 1;\n      showLoader('#tableContainer');\n      showPages(page, sortValue);\n    });\n\n    function setPaginationListerners() {\n      $('.onClickPagination').on('click', function(e) {\n        showLoader('#tableContainer');\n        const pageNum = $(this).data('value');\n        showPages(pageNum, sortValue);\n      })\n    }\n\n    function showPages(pageNumber, sort) {\n      let sortApi = '';\n      if (sort === 'asc') {\n        sortApi = 'sort=label'\n      } else {\n        sortApi = 'sort-=label'\n      }\n\n      $.getJSON(`/apiJSON/page?&page=${pageNumber}&${sortApi}`, function (pageresult) {\n        totalPages = getPageCount(pageresult.count, 5);\n        if (page === 1) {\n          $.getJSON(`/apiJSON/page?date&page=${pageNumber}&${sortApi}`, function (pageTable) {\n            createTable(pageTable, 'pages');\n            initPagination(pageNumber, totalPages, 'pagesList');\n            setPaginationListerners();\n            removeLoader('#tableContainer', null, true);\n          });\n        } else {\n          createTable(pageresult, 'pages');\n          removeLoader('#tableContainer', null, true);\n          initPagination(pageNumber, totalPages, 'pagesList');\n          setPaginationListerners();\n        }\n      });\n    }\n\n    showPages(page, sortValue);\n  })(jQuery);\n}\n","function peopleInvolved(id) {\n  (function($) {\n    function getPeopleInvolvedStories(idPeople) {\n      let content = '';\n      $.getJSON(`/apiJSON/stories?filter[author]=${idPeople}`, function (data) {\n        showLoader('.container-content-user');\n        if (data.count !== 0) {\n          data.data.forEach(function(data) {\n            content += `<div class=\"small-12 column  medium-4 blogs-detail\">\n                      <a href=\"/${data.alias}\"><div class=\"contain-text\">\n                        <span class=\"text -white -title-x-small\">${data.label}</span>\n                        <span class=\"text -white\">${moment.unix(parseInt(data.created)).format('D MMMM YYYY')}</span>\n                      </div></a>\n                    </div>`;\n          });\n          removeLoader('.container-content-user');\n          $('.containter-people-detail').append(content);\n        } else {\n          removeLoader('.container-content-user');\n          $('.containter-people-detail').append('<div class=\"small-12 column\"><span class=\"text -white -small-bold\">No results found</span></div>');\n        }\n      });\n    }\n\n    function getPeopleInvolvedNews(idPeople) {\n      let content = '';\n      $.getJSON(`/apiJSON/news?filter[author]=${idPeople}`, function (data) {\n        showLoader('.container-content-user-news');\n        if (data.count !== 0) {\n          data.data.forEach(function(data) {\n            content += `<div class=\"small-12 column  medium-4 news-detail\">\n                      <a href=\"/${data.alias}\"><div class=\"contain-text\">\n                        <span class=\"text -white -title-x-small\">${data.label}</span>\n                        <span class=\"text -white\">${moment.unix(parseInt(data.created)).format('D MMMM YYYY')}</span>\n                      </div></a>\n                    </div>`;\n          });\n          removeLoader('.container-content-user-news');\n          $('.containter-people-detail-news').append(content);\n        } else {\n          removeLoader('.container-content-user-news');\n          $('.containter-people-detail-news').append('<div class=\"small-12 column\"><span class=\"text -white -small-bold\">No results found</span></div>');\n        }\n      });\n    }\n\n    function getPicture(idPeople) {\n      $.getJSON(`/apiJSON/people/${idPeople}?fields=image`, function (data) {\n        showLoader('.image-profile');\n        $('.image-profile').css('background-image', `url(${data.data[0].image})`);\n        removeLoader('.image-profile');\n      });\n    }\n\n    getPeopleInvolvedStories(id);\n    getPeopleInvolvedNews(id);\n    getPicture(id);\n  })(jQuery);\n}\n","function showGroupResourcesDetail(id) {\n  (function($) {\n\n    // cache dom\n    const currentNode = $('#groupResourcesDetail').data('node');\n    const tabsContainer = $('#groupResourcesTabs .tabs-container');\n    const searchContainer = $('#resourceTilesSearch input');\n    const tilesContainer = $('#tilesContainer');\n    const searchEl = $('.c-tile');\n    const searchText = $('.c-tile .tile');\n\n    // custom callback for tabs component\n    const onChangeTab = (sub_group_id, label) => {\n      hideNoResults('#noResultsContainer');\n      showLoader('.l-section');\n      tilesContainer.html('');\n      searchContainer.val('');\n      const filterGroup = currentNode === 2920 ? '' : `filter[group_resource]=${currentNode}&`;\n      $.getJSON(`/apiJSON/resources?${filterGroup}filter[sub_group]=${sub_group_id}&sort=-post_highlighted`, (data) => {\n        if (data.data.length) {\n          appendTiles(data.data, tilesContainer, 4);\n        } else {\n          showNoResults('#noResultsContainer', 'No resources available', 'tall', 'grey', 'xxlarge', 'blue');\n        }\n        removeLoader('.l-section', null, true);\n      });\n      setSearchPlaceholder(searchContainer, label);\n    };\n\n    // fetch content and append\n    $.getJSON(`/apiJSON/sub_group_resource`, (data) => {\n      buildTabs(data.data, tabsContainer, onChangeTab);\n      setSearchPlaceholder(searchContainer, data.data[0].label);\n      setSearchListeners(searchEl, searchText);\n      const filterGroup = currentNode === 2920 ? '' : `filter[group_resource]=${currentNode}&`;\n      $.getJSON(`/apiJSON/resources?${filterGroup}filter[sub_group]=${data.data[0].id}&sort=-post_highlighted`, (resources) => {\n        if (resources.data.length) {\n          appendTiles(resources.data, tilesContainer, 4);\n        } else {\n          showNoResults('#noResultsContainer', 'No resources available', 'tall', 'grey', 'xxlarge', 'blue');\n        }\n        removeLoader('.l-section', null, true);\n      });\n    });\n  })(jQuery);\n}\n","function showGroupResourcesPage() {\n  (function($) {\n    // cache dom\n    const tileContainer = $('#groupResourcesTiles');\n\n    // fetch content and append\n    $.getJSON(`/apiJSON/group_resources`, function (data) {\n      data.data.forEach(function(resource) {\n        const html = `\n          <div class=\"column small-12 medium-4 c-tile\">\n            <a href=\"/${resource.alias}\" class=\"tile -tall\">\n              <span class=\"text -tile -white\">\n                ${resource.label}\n              </span>\n            </a>\n          </div>\n        `;\n        tileContainer.append(html);\n      });\n      removeLoader('.l-section', null, true);\n    });\n  })(jQuery);\n}\n","function showResourcesDetail(id) {\n  (function($) {\n    $.getJSON(`/apiJSON/resources?filter[id]=${id}`, function (data) {\n      buildExploreMoreTiles('resources', 'group_resource', data.data[0].group_resource[0], false, false);\n    });\n  })(jQuery);\n}\n","function featuresResultPage() {\n  (function($) {\n\n    $('#value-search').html('Search for: ' + $('#edit-keys').val());\n\n  })(jQuery);\n}\n","function searchPage() {\n  (function($) {\n\n    $('.search-form input').attr('placeholder', 'Type what you are searching for...');\n\n  })(jQuery);\n}\n","function showStoryDetail(id) {\n  (function ($) {\n\n    // data for post\n    $.getJSON(`/apiJSON/stories/${id}`, function (data) {\n      // cache\n      const story = data.data[0];\n      const creationDate = moment.unix(parseInt(story.created, 10)).format('D MMMM YYYY');\n      let metaHtml = '';\n      let authorsHtml = '<strong class=\"text -bold\">Authors: </strong>';\n      // set country tags\n      if (story.country.length) {\n        const countries = story.country;\n        countries.forEach(function(country, index) {\n          const pathCountry = `${country.alias}`;\n          if (index === countries.length - 1) {\n            metaHtml += `<a href=\"/${pathCountry}\">${country.label}</a><span class=\"text -post-meta\"> | </span>`;\n          } else {\n            metaHtml += `<a href=\"/${pathCountry}\">${country.label}, </a>`;\n          }\n        });\n      }\n      metaHtml += `<span class=\"text -post-meta\">${creationDate}</span>`;\n      $('.countries').html(metaHtml);\n\n      // set body content\n      if (story.content) {\n        $('.-body-content').html(story.content.value);\n      }\n\n      // set author and topics\n      if (story.author[0]) {\n        story.author.forEach(function(author ,index) {\n          if (index === story.author.length - 1) {\n            authorsHtml += `<a class=\"text -blank\" href=\"/${author.alias}\">${author.label}</a>`;\n          } else {\n            authorsHtml += `<a class=\"text -blank\" href=\"/${author.alias}\">${author.label}, </a>`;\n          }\n        });\n        $('.author').append(authorsHtml);\n      }\n\n      if (story.topic[0]) {\n        $('.topic').append('<strong class=\"text -bold\">Topics: </strong>');\n        story.topic.forEach(function(topic, index) {\n          const pathTheme = `${topic.alias}`;\n          if (index === story.topic.length - 1) {\n            $('.topic').append(`<a class=\"text -blank\" href=\"/${pathTheme}\">${topic.label}</a>`);\n          } else {\n            $('.topic').append(`<a class=\"text -blank\" href=\"/${pathTheme}\">${topic.label}</a>, `);\n          }\n        });\n      }\n\n      if (story.tags) {\n        const tags = $('.tags');\n        tags.append('<strong class=\"text -bold\">Tags: </strong>');\n        if (story.tags.length) {\n          story.tags.forEach((tag, index) => {\n            if (index === story.tags.length - 1) {\n              tags.append(`<span class=\"text -blank\">${tag.label}</span>`);\n            } else {\n              tags.append(`<span class=\"text -blank\">${tag.label}</span>, `);\n            }\n          });\n        } else {\n          tags.append('<span class=\"text -grey\">N/A</span>');\n        }\n      }\n\n      if (story.type) {\n        $('.filed-under').append('<strong class=\"text -bold\">Filed Under: </strong>');\n        $('.filed-under').append(`<span class=\"text -blank\">${story.type.label}</a>`);\n      }\n\n      removeLoader('#storiesDetail');\n    });\n  })(jQuery);\n}\n","function showStoriesPage() {\n  (function ($) {\n\n    // cache\n    let countryFilter = 0;\n    let typeFilter = 0;\n    let page = 1;\n    let totalPages = 0;\n    let authorsHtml = '';\n\n    //selectors\n    const countrySelector = $('.country-filter');\n    const typeSelector = $('.type-filter');\n    const coverEvents = $('.c-content-banner');\n    const storiesContainer = $('#storiesTiles');\n\n    // public functions\n    function buildHighlightedEvent(story) {\n      if (story.image) {\n        $('.c-content-banner').css('background-image', `url(${story.image})`);\n      }\n      if (story.author[0]) {\n        story.author.forEach(function(author ,index) {\n          if (index === story.author.length - 1) {\n            authorsHtml += `<a class=\"text -white\" href=\"/${author.alias}\">${author.label}</a>`;\n          } else {\n            authorsHtml += `<a class=\"text -white\" href=\"/${author.alias}\">${author.label}, </a>`;\n          }\n        });\n      }\n      $('.banner-link', coverEvents).attr('href', story.alias);\n      $('.banner-title', coverEvents).html(story.label);\n      $('.banner-date', coverEvents).html(moment.unix(story.created).format('D MMMM YYYY'));\n      if (story.author[0]) {\n        $('.banner-author', coverEvents).html(authorsHtml);\n      }\n      $('.c-content-banner').removeClass('-hidden');\n    }\n\n    function buildSelector(selector, placeholder, endpoint, query) {\n      selector.select2({\n        minimumResultsForSearch: Infinity,\n        containerCssClass: '-green -tall',\n        dropdownCssClass: '-green',\n        placeholder: `${placeholder}`,\n      });\n      selector.append(`<option value=\"0\">${placeholder}</option>`);\n\n      $.getJSON(`/apiJSON/${endpoint}?${query}`, function (data) {\n        data.data.forEach(function(data) {\n          const option = `<option value=\"${data.id}\">${data.label}</option>`;\n          selector.append(option);\n        });\n\n        selector.on('change', function () {\n          showLoader('#storiesContainer');\n          countryFilter = countrySelector.val();\n          typeFilter = typeSelector.val();\n          page = 1;\n          showStories(countryFilter, typeFilter, page);\n        });\n      });\n    }\n\n    function setPaginationListerners() {\n      countryFilter = countrySelector.val();\n      typeFilter = typeSelector.val();\n      $('.onClickPagination').on('click', function(e) {\n        showLoader('#storiesContainer');\n        const pageNum = $(this).data('value');\n        showStories(countryFilter, typeFilter, pageNum);\n      })\n    }\n\n    function showStories(country, type, page) {\n      const activeCountry = parseInt(country) > 0 ? `filter[country]=${country}&` : '';\n      const activeType = parseInt(type) > 0 ? `filter[category]=${type}&` : '';\n      const activeFilters = `${activeCountry}${activeType}&page[number]=${page}&page[size]=8`;\n      $.getJSON(`/apiJSON/stories?${activeFilters}&sort=-created`, function (stories) {\n        if (stories.data.length > 0) {\n          totalPages = getPageCount(stories.count, 8);\n          // if (page === 1) {\n          //   $.getJSON(`/apiJSON/stories?sort=-created`, function (highlightedStory) {\n          //     if (highlightedStory.data[0]) {\n          //       buildHighlightedEvent(highlightedStory.data[0]);\n          //     }\n          //     appendTilesDetailed(stories.data, storiesContainer, 2);\n          //     initPagination(page, totalPages, 'storiesPage');\n          //     setPaginationListerners();\n          //     removeLoader('#storiesContainer', null, true);\n          //   });\n          // } else {\n            appendTilesDetailed(stories.data, storiesContainer, 2);\n            removeLoader('#storiesContainer', null, true);\n            initPagination(page, totalPages, 'storiesPage');\n            setPaginationListerners();\n          // }\n        } else {\n          showNoResults('#storiesTiles', 'No stories with these filters', 'tall', 'grey', 'xxlarge', 'blue');\n          $('.c-pagination').html('');\n          removeLoader('#storiesContainer', null, true);\n        }\n      })\n      .error(function () {\n        showNoResults('#storiesTiles', 'Sorry, stories counld not be found', 'tall', 'grey', 'xxlarge', 'blue');\n        $('.c-pagination').html('');\n        removeLoader('#storiesContainer', null, true);\n      });\n\n    }\n\n    // build page\n    buildSelector(countrySelector, 'All countries', 'countries', 'fields=id,label&sort=label');\n    buildSelector(typeSelector, 'All story types', 'stories_categories', 'fields=id,label&sort=label');\n    showStories(countryFilter, typeFilter, page);\n\n  })(jQuery);\n}\n","function showStoriesSubmitPage(id) {\n  (function ($) {\n\n    // cache\n    const themeSelector = '.type-select';\n    const countrySelector = '.country-select';\n\n    $('#stories-menu').addClass('active');\n\n    $(themeSelector).select2({\n      minimumResultsForSearch: Infinity,\n      containerCssClass: '-tall',\n      placeholder: 'All story types'\n    });\n    $(countrySelector).select2({\n      minimumResultsForSearch: Infinity,\n      containerCssClass: '-tall',\n      placeholder: 'All countries'\n    });\n\n    $.getJSON(`/apiJSON/countries?fields=id,name,label&sort=label`, function (data) {\n      appendSelectOptionsFromData(countrySelector, data.data);\n      $.getJSON(`/apiJSON/themes?sort=label&fields=id,label`, function (data) {\n        appendSelectOptionsFromData(themeSelector, data.data);\n        removeLoader('.c-form', null, true);\n      });\n    });\n\n    $('.c-form').submit(function(e) {\n      const title = $('#title').val();\n      const content = $('.-content').val();\n      const country = $('#country').val();\n      const topic = $('#topic').val();\n      const email = $('#email').val();\n      const author = $('#author').val();\n      const url = './submitCookiesStory.php';\n      if (title !== '' && content !== '') {\n        const dataString = 'title=' + title + '&content=' + content + '&country=' + country + '&topic=' + topic + '&email=' + email + '&author=' + author;\n        $.ajax({\n          type: 'POST',\n          url: url,\n          data: dataString,\n          success: function(data) {\n            document.location.href = `${window.location.origin}/submit-story-accepted`;\n          }\n        });\n      } else {\n        // console.log('data not accepted');\n      }\n      e.preventDefault();\n    });\n\n  })(jQuery);\n}\n","function tagsPage() {\n  (function ($) {\n\n  })(jQuery);\n}\n","function showThemesDetail(id) {\n  (function showAPIThemes($) {\n\n    //cache\n    const countrySelector = $('.country-selector');\n    const contentContainer = $('#contentContainer .content-tiles');\n    const contributorText = $('#contributorsText');\n    let countryFilter;\n\n    // local functions\n    function setContributorsText(log, author, email) {\n      const html = `\n        <b>Contributors:</b> This topic has been developed for the Open Gov Guide by the National Democratic Institute. The lead author was Patrick Merloe with contributions from Michelle Brown and Tova Wang. Please send comments to pat@ndi.org.\n      `;\n      contributorText.html(html);\n    }\n\n    function setSelectCountryListerners() {\n      countrySelector.on('change', function () {\n        hideNoResults();\n        showLoader('#themesDetail');\n        const activeTab = $('.c-tabs .-selected').data('node');\n        const countryModel = $(this).val();\n        if (parseInt(countryModel) === 0) {\n          showContent(contentContainer, activeTab);\n        } else {\n          showContent(contentContainer, activeTab, countryModel);\n        }\n      });\n    }\n\n    // init selector\n    function initSelectors() {\n      countrySelector.select2({\n        minimumResultsForSearch: Infinity,\n        containerCssClass: '-green -tall',\n        dropdownCssClass: '-green',\n        placeholder: 'All countries',\n      });\n      $('.select2').addClass('-green-select');\n      $.getJSON(`/apiJSON/countries?fields=id,label&sort=label`, function(data) {\n        data.data.forEach(function(country) {\n          const option = `<option value=\"${country.id}\">${country.label}</option>`;\n          countrySelector.append(option);\n        });\n      });\n      setSelectCountryListerners();\n    }\n\n    // custom callback for tabs component\n    const onChangeTab = (id, label) => {\n      hideNoResults();\n      showLoader('#themesDetail');\n      $('#themesDetail .-body-content').addClass('-hidden');\n      $(`#themesDetail .${id}`).removeClass('-hidden');\n      const activeCountry = countrySelector.val();\n      if (parseInt(activeCountry) === 0) {\n        showContent(contentContainer, id);\n      } else {\n        showContent(contentContainer, id, activeCountry);\n      }\n      setContributorsText();\n      if (id === 'modelcommitments') {\n        contributorText.removeClass('-hidden');\n      } else {\n        contributorText.addClass('-hidden');\n      }\n    }\n\n    function showContent(container, endpoint, countryFilter) {\n      container.html('');\n      const countryQuery = countryFilter && (endpoint !== 'modelcommitments') ? `&filter[country]=${countryFilter}` : '';\n      const sorting = endpoint === 'stories' ? '-created' : 'label';\n      $.getJSON(`/apiJSON/${endpoint}?filter[theme]=${id}${countryQuery}&sort=${sorting}`, function(data) {\n        hideNoResults();\n        if (data.data.length) {\n          appendTilesWithoutBackground(data.data, container, 2, '-themes', endpoint);\n        } else {\n          showNoResults(container, 'No content available', 'tall', 'grey', 'xxlarge', 'blue');\n        }\n        removeLoader('#themesDetail', null, true);\n      });\n    }\n    // init page\n    initTabs();\n    setTabListeners(onChangeTab);\n    initSelectors();\n    showContent(contentContainer, 'starredcommitments');\n    buildExploreMoreTiles('themes', '', '', false, false);\n\n  })(jQuery);\n}\n","function showThemesPage() {\n  (function showAPIThemes($) {\n\n    //consts\n    const themesContainer = $('#tilesContainer');\n    const searchContainer = $('#themesTilesSearch input');\n    const searchEl = $('.c-tile');\n    const searchText = $('.c-tile .tile');\n    const themesTitle = $('.tiles-heading');\n\n    // local functions\n    function showThemesTiles() {\n      $.getJSON(`/apiJSON/themes?sort=label`, function(data) {\n        if (data.data.length) {\n          appendTiles(data.data, themesContainer, 3);\n        } else {\n          showNoResults('#tilesNoResults', 'No themes available', 'tall', 'grey', 'xxlarge', 'blue');\n        }\n        removeLoader('.l-section', null, true);\n      });\n    }\n\n    // custom callback for tabs component\n    const onChangeTab = (id, label) => {\n      themesTitle.html(label);\n      let currentSearch = searchContainer.val();\n      currentSearch = currentSearch.toLowerCase();\n      const parseId = parseInt(id);\n      $('.c-tile').each(function () {\n        if (currentSearch) {\n          if ( ($(this).data('group') === parseId && $(this).html().toLowerCase().indexOf(currentSearch) > -1) ||\n          (id === '0' && $('.tile', this).html().toLowerCase().indexOf(currentSearch) > -1 )) {\n            $(this).css('display', 'block');\n          } else {\n            $(this).css('display', 'none');\n          }\n        } else {\n          if ($(this).data('group') === parseId || parseId === 0) {\n            $(this).css('display', 'block');\n          } else {\n            $(this).css('display', 'none');\n          }\n        }\n      });\n\n      // check for zero results\n      const results = $('.c-tile').filter(function () {\n        return $(this).css('display') === 'block';\n      }).length;\n\n      // show empty results\n      if (results === 0) {\n        showNoResults('#noResultsContainer', 'No themes available', 'tall', 'grey', 'xxlarge', 'blue');\n      } else {\n        hideNoResults('#noResultsContainer');\n      }\n    };\n\n    // init page\n    showThemesTiles();\n    initTabs();\n    setTabListeners(onChangeTab);\n    setSearchListeners(searchEl, searchText);\n\n  })(jQuery);\n}\n","function showGroupList() {\n  (function($) {\n    let page = 1;\n    let totalPages = 0;\n    let sortValue = 'asc';\n    const tableContainer = $('.container-info-table');\n\n    $('.sort-field').click(function() {\n      if (sortValue === 'asc') {\n        $('.triangle-sort').css('transform', 'rotate(180deg)'); // use this functions, because jquery method addClass not work with svg.\n        sortValue = 'desc';\n      } else {\n        $('.triangle-sort').css('transform', 'rotate(0deg)');\n        sortValue = 'asc';\n      }\n      page = 1;\n      showLoader('#tableContainer');\n      showGroups(page, sortValue);\n    });\n\n    function setPaginationListerners() {\n      $('.onClickPagination').on('click', function(e) {\n        showLoader('#tableContainer');\n        const pageNum = $(this).data('value');\n        showGroups(pageNum, sortValue);\n      })\n    }\n\n    function showGroups(page, sort) {\n      let sortApi = '';\n\n      if (sort === 'asc') {\n        sortApi = 'sort=label'\n      } else {\n        sortApi = 'sort-=label'\n      }\n\n      $.getJSON(`/apiJSON/working_group?&page=${page}&${sortApi}`, function (working) {\n        totalPages = getPageCount(working.count, 5);\n        if (page === 1) {\n          $.getJSON(`/apiJSON/working_group?date&page=${page}&${sortApi}`, function (workingTable) {\n            createTable(workingTable, 'groups');\n            initPagination(page, totalPages, 'workingGroupList');\n            setPaginationListerners();\n            removeLoader('#tableContainer', null, true);\n          });\n        } else {\n          createTable(working, 'groups');\n          removeLoader('#tableContainer', null, true);\n          initPagination(page, totalPages, 'workingGroupList');\n          setPaginationListerners();\n        }\n      });\n    }\n    showGroups(page, sortValue);\n  })(jQuery);\n}\n","function showWorkingGroupDetail(id) {\n  (function($) {\n    const tabsContainer = $('.tabs-container');\n    const containerInfo = $('#container-info');\n\n    // custom callback for tabs component\n    const onChangeWorkinPageTab = function (id, label) {\n      $('.tab-content').addClass('-hidden');\n      $(`.${id}`).removeClass('-hidden');\n    };\n\n    function initWorkingTabs(onChange) {\n      initTabs();\n      setTabListeners(onChange);\n    }\n    showLoader('.working-group-content');\n    $.getJSON(`/apiJSON/working_group_page?filter[working_group]=${id}&filter[show]=1&sort=order`, (data) => {\n      buildTabs(data.data, tabsContainer, onChangeWorkinPageTab);\n      initWorkingTabs(onChangeWorkinPageTab);\n      for (let i = 0; i < data.data.length; i += 1) {\n        containerInfo.append(`\n          <div class=\"tab-content -hidden ${data.data[i].id}\">\n            <h3 class=\"text -section-title\">${data.data[i].label}</h3>\n            <div class=\"text -body-content\">\n              ${data.data[i].body.value}\n            </div>\n          </div>\n        `);\n      }\n      removeLoader('.working-group-content', null, true);\n    });\n  })(jQuery);\n}\n"]}